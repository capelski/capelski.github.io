/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={8679:(e,t,n)=>{"use strict";var a=n(9864),l={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function s(e){return a.isMemo(e)?i:o[e.$$typeof]||l}o[a.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[a.Memo]=i;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,a){if("string"!=typeof n){if(m){var l=f(n);l&&l!==m&&e(t,l,a)}var i=c(n);d&&(i=i.concat(d(n)));for(var o=s(t),h=s(n),g=0;g<i.length;++g){var y=i[g];if(!(r[y]||a&&a[y]||h&&h[y]||o&&o[y])){var b=p(n,y);try{u(t,y,b)}catch(e){}}}}return t}},5638:(e,t,n)=>{"use strict";n.r(t)},7418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,l){for(var r,i,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var u in r=Object(arguments[s]))n.call(r,u)&&(o[u]=r[u]);if(t){i=t(r);for(var c=0;c<i.length;c++)a.call(r,i[c])&&(o[i[c]]=r[i[c]])}}return o}},2703:(e,t,n)=>{"use strict";var a=n(414);function l(){}function r(){}r.resetWarningCache=l,e.exports=function(){function e(e,t,n,l,r,i){if(i!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:l};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4448:(e,t,n)=>{"use strict";var a=n(7294),l=n(7418),r=n(3840);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!a)throw Error(i(227));function o(e,t,n,a,l,r,i,o,s){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var s=!1,u=null,c=!1,d=null,p={onError:function(e){s=!0,u=e}};function f(e,t,n,a,l,r,i,c,d){s=!1,u=null,o.apply(p,arguments)}var m=null,h=null,g=null;function y(e,t,n){var a=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,a,l,r,o,p,m){if(f.apply(this,arguments),s){if(!s)throw Error(i(198));var h=u;s=!1,u=null,c||(c=!0,d=h)}}(a,t,void 0,e),e.currentTarget=null}var b=null,v={};function w(){if(b)for(var e in v){var t=v[e],n=b.indexOf(e);if(!(-1<n))throw Error(i(96,e));if(!k[n]){if(!t.extractEvents)throw Error(i(97,e));for(var a in k[n]=t,n=t.eventTypes){var l=void 0,r=n[a],o=t,s=a;if(I.hasOwnProperty(s))throw Error(i(99,s));I[s]=r;var u=r.phasedRegistrationNames;if(u){for(l in u)u.hasOwnProperty(l)&&E(u[l],o,s);l=!0}else r.registrationName?(E(r.registrationName,o,s),l=!0):l=!1;if(!l)throw Error(i(98,a,e))}}}}function E(e,t,n){if(A[e])throw Error(i(100,e));A[e]=t,x[e]=t.eventTypes[n].dependencies}var k=[],I={},A={},x={};function S(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var a=e[t];if(!v.hasOwnProperty(t)||v[t]!==a){if(v[t])throw Error(i(102,t));v[t]=a,n=!0}}n&&w()}var T=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),P=null,C=null,j=null;function _(e){if(e=h(e)){if("function"!=typeof P)throw Error(i(280));var t=e.stateNode;t&&(t=m(t),P(e.stateNode,e.type,t))}}function O(e){C?j?j.push(e):j=[e]:C=e}function N(){if(C){var e=C,t=j;if(j=C=null,_(e),t)for(e=0;e<t.length;e++)_(t[e])}}function M(e,t){return e(t)}function D(e,t,n,a,l){return e(t,n,a,l)}function F(){}var R=M,q=!1,W=!1;function L(){null===C&&null===j||(F(),N())}function B(e,t,n){if(W)return e(t,n);W=!0;try{return R(e,t,n)}finally{W=!1,L()}}var z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G=Object.prototype.hasOwnProperty,H={},U={};function Y(e,t,n,a,l,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){V[e]=new Y(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];V[t]=new Y(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){V[e]=new Y(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){V[e]=new Y(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){V[e]=new Y(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){V[e]=new Y(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){V[e]=new Y(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){V[e]=new Y(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){V[e]=new Y(e,5,!1,e.toLowerCase(),null,!1)}));var $=/[\-:]([a-z])/g;function K(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace($,K);V[t]=new Y(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace($,K);V[t]=new Y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace($,K);V[t]=new Y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){V[e]=new Y(e,1,!1,e.toLowerCase(),null,!1)})),V.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){V[e]=new Y(e,1,!1,e.toLowerCase(),null,!0)}));var Q=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,n,a){var l=V.hasOwnProperty(t)?V[t]:null;(null!==l?0===l.type:!a&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,a){if(null==t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,l,a)&&(n=null),a||null===l?function(e){return!!G.call(U,e)||!G.call(H,e)&&(z.test(e)?U[e]=!0:(H[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=null===n?3!==l.type&&"":n:(t=l.attributeName,a=l.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(l=l.type)||4===l&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}Q.hasOwnProperty("ReactCurrentDispatcher")||(Q.ReactCurrentDispatcher={current:null}),Q.hasOwnProperty("ReactCurrentBatchConfig")||(Q.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,Z="function"==typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,ae=Z?Symbol.for("react.strict_mode"):60108,le=Z?Symbol.for("react.profiler"):60114,re=Z?Symbol.for("react.provider"):60109,ie=Z?Symbol.for("react.context"):60110,oe=Z?Symbol.for("react.concurrent_mode"):60111,se=Z?Symbol.for("react.forward_ref"):60112,ue=Z?Symbol.for("react.suspense"):60113,ce=Z?Symbol.for("react.suspense_list"):60120,de=Z?Symbol.for("react.memo"):60115,pe=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,me="function"==typeof Symbol&&Symbol.iterator;function he(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=me&&e[me]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case le:return"Profiler";case ae:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ie:return"Context.Consumer";case re:return"Context.Provider";case se:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case de:return ge(e.type);case fe:return ge(e.render);case pe:if(e=1===e._status?e._result:null)return ge(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var a=e._debugOwner,l=e._debugSource,r=ge(e.type);n=null,a&&(n=ge(a.type)),a=r,r="",l?r=" (at "+l.fileName.replace(X,"")+":"+l.lineNumber+")":n&&(r=" (created by "+n+")"),n="\n    in "+(a||"Unknown")+r}t+=n,e=e.return}while(e);return t}function be(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ve(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function we(e){e._valueTracker||(e._valueTracker=function(e){var t=ve(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var l=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(e){a=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ee(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=ve(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function ke(e,t){var n=t.checked;return l({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ie(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=be(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ae(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function xe(e,t){Ae(e,t);var n=be(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?Te(e,t.type,n):t.hasOwnProperty("defaultValue")&&Te(e,t.type,be(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Se(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Te(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Pe(e,t){return e=l({children:void 0},t),(t=function(e){var t="";return a.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ce(e,t,n,a){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&a&&(e[n].defaultSelected=!0)}else{for(n=""+be(n),t=null,l=0;l<e.length;l++){if(e[l].value===n)return e[l].selected=!0,void(a&&(e[l].defaultSelected=!0));null!==t||e[l].disabled||(t=e[l])}null!==t&&(t.selected=!0)}}function je(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return l({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _e(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:be(n)}}function Oe(e,t){var n=be(t.value),a=be(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function Ne(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function De(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Fe,Re,qe=(Re=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Fe=Fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction((function(){return Re(e,t)}))}:Re);function We(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Le(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Be={animationend:Le("Animation","AnimationEnd"),animationiteration:Le("Animation","AnimationIteration"),animationstart:Le("Animation","AnimationStart"),transitionend:Le("Transition","TransitionEnd")},ze={},Ge={};function He(e){if(ze[e])return ze[e];if(!Be[e])return e;var t,n=Be[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return ze[e]=n[t];return e}T&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete Be.animationend.animation,delete Be.animationiteration.animation,delete Be.animationstart.animation),"TransitionEvent"in window||delete Be.transitionend.transition);var Ue=He("animationend"),Ye=He("animationiteration"),Ve=He("animationstart"),$e=He("transitionend"),Ke="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qe=new("function"==typeof WeakMap?WeakMap:Map);function Je(e){var t=Qe.get(e);return void 0===t&&(t=new Map,Qe.set(e,t)),t}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function et(e){if(Xe(e)!==e)throw Error(i(188))}function tt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,a=t;;){var l=n.return;if(null===l)break;var r=l.alternate;if(null===r){if(null!==(a=l.return)){n=a;continue}break}if(l.child===r.child){for(r=l.child;r;){if(r===n)return et(l),e;if(r===a)return et(l),t;r=r.sibling}throw Error(i(188))}if(n.return!==a.return)n=l,a=r;else{for(var o=!1,s=l.child;s;){if(s===n){o=!0,n=l,a=r;break}if(s===a){o=!0,a=l,n=r;break}s=s.sibling}if(!o){for(s=r.child;s;){if(s===n){o=!0,n=r,a=l;break}if(s===a){o=!0,a=r,n=l;break}s=s.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==a)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function nt(e,t){if(null==t)throw Error(i(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function at(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var lt=null;function rt(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var a=0;a<t.length&&!e.isPropagationStopped();a++)y(e,t[a],n[a]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function it(e){if(null!==e&&(lt=nt(lt,e)),e=lt,lt=null,e){if(at(e,rt),lt)throw Error(i(95));if(c)throw e=d,c=!1,d=null,e}}function ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function st(e){if(!T)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var ut=[];function ct(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ut.length&&ut.push(e)}function dt(e,t,n,a){if(ut.length){var l=ut.pop();return l.topLevelType=e,l.eventSystemFlags=a,l.nativeEvent=t,l.targetInst=n,l}return{topLevelType:e,eventSystemFlags:a,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var a=n;if(3===a.tag)a=a.stateNode.containerInfo;else{for(;a.return;)a=a.return;a=3!==a.tag?null:a.stateNode.containerInfo}if(!a)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=_n(a)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var l=ot(e.nativeEvent);a=e.topLevelType;var r=e.nativeEvent,i=e.eventSystemFlags;0===n&&(i|=64);for(var o=null,s=0;s<k.length;s++){var u=k[s];u&&(u=u.extractEvents(a,t,r,l,i))&&(o=nt(o,u))}it(o)}}function ft(e,t,n){if(!n.has(e)){switch(e){case"scroll":Vt(t,"scroll",!0);break;case"focus":case"blur":Vt(t,"focus",!0),Vt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":st(e)&&Vt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ke.indexOf(e)&&Yt(e,t)}n.set(e,null)}}var mt,ht,gt,yt=!1,bt=[],vt=null,wt=null,Et=null,kt=new Map,It=new Map,At=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),St="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Tt(e,t,n,a,l){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:l,container:a}}function Pt(e,t){switch(e){case"focus":case"blur":vt=null;break;case"dragenter":case"dragleave":wt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Ct(e,t,n,a,l,r){return null===e||e.nativeEvent!==r?(e=Tt(t,n,a,l,r),null!==t&&null!==(t=On(t))&&ht(t),e):(e.eventSystemFlags|=a,e)}function jt(e){var t=_n(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ze(n)))return e.blockedOn=t,void r.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _t(e){if(null!==e.blockedOn)return!1;var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=On(t);return null!==n&&ht(n),e.blockedOn=t,!1}return!0}function Ot(e,t,n){_t(e)&&n.delete(t)}function Nt(){for(yt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=On(e.blockedOn))&&mt(e);break}var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==vt&&_t(vt)&&(vt=null),null!==wt&&_t(wt)&&(wt=null),null!==Et&&_t(Et)&&(Et=null),kt.forEach(Ot),It.forEach(Ot)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,yt||(yt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Nt)))}function Dt(e){function t(t){return Mt(t,e)}if(0<bt.length){Mt(bt[0],e);for(var n=1;n<bt.length;n++){var a=bt[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==vt&&Mt(vt,e),null!==wt&&Mt(wt,e),null!==Et&&Mt(Et,e),kt.forEach(t),It.forEach(t),n=0;n<At.length;n++)(a=At[n]).blockedOn===e&&(a.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)jt(n),null===n.blockedOn&&At.shift()}var Ft={},Rt=new Map,qt=new Map,Wt=["abort","abort",Ue,"animationEnd",Ye,"animationIteration",Ve,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$e,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var a=e[n],l=e[n+1],r="on"+(l[0].toUpperCase()+l.slice(1));r={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[a],eventPriority:t},qt.set(a,t),Rt.set(a,r),Ft[l]=r}}Lt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Wt,2);for(var Bt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),zt=0;zt<Bt.length;zt++)qt.set(Bt[zt],0);var Gt=r.unstable_UserBlockingPriority,Ht=r.unstable_runWithPriority,Ut=!0;function Yt(e,t){Vt(t,e,!1)}function Vt(e,t,n){var a=qt.get(t);switch(void 0===a?2:a){case 0:a=$t.bind(null,t,1,e);break;case 1:a=Kt.bind(null,t,1,e);break;default:a=Qt.bind(null,t,1,e)}n?e.addEventListener(t,a,!0):e.addEventListener(t,a,!1)}function $t(e,t,n,a){q||F();var l=Qt,r=q;q=!0;try{D(l,e,t,n,a)}finally{(q=r)||L()}}function Kt(e,t,n,a){Ht(Gt,Qt.bind(null,e,t,n,a))}function Qt(e,t,n,a){if(Ut)if(0<bt.length&&-1<xt.indexOf(e))e=Tt(null,e,t,n,a),bt.push(e);else{var l=Jt(e,t,n,a);if(null===l)Pt(e,a);else if(-1<xt.indexOf(e))e=Tt(l,e,t,n,a),bt.push(e);else if(!function(e,t,n,a,l){switch(t){case"focus":return vt=Ct(vt,e,t,n,a,l),!0;case"dragenter":return wt=Ct(wt,e,t,n,a,l),!0;case"mouseover":return Et=Ct(Et,e,t,n,a,l),!0;case"pointerover":var r=l.pointerId;return kt.set(r,Ct(kt.get(r)||null,e,t,n,a,l)),!0;case"gotpointercapture":return r=l.pointerId,It.set(r,Ct(It.get(r)||null,e,t,n,a,l)),!0}return!1}(l,e,t,n,a)){Pt(e,a),e=dt(e,a,null,t);try{B(pt,e)}finally{ct(e)}}}}function Jt(e,t,n,a){if(null!==(n=_n(n=ot(a)))){var l=Xe(n);if(null===l)n=null;else{var r=l.tag;if(13===r){if(null!==(n=Ze(l)))return n;n=null}else if(3===r){if(l.stateNode.hydrate)return 3===l.tag?l.stateNode.containerInfo:null;n=null}else l!==n&&(n=null)}}e=dt(e,a,n,t);try{B(pt,e)}finally{ct(e)}return null}var Xt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zt=["Webkit","ms","Moz","O"];function en(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Xt.hasOwnProperty(e)&&Xt[e]?(""+t).trim():t+"px"}function tn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),l=en(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,l):e[n]=l}}Object.keys(Xt).forEach((function(e){Zt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xt[t]=Xt[e]}))}));var nn=l({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function an(e,t){if(t){if(nn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62,""))}}function ln(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rn="http://www.w3.org/1999/xhtml";function on(e,t){var n=Je(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=x[t];for(var a=0;a<t.length;a++)ft(t[a],e,n)}function sn(){}function un(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var n,a=cn(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=cn(a)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fn(){for(var e=window,t=un();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=un((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var hn="$",gn="/$",yn="$?",bn="$!",vn=null,wn=null;function En(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function kn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var In="function"==typeof setTimeout?setTimeout:void 0,An="function"==typeof clearTimeout?clearTimeout:void 0;function xn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Sn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===hn||n===bn||n===yn){if(0===t)return e;t--}else n===gn&&t++}e=e.previousSibling}return null}var Tn=Math.random().toString(36).slice(2),Pn="__reactInternalInstance$"+Tn,Cn="__reactEventHandlers$"+Tn,jn="__reactContainere$"+Tn;function _n(e){var t=e[Pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jn]||n[Pn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Sn(e);null!==e;){if(n=e[Pn])return n;e=Sn(e)}return t}n=(e=n).parentNode}return null}function On(e){return!(e=e[Pn]||e[jn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Nn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Mn(e){return e[Cn]||null}function Dn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Fn(e,t){var n=e.stateNode;if(!n)return null;var a=m(n);if(!a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}function Rn(e,t,n){(t=Fn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=nt(n._dispatchListeners,t),n._dispatchInstances=nt(n._dispatchInstances,e))}function qn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Dn(t);for(t=n.length;0<t--;)Rn(n[t],"captured",e);for(t=0;t<n.length;t++)Rn(n[t],"bubbled",e)}}function Wn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Fn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=nt(n._dispatchListeners,t),n._dispatchInstances=nt(n._dispatchInstances,e))}function Ln(e){e&&e.dispatchConfig.registrationName&&Wn(e._targetInst,null,e)}function Bn(e){at(e,qn)}var zn=null,Gn=null,Hn=null;function Un(){if(Hn)return Hn;var e,t,n=Gn,a=n.length,l="value"in zn?zn.value:zn.textContent,r=l.length;for(e=0;e<a&&n[e]===l[e];e++);var i=a-e;for(t=1;t<=i&&n[a-t]===l[r-t];t++);return Hn=l.slice(e,1<t?1-t:void 0)}function Yn(){return!0}function Vn(){return!1}function $n(e,t,n,a){for(var l in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(l)&&((t=e[l])?this[l]=t(n):"target"===l?this.target=a:this[l]=n[l]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Yn:Vn,this.isPropagationStopped=Vn,this}function Kn(e,t,n,a){if(this.eventPool.length){var l=this.eventPool.pop();return this.call(l,e,t,n,a),l}return new this(e,t,n,a)}function Qn(e){if(!(e instanceof this))throw Error(i(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Jn(e){e.eventPool=[],e.getPooled=Kn,e.release=Qn}l($n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){this.isPersistent=Yn},isPersistent:Vn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Vn,this._dispatchInstances=this._dispatchListeners=null}}),$n.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},$n.extend=function(e){function t(){}function n(){return a.apply(this,arguments)}var a=this;t.prototype=a.prototype;var r=new t;return l(r,n.prototype),n.prototype=r,n.prototype.constructor=n,n.Interface=l({},a.Interface,e),n.extend=a.extend,Jn(n),n},Jn($n);var Xn=$n.extend({data:null}),Zn=$n.extend({data:null}),ea=[9,13,27,32],ta=T&&"CompositionEvent"in window,na=null;T&&"documentMode"in document&&(na=document.documentMode);var aa=T&&"TextEvent"in window&&!na,la=T&&(!ta||na&&8<na&&11>=na),ra=String.fromCharCode(32),ia={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},oa=!1;function sa(e,t){switch(e){case"keyup":return-1!==ea.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ua(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ca=!1,da={eventTypes:ia,extractEvents:function(e,t,n,a){var l;if(ta)e:{switch(e){case"compositionstart":var r=ia.compositionStart;break e;case"compositionend":r=ia.compositionEnd;break e;case"compositionupdate":r=ia.compositionUpdate;break e}r=void 0}else ca?sa(e,n)&&(r=ia.compositionEnd):"keydown"===e&&229===n.keyCode&&(r=ia.compositionStart);return r?(la&&"ko"!==n.locale&&(ca||r!==ia.compositionStart?r===ia.compositionEnd&&ca&&(l=Un()):(Gn="value"in(zn=a)?zn.value:zn.textContent,ca=!0)),r=Xn.getPooled(r,t,n,a),(l||null!==(l=ua(n)))&&(r.data=l),Bn(r),l=r):l=null,(e=aa?function(e,t){switch(e){case"compositionend":return ua(t);case"keypress":return 32!==t.which?null:(oa=!0,ra);case"textInput":return(e=t.data)===ra&&oa?null:e;default:return null}}(e,n):function(e,t){if(ca)return"compositionend"===e||!ta&&sa(e,t)?(e=Un(),Hn=Gn=zn=null,ca=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return la&&"ko"!==t.locale?null:t.data}}(e,n))?((t=Zn.getPooled(ia.beforeInput,t,n,a)).data=e,Bn(t)):t=null,null===l?t:null===t?l:[l,t]}},pa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pa[e.type]:"textarea"===t}var ma={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ha(e,t,n){return(e=$n.getPooled(ma.change,e,t,n)).type="change",O(n),Bn(e),e}var ga=null,ya=null;function ba(e){it(e)}function va(e){if(Ee(Nn(e)))return e}function wa(e,t){if("change"===e)return t}var Ea=!1;function ka(){ga&&(ga.detachEvent("onpropertychange",Ia),ya=ga=null)}function Ia(e){if("value"===e.propertyName&&va(ya))if(e=ha(ya,e,ot(e)),q)it(e);else{q=!0;try{M(ba,e)}finally{q=!1,L()}}}function Aa(e,t,n){"focus"===e?(ka(),ya=n,(ga=t).attachEvent("onpropertychange",Ia)):"blur"===e&&ka()}function xa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return va(ya)}function Sa(e,t){if("click"===e)return va(t)}function Ta(e,t){if("input"===e||"change"===e)return va(t)}T&&(Ea=st("input")&&(!document.documentMode||9<document.documentMode));var Pa={eventTypes:ma,_isInputEventSupported:Ea,extractEvents:function(e,t,n,a){var l=t?Nn(t):window,r=l.nodeName&&l.nodeName.toLowerCase();if("select"===r||"input"===r&&"file"===l.type)var i=wa;else if(fa(l))if(Ea)i=Ta;else{i=xa;var o=Aa}else(r=l.nodeName)&&"input"===r.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(i=Sa);if(i&&(i=i(e,t)))return ha(i,n,a);o&&o(e,l,t),"blur"===e&&(e=l._wrapperState)&&e.controlled&&"number"===l.type&&Te(l,"number",l.value)}},Ca=$n.extend({view:null,detail:null}),ja={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _a(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ja[e])&&!!t[e]}function Oa(){return _a}var Na=0,Ma=0,Da=!1,Fa=!1,Ra=Ca.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Oa,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Na;return Na=e.screenX,Da?"mousemove"===e.type?e.screenX-t:0:(Da=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ma;return Ma=e.screenY,Fa?"mousemove"===e.type?e.screenY-t:0:(Fa=!0,0)}}),qa=Ra.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Wa={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},La={eventTypes:Wa,extractEvents:function(e,t,n,a,l){var r="mouseover"===e||"pointerover"===e,i="mouseout"===e||"pointerout"===e;if(r&&0==(32&l)&&(n.relatedTarget||n.fromElement)||!i&&!r)return null;if(r=a.window===a?a:(r=a.ownerDocument)?r.defaultView||r.parentWindow:window,i?(i=t,null!==(t=(t=n.relatedTarget||n.toElement)?_n(t):null)&&(t!==Xe(t)||5!==t.tag&&6!==t.tag)&&(t=null)):i=null,i===t)return null;if("mouseout"===e||"mouseover"===e)var o=Ra,s=Wa.mouseLeave,u=Wa.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(o=qa,s=Wa.pointerLeave,u=Wa.pointerEnter,c="pointer");if(e=null==i?r:Nn(i),r=null==t?r:Nn(t),(s=o.getPooled(s,i,n,a)).type=c+"leave",s.target=e,s.relatedTarget=r,(n=o.getPooled(u,t,n,a)).type=c+"enter",n.target=r,n.relatedTarget=e,c=t,(a=i)&&c)e:{for(u=c,i=0,e=o=a;e;e=Dn(e))i++;for(e=0,t=u;t;t=Dn(t))e++;for(;0<i-e;)o=Dn(o),i--;for(;0<e-i;)u=Dn(u),e--;for(;i--;){if(o===u||o===u.alternate)break e;o=Dn(o),u=Dn(u)}o=null}else o=null;for(u=o,o=[];a&&a!==u&&(null===(i=a.alternate)||i!==u);)o.push(a),a=Dn(a);for(a=[];c&&c!==u&&(null===(i=c.alternate)||i!==u);)a.push(c),c=Dn(c);for(c=0;c<o.length;c++)Wn(o[c],"bubbled",s);for(c=a.length;0<c--;)Wn(a[c],"captured",n);return 0==(64&l)?[s]:[s,n]}},Ba="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},za=Object.prototype.hasOwnProperty;function Ga(e,t){if(Ba(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++)if(!za.call(t,n[a])||!Ba(e[n[a]],t[n[a]]))return!1;return!0}var Ha=T&&"documentMode"in document&&11>=document.documentMode,Ua={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ya=null,Va=null,$a=null,Ka=!1;function Qa(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Ka||null==Ya||Ya!==un(n)?null:(n="selectionStart"in(n=Ya)&&mn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},$a&&Ga($a,n)?null:($a=n,(e=$n.getPooled(Ua.select,Va,e,t)).type="select",e.target=Ya,Bn(e),e))}var Ja={eventTypes:Ua,extractEvents:function(e,t,n,a,l,r){if(!(r=!(l=r||(a.window===a?a.document:9===a.nodeType?a:a.ownerDocument)))){e:{l=Je(l),r=x.onSelect;for(var i=0;i<r.length;i++)if(!l.has(r[i])){l=!1;break e}l=!0}r=!l}if(r)return null;switch(l=t?Nn(t):window,e){case"focus":(fa(l)||"true"===l.contentEditable)&&(Ya=l,Va=t,$a=null);break;case"blur":$a=Va=Ya=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ka=!1,Qa(n,a);case"selectionchange":if(Ha)break;case"keydown":case"keyup":return Qa(n,a)}return null}},Xa=$n.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Za=$n.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),el=Ca.extend({relatedTarget:null});function tl(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var nl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},al={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ll=Ca.extend({key:function(e){if(e.key){var t=nl[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tl(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?al[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Oa,charCode:function(e){return"keypress"===e.type?tl(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tl(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),rl=Ra.extend({dataTransfer:null}),il=Ca.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Oa}),ol=$n.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),sl=Ra.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ul={eventTypes:Ft,extractEvents:function(e,t,n,a){var l=Rt.get(e);if(!l)return null;switch(e){case"keypress":if(0===tl(n))return null;case"keydown":case"keyup":e=ll;break;case"blur":case"focus":e=el;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Ra;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=rl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=il;break;case Ue:case Ye:case Ve:e=Xa;break;case $e:e=ol;break;case"scroll":e=Ca;break;case"wheel":e=sl;break;case"copy":case"cut":case"paste":e=Za;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=qa;break;default:e=$n}return Bn(t=e.getPooled(l,t,n,a)),t}};if(b)throw Error(i(101));b=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),m=Mn,h=On,g=Nn,S({SimpleEventPlugin:ul,EnterLeaveEventPlugin:La,ChangeEventPlugin:Pa,SelectEventPlugin:Ja,BeforeInputEventPlugin:da});var cl=[],dl=-1;function pl(e){0>dl||(e.current=cl[dl],cl[dl]=null,dl--)}function fl(e,t){dl++,cl[dl]=e.current,e.current=t}var ml={},hl={current:ml},gl={current:!1},yl=ml;function bl(e,t){var n=e.type.contextTypes;if(!n)return ml;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var l,r={};for(l in n)r[l]=t[l];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function vl(e){return null!=e.childContextTypes}function wl(){pl(gl),pl(hl)}function El(e,t,n){if(hl.current!==ml)throw Error(i(168));fl(hl,t),fl(gl,n)}function kl(e,t,n){var a=e.stateNode;if(e=t.childContextTypes,"function"!=typeof a.getChildContext)return n;for(var r in a=a.getChildContext())if(!(r in e))throw Error(i(108,ge(t)||"Unknown",r));return l({},n,{},a)}function Il(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ml,yl=hl.current,fl(hl,e),fl(gl,gl.current),!0}function Al(e,t,n){var a=e.stateNode;if(!a)throw Error(i(169));n?(e=kl(e,t,yl),a.__reactInternalMemoizedMergedChildContext=e,pl(gl),pl(hl),fl(hl,e)):pl(gl),fl(gl,n)}var xl=r.unstable_runWithPriority,Sl=r.unstable_scheduleCallback,Tl=r.unstable_cancelCallback,Pl=r.unstable_requestPaint,Cl=r.unstable_now,jl=r.unstable_getCurrentPriorityLevel,_l=r.unstable_ImmediatePriority,Ol=r.unstable_UserBlockingPriority,Nl=r.unstable_NormalPriority,Ml=r.unstable_LowPriority,Dl=r.unstable_IdlePriority,Fl={},Rl=r.unstable_shouldYield,ql=void 0!==Pl?Pl:function(){},Wl=null,Ll=null,Bl=!1,zl=Cl(),Gl=1e4>zl?Cl:function(){return Cl()-zl};function Hl(){switch(jl()){case _l:return 99;case Ol:return 98;case Nl:return 97;case Ml:return 96;case Dl:return 95;default:throw Error(i(332))}}function Ul(e){switch(e){case 99:return _l;case 98:return Ol;case 97:return Nl;case 96:return Ml;case 95:return Dl;default:throw Error(i(332))}}function Yl(e,t){return e=Ul(e),xl(e,t)}function Vl(e,t,n){return e=Ul(e),Sl(e,t,n)}function $l(e){return null===Wl?(Wl=[e],Ll=Sl(_l,Ql)):Wl.push(e),Fl}function Kl(){if(null!==Ll){var e=Ll;Ll=null,Tl(e)}Ql()}function Ql(){if(!Bl&&null!==Wl){Bl=!0;var e=0;try{var t=Wl;Yl(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Wl=null}catch(t){throw null!==Wl&&(Wl=Wl.slice(e+1)),Sl(_l,Kl),t}finally{Bl=!1}}}function Jl(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Xl(e,t){if(e&&e.defaultProps)for(var n in t=l({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Zl={current:null},er=null,tr=null,nr=null;function ar(){nr=tr=er=null}function lr(e){var t=Zl.current;pl(Zl),e.type._context._currentValue=t}function rr(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ir(e,t){er=e,nr=tr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ni=!0),e.firstContext=null)}function or(e,t){if(nr!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(nr=e,t=1073741823),t={context:e,observedBits:t,next:null},null===tr){if(null===er)throw Error(i(308));tr=t,er.dependencies={expirationTime:0,firstContext:t,responders:null}}else tr=tr.next=t;return e._currentValue}var sr=!1;function ur(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function cr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function dr(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function pr(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fr(e,t){var n=e.alternate;null!==n&&cr(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function mr(e,t,n,a){var r=e.updateQueue;sr=!1;var i=r.baseQueue,o=r.shared.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}i=o,r.shared.pending=null,null!==(s=e.alternate)&&null!==(s=s.updateQueue)&&(s.baseQueue=o)}if(null!==i){s=i.next;var u=r.baseState,c=0,d=null,p=null,f=null;if(null!==s)for(var m=s;;){if((o=m.expirationTime)<a){var h={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,tag:m.tag,payload:m.payload,callback:m.callback,next:null};null===f?(p=f=h,d=u):f=f.next=h,o>c&&(c=o)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,tag:m.tag,payload:m.payload,callback:m.callback,next:null}),ws(o,m.suspenseConfig);e:{var g=e,y=m;switch(o=t,h=n,y.tag){case 1:if("function"==typeof(g=y.payload)){u=g.call(h,u,o);break e}u=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(o="function"==typeof(g=y.payload)?g.call(h,u,o):g))break e;u=l({},u,o);break e;case 2:sr=!0}}null!==m.callback&&(e.effectTag|=32,null===(o=r.effects)?r.effects=[m]:o.push(m))}if(null===(m=m.next)||m===s){if(null===(o=r.shared.pending))break;m=i.next=o.next,o.next=s,r.baseQueue=i=o,r.shared.pending=null}}null===f?d=u:f.next=p,r.baseState=d,r.baseQueue=f,Es(c),e.expirationTime=c,e.memoizedState=u}}function hr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],l=a.callback;if(null!==l){if(a.callback=null,a=l,l=n,"function"!=typeof a)throw Error(i(191,a));a.call(l)}}}var gr=Q.ReactCurrentBatchConfig,yr=(new a.Component).refs;function br(e,t,n,a){n=null==(n=n(a,t=e.memoizedState))?t:l({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var vr={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var a=os(),l=gr.suspense;(l=dr(a=ss(a,e,l),l)).payload=t,null!=n&&(l.callback=n),pr(e,l),us(e,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var a=os(),l=gr.suspense;(l=dr(a=ss(a,e,l),l)).tag=1,l.payload=t,null!=n&&(l.callback=n),pr(e,l),us(e,a)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=os(),a=gr.suspense;(a=dr(n=ss(n,e,a),a)).tag=2,null!=t&&(a.callback=t),pr(e,a),us(e,n)}};function wr(e,t,n,a,l,r,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,i):!(t.prototype&&t.prototype.isPureReactComponent&&Ga(n,a)&&Ga(l,r))}function Er(e,t,n){var a=!1,l=ml,r=t.contextType;return"object"==typeof r&&null!==r?r=or(r):(l=vl(t)?yl:hl.current,r=(a=null!=(a=t.contextTypes))?bl(e,l):ml),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vr,e.stateNode=t,t._reactInternalFiber=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=r),t}function kr(e,t,n,a){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&vr.enqueueReplaceState(t,t.state,null)}function Ir(e,t,n,a){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=yr,ur(e);var r=t.contextType;"object"==typeof r&&null!==r?l.context=or(r):(r=vl(t)?yl:hl.current,l.context=bl(e,r)),mr(e,n,l,a),l.state=e.memoizedState,"function"==typeof(r=t.getDerivedStateFromProps)&&(br(e,t,r,n),l.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof l.getSnapshotBeforeUpdate||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||(t=l.state,"function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),t!==l.state&&vr.enqueueReplaceState(l,l.state,null),mr(e,n,l,a),l.state=e.memoizedState),"function"==typeof l.componentDidMount&&(e.effectTag|=4)}var Ar=Array.isArray;function xr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var a=n.stateNode}if(!a)throw Error(i(147,e));var l=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===l?t.ref:(t=function(e){var t=a.refs;t===yr&&(t=a.refs={}),null===e?delete t[l]:t[l]=e},t._stringRef=l,t)}if("string"!=typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Sr(e,t){if("textarea"!==e.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Tr(e){function t(t,n){if(e){var a=t.lastEffect;null!==a?(a.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function l(e,t){return(e=Bs(e,t)).index=0,e.sibling=null,e}function r(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.effectTag=2,n):a:(t.effectTag=2,n):n}function o(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,a){return null===t||6!==t.tag?((t=Hs(n,e.mode,a)).return=e,t):((t=l(t,n)).return=e,t)}function u(e,t,n,a){return null!==t&&t.elementType===n.type?((a=l(t,n.props)).ref=xr(e,t,n),a.return=e,a):((a=zs(n.type,n.key,n.props,null,e.mode,a)).ref=xr(e,t,n),a.return=e,a)}function c(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Us(n,e.mode,a)).return=e,t):((t=l(t,n.children||[])).return=e,t)}function d(e,t,n,a,r){return null===t||7!==t.tag?((t=Gs(n,e.mode,a,r)).return=e,t):((t=l(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Hs(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=zs(t.type,t.key,t.props,null,e.mode,n)).ref=xr(e,null,t),n.return=e,n;case te:return(t=Us(t,e.mode,n)).return=e,t}if(Ar(t)||he(t))return(t=Gs(t,e.mode,n,null)).return=e,t;Sr(e,t)}return null}function f(e,t,n,a){var l=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==l?null:s(e,t,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===l?n.type===ne?d(e,t,n.props.children,a,l):u(e,t,n,a):null;case te:return n.key===l?c(e,t,n,a):null}if(Ar(n)||he(n))return null!==l?null:d(e,t,n,a,null);Sr(e,n)}return null}function m(e,t,n,a,l){if("string"==typeof a||"number"==typeof a)return s(t,e=e.get(n)||null,""+a,l);if("object"==typeof a&&null!==a){switch(a.$$typeof){case ee:return e=e.get(null===a.key?n:a.key)||null,a.type===ne?d(t,e,a.props.children,l,a.key):u(t,e,a,l);case te:return c(t,e=e.get(null===a.key?n:a.key)||null,a,l)}if(Ar(a)||he(a))return d(t,e=e.get(n)||null,a,l,null);Sr(t,a)}return null}function h(l,i,o,s){for(var u=null,c=null,d=i,h=i=0,g=null;null!==d&&h<o.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var y=f(l,d,o[h],s);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(l,d),i=r(y,i,h),null===c?u=y:c.sibling=y,c=y,d=g}if(h===o.length)return n(l,d),u;if(null===d){for(;h<o.length;h++)null!==(d=p(l,o[h],s))&&(i=r(d,i,h),null===c?u=d:c.sibling=d,c=d);return u}for(d=a(l,d);h<o.length;h++)null!==(g=m(d,l,h,o[h],s))&&(e&&null!==g.alternate&&d.delete(null===g.key?h:g.key),i=r(g,i,h),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(l,e)})),u}function g(l,o,s,u){var c=he(s);if("function"!=typeof c)throw Error(i(150));if(null==(s=c.call(s)))throw Error(i(151));for(var d=c=null,h=o,g=o=0,y=null,b=s.next();null!==h&&!b.done;g++,b=s.next()){h.index>g?(y=h,h=null):y=h.sibling;var v=f(l,h,b.value,u);if(null===v){null===h&&(h=y);break}e&&h&&null===v.alternate&&t(l,h),o=r(v,o,g),null===d?c=v:d.sibling=v,d=v,h=y}if(b.done)return n(l,h),c;if(null===h){for(;!b.done;g++,b=s.next())null!==(b=p(l,b.value,u))&&(o=r(b,o,g),null===d?c=b:d.sibling=b,d=b);return c}for(h=a(l,h);!b.done;g++,b=s.next())null!==(b=m(h,l,g,b.value,u))&&(e&&null!==b.alternate&&h.delete(null===b.key?g:b.key),o=r(b,o,g),null===d?c=b:d.sibling=b,d=b);return e&&h.forEach((function(e){return t(l,e)})),c}return function(e,a,r,s){var u="object"==typeof r&&null!==r&&r.type===ne&&null===r.key;u&&(r=r.props.children);var c="object"==typeof r&&null!==r;if(c)switch(r.$$typeof){case ee:e:{for(c=r.key,u=a;null!==u;){if(u.key===c){if(7===u.tag){if(r.type===ne){n(e,u.sibling),(a=l(u,r.props.children)).return=e,e=a;break e}}else if(u.elementType===r.type){n(e,u.sibling),(a=l(u,r.props)).ref=xr(e,u,r),a.return=e,e=a;break e}n(e,u);break}t(e,u),u=u.sibling}r.type===ne?((a=Gs(r.props.children,e.mode,s,r.key)).return=e,e=a):((s=zs(r.type,r.key,r.props,null,e.mode,s)).ref=xr(e,a,r),s.return=e,e=s)}return o(e);case te:e:{for(u=r.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===r.containerInfo&&a.stateNode.implementation===r.implementation){n(e,a.sibling),(a=l(a,r.children||[])).return=e,e=a;break e}n(e,a);break}t(e,a),a=a.sibling}(a=Us(r,e.mode,s)).return=e,e=a}return o(e)}if("string"==typeof r||"number"==typeof r)return r=""+r,null!==a&&6===a.tag?(n(e,a.sibling),(a=l(a,r)).return=e,e=a):(n(e,a),(a=Hs(r,e.mode,s)).return=e,e=a),o(e);if(Ar(r))return h(e,a,r,s);if(he(r))return g(e,a,r,s);if(c&&Sr(e,r),void 0===r&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(i(152,e.displayName||e.name||"Component"))}return n(e,a)}}var Pr=Tr(!0),Cr=Tr(!1),jr={},_r={current:jr},Or={current:jr},Nr={current:jr};function Mr(e){if(e===jr)throw Error(i(174));return e}function Dr(e,t){switch(fl(Nr,t),fl(Or,e),fl(_r,jr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:De(null,"");break;default:t=De(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pl(_r),fl(_r,t)}function Fr(){pl(_r),pl(Or),pl(Nr)}function Rr(e){Mr(Nr.current);var t=Mr(_r.current),n=De(t,e.type);t!==n&&(fl(Or,e),fl(_r,n))}function qr(e){Or.current===e&&(pl(_r),pl(Or))}var Wr={current:0};function Lr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===yn||n.data===bn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Br(e,t){return{responder:e,props:t}}var zr=Q.ReactCurrentDispatcher,Gr=Q.ReactCurrentBatchConfig,Hr=0,Ur=null,Yr=null,Vr=null,$r=!1;function Kr(){throw Error(i(321))}function Qr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ba(e[n],t[n]))return!1;return!0}function Jr(e,t,n,a,l,r){if(Hr=r,Ur=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,zr.current=null===e||null===e.memoizedState?wi:Ei,e=n(a,l),t.expirationTime===Hr){r=0;do{if(t.expirationTime=0,!(25>r))throw Error(i(301));r+=1,Vr=Yr=null,t.updateQueue=null,zr.current=ki,e=n(a,l)}while(t.expirationTime===Hr)}if(zr.current=vi,t=null!==Yr&&null!==Yr.next,Hr=0,Vr=Yr=Ur=null,$r=!1,t)throw Error(i(300));return e}function Xr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Vr?Ur.memoizedState=Vr=e:Vr=Vr.next=e,Vr}function Zr(){if(null===Yr){var e=Ur.alternate;e=null!==e?e.memoizedState:null}else e=Yr.next;var t=null===Vr?Ur.memoizedState:Vr.next;if(null!==t)Vr=t,Yr=e;else{if(null===e)throw Error(i(310));e={memoizedState:(Yr=e).memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},null===Vr?Ur.memoizedState=Vr=e:Vr=Vr.next=e}return Vr}function ei(e,t){return"function"==typeof t?t(e):t}function ti(e){var t=Zr(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var a=Yr,l=a.baseQueue,r=n.pending;if(null!==r){if(null!==l){var o=l.next;l.next=r.next,r.next=o}a.baseQueue=l=r,n.pending=null}if(null!==l){l=l.next,a=a.baseState;var s=o=r=null,u=l;do{var c=u.expirationTime;if(c<Hr){var d={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(o=s=d,r=a):s=s.next=d,c>Ur.expirationTime&&(Ur.expirationTime=c,Es(c))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),ws(c,u.suspenseConfig),a=u.eagerReducer===e?u.eagerState:e(a,u.action);u=u.next}while(null!==u&&u!==l);null===s?r=a:s.next=o,Ba(a,t.memoizedState)||(Ni=!0),t.memoizedState=a,t.baseState=r,t.baseQueue=s,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function ni(e){var t=Zr(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var a=n.dispatch,l=n.pending,r=t.memoizedState;if(null!==l){n.pending=null;var o=l=l.next;do{r=e(r,o.action),o=o.next}while(o!==l);Ba(r,t.memoizedState)||(Ni=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,a]}function ai(e){var t=Xr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ei,lastRenderedState:e}).dispatch=bi.bind(null,Ur,e),[t.memoizedState,e]}function li(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=Ur.updateQueue)?(t={lastEffect:null},Ur.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function ri(){return Zr().memoizedState}function ii(e,t,n,a){var l=Xr();Ur.effectTag|=e,l.memoizedState=li(1|t,n,void 0,void 0===a?null:a)}function oi(e,t,n,a){var l=Zr();a=void 0===a?null:a;var r=void 0;if(null!==Yr){var i=Yr.memoizedState;if(r=i.destroy,null!==a&&Qr(a,i.deps))return void li(t,n,r,a)}Ur.effectTag|=e,l.memoizedState=li(1|t,n,r,a)}function si(e,t){return ii(516,4,e,t)}function ui(e,t){return oi(516,4,e,t)}function ci(e,t){return oi(4,2,e,t)}function di(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function pi(e,t,n){return n=null!=n?n.concat([e]):null,oi(4,2,di.bind(null,t,e),n)}function fi(){}function mi(e,t){return Xr().memoizedState=[e,void 0===t?null:t],e}function hi(e,t){var n=Zr();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&Qr(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function gi(e,t){var n=Zr();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&Qr(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function yi(e,t,n){var a=Hl();Yl(98>a?98:a,(function(){e(!0)})),Yl(97<a?97:a,(function(){var a=Gr.suspense;Gr.suspense=void 0===t?null:t;try{e(!1),n()}finally{Gr.suspense=a}}))}function bi(e,t,n){var a=os(),l=gr.suspense;l={expirationTime:a=ss(a,e,l),suspenseConfig:l,action:n,eagerReducer:null,eagerState:null,next:null};var r=t.pending;if(null===r?l.next=l:(l.next=r.next,r.next=l),t.pending=l,r=e.alternate,e===Ur||null!==r&&r===Ur)$r=!0,l.expirationTime=Hr,Ur.expirationTime=Hr;else{if(0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=r(i,n);if(l.eagerReducer=r,l.eagerState=o,Ba(o,i))return}catch(e){}us(e,a)}}var vi={readContext:or,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useResponder:Kr,useDeferredValue:Kr,useTransition:Kr},wi={readContext:or,useCallback:mi,useContext:or,useEffect:si,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ii(4,2,di.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ii(4,2,e,t)},useMemo:function(e,t){var n=Xr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Xr();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e=(e=a.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=bi.bind(null,Ur,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},Xr().memoizedState=e},useState:ai,useDebugValue:fi,useResponder:Br,useDeferredValue:function(e,t){var n=ai(e),a=n[0],l=n[1];return si((function(){var n=Gr.suspense;Gr.suspense=void 0===t?null:t;try{l(e)}finally{Gr.suspense=n}}),[e,t]),a},useTransition:function(e){var t=ai(!1),n=t[0];return t=t[1],[mi(yi.bind(null,t,e),[t,e]),n]}},Ei={readContext:or,useCallback:hi,useContext:or,useEffect:ui,useImperativeHandle:pi,useLayoutEffect:ci,useMemo:gi,useReducer:ti,useRef:ri,useState:function(){return ti(ei)},useDebugValue:fi,useResponder:Br,useDeferredValue:function(e,t){var n=ti(ei),a=n[0],l=n[1];return ui((function(){var n=Gr.suspense;Gr.suspense=void 0===t?null:t;try{l(e)}finally{Gr.suspense=n}}),[e,t]),a},useTransition:function(e){var t=ti(ei),n=t[0];return t=t[1],[hi(yi.bind(null,t,e),[t,e]),n]}},ki={readContext:or,useCallback:hi,useContext:or,useEffect:ui,useImperativeHandle:pi,useLayoutEffect:ci,useMemo:gi,useReducer:ni,useRef:ri,useState:function(){return ni(ei)},useDebugValue:fi,useResponder:Br,useDeferredValue:function(e,t){var n=ni(ei),a=n[0],l=n[1];return ui((function(){var n=Gr.suspense;Gr.suspense=void 0===t?null:t;try{l(e)}finally{Gr.suspense=n}}),[e,t]),a},useTransition:function(e){var t=ni(ei),n=t[0];return t=t[1],[hi(yi.bind(null,t,e),[t,e]),n]}},Ii=null,Ai=null,xi=!1;function Si(e,t){var n=Ws(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ti(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Pi(e){if(xi){var t=Ai;if(t){var n=t;if(!Ti(e,t)){if(!(t=xn(n.nextSibling))||!Ti(e,t))return e.effectTag=-1025&e.effectTag|2,xi=!1,void(Ii=e);Si(Ii,n)}Ii=e,Ai=xn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,xi=!1,Ii=e}}function Ci(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ii=e}function ji(e){if(e!==Ii)return!1;if(!xi)return Ci(e),xi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!kn(t,e.memoizedProps))for(t=Ai;t;)Si(e,t),t=xn(t.nextSibling);if(Ci(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===gn){if(0===t){Ai=xn(e.nextSibling);break e}t--}else n!==hn&&n!==bn&&n!==yn||t++}e=e.nextSibling}Ai=null}}else Ai=Ii?xn(e.stateNode.nextSibling):null;return!0}function _i(){Ai=Ii=null,xi=!1}var Oi=Q.ReactCurrentOwner,Ni=!1;function Mi(e,t,n,a){t.child=null===e?Cr(t,null,n,a):Pr(t,e.child,n,a)}function Di(e,t,n,a,l){n=n.render;var r=t.ref;return ir(t,l),a=Jr(e,t,n,a,r,l),null===e||Ni?(t.effectTag|=1,Mi(e,t,a,l),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=l&&(e.expirationTime=0),Xi(e,t,l))}function Fi(e,t,n,a,l,r){if(null===e){var i=n.type;return"function"!=typeof i||Ls(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zs(n.type,null,a,null,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ri(e,t,i,a,l,r))}return i=e.child,l<r&&(l=i.memoizedProps,(n=null!==(n=n.compare)?n:Ga)(l,a)&&e.ref===t.ref)?Xi(e,t,r):(t.effectTag|=1,(e=Bs(i,a)).ref=t.ref,e.return=t,t.child=e)}function Ri(e,t,n,a,l,r){return null!==e&&Ga(e.memoizedProps,a)&&e.ref===t.ref&&(Ni=!1,l<r)?(t.expirationTime=e.expirationTime,Xi(e,t,r)):Wi(e,t,n,a,r)}function qi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Wi(e,t,n,a,l){var r=vl(n)?yl:hl.current;return r=bl(t,r),ir(t,l),n=Jr(e,t,n,a,r,l),null===e||Ni?(t.effectTag|=1,Mi(e,t,n,l),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=l&&(e.expirationTime=0),Xi(e,t,l))}function Li(e,t,n,a,l){if(vl(n)){var r=!0;Il(t)}else r=!1;if(ir(t,l),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Er(t,n,a),Ir(t,n,a,l),a=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var s=i.context,u=n.contextType;u="object"==typeof u&&null!==u?or(u):bl(t,u=vl(n)?yl:hl.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==a||s!==u)&&kr(t,i,a,u),sr=!1;var p=t.memoizedState;i.state=p,mr(t,a,i,l),s=t.memoizedState,o!==a||p!==s||gl.current||sr?("function"==typeof c&&(br(t,n,c,a),s=t.memoizedState),(o=sr||wr(t,n,o,a,p,s,u))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.effectTag|=4)):("function"==typeof i.componentDidMount&&(t.effectTag|=4),t.memoizedProps=a,t.memoizedState=s),i.props=a,i.state=s,i.context=u,a=o):("function"==typeof i.componentDidMount&&(t.effectTag|=4),a=!1)}else i=t.stateNode,cr(e,t),o=t.memoizedProps,i.props=t.type===t.elementType?o:Xl(t.type,o),s=i.context,u="object"==typeof(u=n.contextType)&&null!==u?or(u):bl(t,u=vl(n)?yl:hl.current),(d="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==a||s!==u)&&kr(t,i,a,u),sr=!1,s=t.memoizedState,i.state=s,mr(t,a,i,l),p=t.memoizedState,o!==a||s!==p||gl.current||sr?("function"==typeof c&&(br(t,n,c,a),p=t.memoizedState),(c=sr||wr(t,n,o,a,s,p,u))?(d||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(a,p,u),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,p,u)),"function"==typeof i.componentDidUpdate&&(t.effectTag|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=a,t.memoizedState=p),i.props=a,i.state=p,i.context=u,a=c):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),a=!1);return Bi(e,t,n,a,r,l)}function Bi(e,t,n,a,l,r){qi(e,t);var i=0!=(64&t.effectTag);if(!a&&!i)return l&&Al(t,n,!1),Xi(e,t,r);a=t.stateNode,Oi.current=t;var o=i&&"function"!=typeof n.getDerivedStateFromError?null:a.render();return t.effectTag|=1,null!==e&&i?(t.child=Pr(t,e.child,null,r),t.child=Pr(t,null,o,r)):Mi(e,t,o,r),t.memoizedState=a.state,l&&Al(t,n,!0),t.child}function zi(e){var t=e.stateNode;t.pendingContext?El(0,t.pendingContext,t.pendingContext!==t.context):t.context&&El(0,t.context,!1),Dr(e,t.containerInfo)}var Gi,Hi,Ui,Yi,Vi={dehydrated:null,retryTime:0};function $i(e,t,n){var a,l=t.mode,r=t.pendingProps,i=Wr.current,o=!1;if((a=0!=(64&t.effectTag))||(a=0!=(2&i)&&(null===e||null!==e.memoizedState)),a?(o=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(i|=1),fl(Wr,1&i),null===e){if(void 0!==r.fallback&&Pi(t),o){if(o=r.fallback,(r=Gs(null,l,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,r.child=e;null!==e;)e.return=r,e=e.sibling;return(n=Gs(o,l,n,null)).return=t,r.sibling=n,t.memoizedState=Vi,t.child=r,n}return l=r.children,t.memoizedState=null,t.child=Cr(t,null,l,n)}if(null!==e.memoizedState){if(l=(e=e.child).sibling,o){if(r=r.fallback,(n=Bs(e,e.pendingProps)).return=t,0==(2&t.mode)&&(o=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=o;null!==o;)o.return=n,o=o.sibling;return(l=Bs(l,r)).return=t,n.sibling=l,n.childExpirationTime=0,t.memoizedState=Vi,t.child=n,l}return n=Pr(t,e.child,r.children,n),t.memoizedState=null,t.child=n}if(e=e.child,o){if(o=r.fallback,(r=Gs(null,l,0,null)).return=t,r.child=e,null!==e&&(e.return=r),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,r.child=e;null!==e;)e.return=r,e=e.sibling;return(n=Gs(o,l,n,null)).return=t,r.sibling=n,n.effectTag|=2,r.childExpirationTime=0,t.memoizedState=Vi,t.child=r,n}return t.memoizedState=null,t.child=Pr(t,e,r.children,n)}function Ki(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),rr(e.return,t)}function Qi(e,t,n,a,l,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailExpiration:0,tailMode:l,lastEffect:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailExpiration=0,i.tailMode=l,i.lastEffect=r)}function Ji(e,t,n){var a=t.pendingProps,l=a.revealOrder,r=a.tail;if(Mi(e,t,a.children,n),0!=(2&(a=Wr.current)))a=1&a|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ki(e,n);else if(19===e.tag)Ki(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(fl(Wr,a),0==(2&t.mode))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;null!==n;)null!==(e=n.alternate)&&null===Lr(e)&&(l=n),n=n.sibling;null===(n=l)?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Qi(t,!1,l,n,r,t.lastEffect);break;case"backwards":for(n=null,l=t.child,t.child=null;null!==l;){if(null!==(e=l.alternate)&&null===Lr(e)){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Qi(t,!0,n,null,r,t.lastEffect);break;case"together":Qi(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Xi(e,t,n){null!==e&&(t.dependencies=e.dependencies);var a=t.expirationTime;if(0!==a&&Es(a),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Bs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zi(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function eo(e,t,n){var a=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return vl(t.type)&&wl(),null;case 3:return Fr(),pl(gl),pl(hl),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!ji(t)||(t.effectTag|=4),Hi(t),null;case 5:qr(t),n=Mr(Nr.current);var r=t.type;if(null!==e&&null!=t.stateNode)Ui(e,t,r,a,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!a){if(null===t.stateNode)throw Error(i(166));return null}if(e=Mr(_r.current),ji(t)){a=t.stateNode,r=t.type;var o=t.memoizedProps;switch(a[Pn]=t,a[Cn]=o,r){case"iframe":case"object":case"embed":Yt("load",a);break;case"video":case"audio":for(e=0;e<Ke.length;e++)Yt(Ke[e],a);break;case"source":Yt("error",a);break;case"img":case"image":case"link":Yt("error",a),Yt("load",a);break;case"form":Yt("reset",a),Yt("submit",a);break;case"details":Yt("toggle",a);break;case"input":Ie(a,o),Yt("invalid",a),on(n,"onChange");break;case"select":a._wrapperState={wasMultiple:!!o.multiple},Yt("invalid",a),on(n,"onChange");break;case"textarea":_e(a,o),Yt("invalid",a),on(n,"onChange")}for(var s in an(r,o),e=null,o)if(o.hasOwnProperty(s)){var u=o[s];"children"===s?"string"==typeof u?a.textContent!==u&&(e=["children",u]):"number"==typeof u&&a.textContent!==""+u&&(e=["children",""+u]):A.hasOwnProperty(s)&&null!=u&&on(n,s)}switch(r){case"input":we(a),Se(a,o,!0);break;case"textarea":we(a),Ne(a);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(a.onclick=sn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(s=9===n.nodeType?n:n.ownerDocument,e===rn&&(e=Me(r)),e===rn?"script"===r?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof a.is?e=s.createElement(r,{is:a.is}):(e=s.createElement(r),"select"===r&&(s=e,a.multiple?s.multiple=!0:a.size&&(s.size=a.size))):e=s.createElementNS(e,r),e[Pn]=t,e[Cn]=a,Gi(e,t,!1,!1),t.stateNode=e,s=ln(r,a),r){case"iframe":case"object":case"embed":Yt("load",e),u=a;break;case"video":case"audio":for(u=0;u<Ke.length;u++)Yt(Ke[u],e);u=a;break;case"source":Yt("error",e),u=a;break;case"img":case"image":case"link":Yt("error",e),Yt("load",e),u=a;break;case"form":Yt("reset",e),Yt("submit",e),u=a;break;case"details":Yt("toggle",e),u=a;break;case"input":Ie(e,a),u=ke(e,a),Yt("invalid",e),on(n,"onChange");break;case"option":u=Pe(e,a);break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=l({},a,{value:void 0}),Yt("invalid",e),on(n,"onChange");break;case"textarea":_e(e,a),u=je(e,a),Yt("invalid",e),on(n,"onChange");break;default:u=a}an(r,u);var c=u;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?tn(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&qe(e,d):"children"===o?"string"==typeof d?("textarea"!==r||""!==d)&&We(e,d):"number"==typeof d&&We(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(A.hasOwnProperty(o)?null!=d&&on(n,o):null!=d&&J(e,o,d,s))}switch(r){case"input":we(e),Se(e,a,!1);break;case"textarea":we(e),Ne(e);break;case"option":null!=a.value&&e.setAttribute("value",""+be(a.value));break;case"select":e.multiple=!!a.multiple,null!=(n=a.value)?Ce(e,!!a.multiple,n,!1):null!=a.defaultValue&&Ce(e,!!a.multiple,a.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=sn)}En(r,a)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Yi(e,t,e.memoizedProps,a);else{if("string"!=typeof a&&null===t.stateNode)throw Error(i(166));n=Mr(Nr.current),Mr(_r.current),ji(t)?(n=t.stateNode,a=t.memoizedProps,n[Pn]=t,n.nodeValue!==a&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[Pn]=t,t.stateNode=n)}return null;case 13:return pl(Wr),a=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==a,a=!1,null===e?void 0!==t.memoizedProps.fallback&&ji(t):(a=null!==(r=e.memoizedState),n||null===r||null!==(r=e.child.sibling)&&(null!==(o=t.firstEffect)?(t.firstEffect=r,r.nextEffect=o):(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8)),n&&!a&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Wr.current)?Bo===_o&&(Bo=Mo):(Bo!==_o&&Bo!==Mo||(Bo=Do),0!==Yo&&null!==qo&&($s(qo,Lo),Ks(qo,Yo)))),(n||a)&&(t.effectTag|=4),null);case 4:return Fr(),Hi(t),null;case 10:return lr(t),null;case 19:if(pl(Wr),null===(a=t.memoizedState))return null;if(r=0!=(64&t.effectTag),null===(o=a.rendering)){if(r)Zi(a,!1);else if(Bo!==_o||null!==e&&0!=(64&e.effectTag))for(o=t.child;null!==o;){if(null!==(e=Lr(o))){for(t.effectTag|=64,Zi(a,!1),null!==(r=e.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),null===a.lastEffect&&(t.firstEffect=null),t.lastEffect=a.lastEffect,a=t.child;null!==a;)o=n,(r=a).effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,null===(e=r.alternate)?(r.childExpirationTime=0,r.expirationTime=o,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,o=e.dependencies,r.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),a=a.sibling;return fl(Wr,1&Wr.current|2),t.child}o=o.sibling}}else{if(!r)if(null!==(e=Lr(o))){if(t.effectTag|=64,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Zi(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate)return null!==(t=t.lastEffect=a.lastEffect)&&(t.nextEffect=null),null}else 2*Gl()-a.renderingStartTime>a.tailExpiration&&1<n&&(t.effectTag|=64,r=!0,Zi(a,!1),t.expirationTime=t.childExpirationTime=n-1);a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=a.last)?n.sibling=o:t.child=o,a.last=o)}return null!==a.tail?(0===a.tailExpiration&&(a.tailExpiration=Gl()+500),n=a.tail,a.rendering=n,a.tail=n.sibling,a.lastEffect=t.lastEffect,a.renderingStartTime=Gl(),n.sibling=null,t=Wr.current,fl(Wr,r?1&t|2:1&t),n):null}throw Error(i(156,t.tag))}function to(e){switch(e.tag){case 1:vl(e.type)&&wl();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Fr(),pl(gl),pl(hl),0!=(64&(t=e.effectTag)))throw Error(i(285));return e.effectTag=-4097&t|64,e;case 5:return qr(e),null;case 13:return pl(Wr),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pl(Wr),null;case 4:return Fr(),null;case 10:return lr(e),null;default:return null}}function no(e,t){return{value:e,source:t,stack:ye(t)}}Gi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Hi=function(){},Ui=function(e,t,n,a,r){var i=e.memoizedProps;if(i!==a){var o,s,u=t.stateNode;switch(Mr(_r.current),e=null,n){case"input":i=ke(u,i),a=ke(u,a),e=[];break;case"option":i=Pe(u,i),a=Pe(u,a),e=[];break;case"select":i=l({},i,{value:void 0}),a=l({},a,{value:void 0}),e=[];break;case"textarea":i=je(u,i),a=je(u,a),e=[];break;default:"function"!=typeof i.onClick&&"function"==typeof a.onClick&&(u.onclick=sn)}for(o in an(n,a),n=null,i)if(!a.hasOwnProperty(o)&&i.hasOwnProperty(o)&&null!=i[o])if("style"===o)for(s in u=i[o])u.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==o&&"children"!==o&&"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(A.hasOwnProperty(o)?e||(e=[]):(e=e||[]).push(o,null));for(o in a){var c=a[o];if(u=null!=i?i[o]:void 0,a.hasOwnProperty(o)&&c!==u&&(null!=c||null!=u))if("style"===o)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(e||(e=[]),e.push(o,n)),n=c;else"dangerouslySetInnerHTML"===o?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(o,c)):"children"===o?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(o,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&(A.hasOwnProperty(o)?(null!=c&&on(r,o),e||u===c||(e=[])):(e=e||[]).push(o,c))}n&&(e=e||[]).push("style",n),r=e,(t.updateQueue=r)&&(t.effectTag|=4)}},Yi=function(e,t,n,a){n!==a&&(t.effectTag|=4)};var ao="function"==typeof WeakSet?WeakSet:Set;function lo(e,t){var n=t.source,a=t.stack;null===a&&null!==n&&(a=ye(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ro(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ns(e,t)}else t.current=null}function io(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,a=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xl(t.type,n),a),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(i(163))}function oo(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.destroy;n.destroy=void 0,void 0!==a&&a()}n=n.next}while(n!==t)}}function so(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function uo(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void so(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var a=n.elementType===n.type?t.memoizedProps:Xl(n.type,t.memoizedProps);e.componentDidUpdate(a,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&hr(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}hr(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&En(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Dt(n)))))}throw Error(i(163))}function co(e,t,n){switch("function"==typeof Rs&&Rs(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var a=e.next;Yl(97<n?97:n,(function(){var e=a;do{var n=e.destroy;if(void 0!==n){var l=t;try{n()}catch(e){Ns(l,e)}}e=e.next}while(e!==a)}))}break;case 1:ro(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Ns(e,t)}}(t,n);break;case 5:ro(t);break;case 4:yo(e,t,n)}}function po(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&po(t)}function fo(e){return 5===e.tag||3===e.tag||4===e.tag}function mo(e){e:{for(var t=e.return;null!==t;){if(fo(t)){var n=t;break e}t=t.return}throw Error(i(160))}switch(t=n.stateNode,n.tag){case 5:var a=!1;break;case 3:case 4:t=t.containerInfo,a=!0;break;default:throw Error(i(161))}16&n.effectTag&&(We(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||fo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}a?ho(e,n,t):go(e,n,t)}function ho(e,t,n){var a=e.tag,l=5===a||6===a;if(l)e=l?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=sn));else if(4!==a&&null!==(e=e.child))for(ho(e,t,n),e=e.sibling;null!==e;)ho(e,t,n),e=e.sibling}function go(e,t,n){var a=e.tag,l=5===a||6===a;if(l)e=l?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(go(e,t,n),e=e.sibling;null!==e;)go(e,t,n),e=e.sibling}function yo(e,t,n){for(var a,l,r=t,o=!1;;){if(!o){o=r.return;e:for(;;){if(null===o)throw Error(i(160));switch(a=o.stateNode,o.tag){case 5:l=!1;break e;case 3:case 4:a=a.containerInfo,l=!0;break e}o=o.return}o=!0}if(5===r.tag||6===r.tag){e:for(var s=e,u=r,c=n,d=u;;)if(co(s,d,c),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===u)break e;for(;null===d.sibling;){if(null===d.return||d.return===u)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}l?(s=a,u=r.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):a.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){a=r.stateNode.containerInfo,l=!0,r.child.return=r,r=r.child;continue}}else if(co(e,r,n),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function bo(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void oo(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var a=t.memoizedProps,l=null!==e?e.memoizedProps:a;e=t.type;var r=t.updateQueue;if(t.updateQueue=null,null!==r){for(n[Cn]=a,"input"===e&&"radio"===a.type&&null!=a.name&&Ae(n,a),ln(e,l),t=ln(e,a),l=0;l<r.length;l+=2){var o=r[l],s=r[l+1];"style"===o?tn(n,s):"dangerouslySetInnerHTML"===o?qe(n,s):"children"===o?We(n,s):J(n,o,s,t)}switch(e){case"input":xe(n,a);break;case"textarea":Oe(n,a);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!a.multiple,null!=(e=a.value)?Ce(n,!!a.multiple,e,!1):t!==!!a.multiple&&(null!=a.defaultValue?Ce(n,!!a.multiple,a.defaultValue,!0):Ce(n,!!a.multiple,a.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Dt(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?a=!1:(a=!0,n=t.child,$o=Gl()),null!==n)e:for(e=n;;){if(5===e.tag)r=e.stateNode,a?"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none":(r=e.stateNode,l=null!=(l=e.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,r.style.display=en("display",l));else if(6===e.tag)e.stateNode.nodeValue=a?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(r=e.child.sibling).return=e,e=r;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void vo(t);case 19:return void vo(t)}throw Error(i(163))}function vo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ao),t.forEach((function(t){var a=Ds.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))}))}}var wo="function"==typeof WeakMap?WeakMap:Map;function Eo(e,t,n){(n=dr(n,null)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Jo||(Jo=!0,Xo=a),lo(e,t)},n}function ko(e,t,n){(n=dr(n,null)).tag=3;var a=e.type.getDerivedStateFromError;if("function"==typeof a){var l=t.value;n.payload=function(){return lo(e,t),a(l)}}var r=e.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(n.callback=function(){"function"!=typeof a&&(null===Zo?Zo=new Set([this]):Zo.add(this),lo(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Io,Ao=Math.ceil,xo=Q.ReactCurrentDispatcher,So=Q.ReactCurrentOwner,To=0,Po=8,Co=16,jo=32,_o=0,Oo=1,No=2,Mo=3,Do=4,Fo=5,Ro=To,qo=null,Wo=null,Lo=0,Bo=_o,zo=null,Go=1073741823,Ho=1073741823,Uo=null,Yo=0,Vo=!1,$o=0,Ko=500,Qo=null,Jo=!1,Xo=null,Zo=null,es=!1,ts=null,ns=90,as=null,ls=0,rs=null,is=0;function os(){return(Ro&(Co|jo))!==To?1073741821-(Gl()/10|0):0!==is?is:is=1073741821-(Gl()/10|0)}function ss(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var a=Hl();if(0==(4&t))return 99===a?1073741823:1073741822;if((Ro&Co)!==To)return Lo;if(null!==n)e=Jl(e,0|n.timeoutMs||5e3,250);else switch(a){case 99:e=1073741823;break;case 98:e=Jl(e,150,100);break;case 97:case 96:e=Jl(e,5e3,250);break;case 95:e=2;break;default:throw Error(i(326))}return null!==qo&&e===Lo&&--e,e}function us(e,t){if(50<ls)throw ls=0,rs=null,Error(i(185));if(null!==(e=cs(e,t))){var n=Hl();1073741823===t?(Ro&Po)!==To&&(Ro&(Co|jo))===To?ms(e):(ps(e),Ro===To&&Kl()):ps(e),(4&Ro)===To||98!==n&&99!==n||(null===as?as=new Map([[e,t]]):(void 0===(n=as.get(e))||n>t)&&as.set(e,t))}}function cs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var a=e.return,l=null;if(null===a&&3===e.tag)l=e.stateNode;else for(;null!==a;){if(n=a.alternate,a.childExpirationTime<t&&(a.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===a.return&&3===a.tag){l=a.stateNode;break}a=a.return}return null!==l&&(qo===l&&(Es(t),Bo===Do&&$s(l,Lo)),Ks(l,t)),l}function ds(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Vs(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function ps(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=$l(ms.bind(null,e));else{var t=ds(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var a=os();if(a=1073741823===t?99:1===t||2===t?95:0>=(a=10*(1073741821-t)-10*(1073741821-a))?99:250>=a?98:5250>=a?97:95,null!==n){var l=e.callbackPriority;if(e.callbackExpirationTime===t&&l>=a)return;n!==Fl&&Tl(n)}e.callbackExpirationTime=t,e.callbackPriority=a,t=1073741823===t?$l(ms.bind(null,e)):Vl(a,fs.bind(null,e),{timeout:10*(1073741821-t)-Gl()}),e.callbackNode=t}}}function fs(e,t){if(is=0,t)return Qs(e,t=os()),ps(e),null;var n=ds(e);if(0!==n){if(t=e.callbackNode,(Ro&(Co|jo))!==To)throw Error(i(327));if(js(),e===qo&&n===Lo||ys(e,n),null!==Wo){var a=Ro;Ro|=Co;for(var l=vs();;)try{Is();break}catch(t){bs(e,t)}if(ar(),Ro=a,xo.current=l,Bo===Oo)throw t=zo,ys(e,n),$s(e,n),ps(e),t;if(null===Wo)switch(l=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,a=Bo,qo=null,a){case _o:case Oo:throw Error(i(345));case No:Qs(e,2<n?2:n);break;case Mo:if($s(e,n),n===(a=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ss(l)),1073741823===Go&&10<(l=$o+Ko-Gl())){if(Vo){var r=e.lastPingedTime;if(0===r||r>=n){e.lastPingedTime=n,ys(e,n);break}}if(0!==(r=ds(e))&&r!==n)break;if(0!==a&&a!==n){e.lastPingedTime=a;break}e.timeoutHandle=In(Ts.bind(null,e),l);break}Ts(e);break;case Do:if($s(e,n),n===(a=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ss(l)),Vo&&(0===(l=e.lastPingedTime)||l>=n)){e.lastPingedTime=n,ys(e,n);break}if(0!==(l=ds(e))&&l!==n)break;if(0!==a&&a!==n){e.lastPingedTime=a;break}if(1073741823!==Ho?a=10*(1073741821-Ho)-Gl():1073741823===Go?a=0:(a=10*(1073741821-Go)-5e3,0>(a=(l=Gl())-a)&&(a=0),(n=10*(1073741821-n)-l)<(a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ao(a/1960))-a)&&(a=n)),10<a){e.timeoutHandle=In(Ts.bind(null,e),a);break}Ts(e);break;case Fo:if(1073741823!==Go&&null!==Uo){r=Go;var o=Uo;if(0>=(a=0|o.busyMinDurationMs)?a=0:(l=0|o.busyDelayMs,a=(r=Gl()-(10*(1073741821-r)-(0|o.timeoutMs||5e3)))<=l?0:l+a-r),10<a){$s(e,n),e.timeoutHandle=In(Ts.bind(null,e),a);break}}Ts(e);break;default:throw Error(i(329))}if(ps(e),e.callbackNode===t)return fs.bind(null,e)}}return null}function ms(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Ro&(Co|jo))!==To)throw Error(i(327));if(js(),e===qo&&t===Lo||ys(e,t),null!==Wo){var n=Ro;Ro|=Co;for(var a=vs();;)try{ks();break}catch(t){bs(e,t)}if(ar(),Ro=n,xo.current=a,Bo===Oo)throw n=zo,ys(e,t),$s(e,t),ps(e),n;if(null!==Wo)throw Error(i(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,qo=null,Ts(e),ps(e)}return null}function hs(e,t){var n=Ro;Ro|=1;try{return e(t)}finally{(Ro=n)===To&&Kl()}}function gs(e,t){var n=Ro;Ro&=-2,Ro|=Po;try{return e(t)}finally{(Ro=n)===To&&Kl()}}function ys(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,An(n)),null!==Wo)for(n=Wo.return;null!==n;){var a=n;switch(a.tag){case 1:null!=(a=a.type.childContextTypes)&&wl();break;case 3:Fr(),pl(gl),pl(hl);break;case 5:qr(a);break;case 4:Fr();break;case 13:case 19:pl(Wr);break;case 10:lr(a)}n=n.return}qo=e,Wo=Bs(e.current,null),Lo=t,Bo=_o,zo=null,Ho=Go=1073741823,Uo=null,Yo=0,Vo=!1}function bs(e,t){for(;;){try{if(ar(),zr.current=vi,$r)for(var n=Ur.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}if(Hr=0,Vr=Yr=Ur=null,$r=!1,null===Wo||null===Wo.return)return Bo=Oo,zo=t,Wo=null;e:{var l=e,r=Wo.return,i=Wo,o=t;if(t=Lo,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var s=o;if(0==(2&i.mode)){var u=i.alternate;u?(i.updateQueue=u.updateQueue,i.memoizedState=u.memoizedState,i.expirationTime=u.expirationTime):(i.updateQueue=null,i.memoizedState=null)}var c=0!=(1&Wr.current),d=r;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!c)}}if(p){var h=d.updateQueue;if(null===h){var g=new Set;g.add(s),d.updateQueue=g}else h.add(s);if(0==(2&d.mode)){if(d.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var y=dr(1073741823,null);y.tag=2,pr(i,y)}i.expirationTime=1073741823;break e}o=void 0,i=t;var b=l.pingCache;if(null===b?(b=l.pingCache=new wo,o=new Set,b.set(s,o)):void 0===(o=b.get(s))&&(o=new Set,b.set(s,o)),!o.has(i)){o.add(i);var v=Ms.bind(null,l,s,i);s.then(v,v)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);o=Error((ge(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(i))}Bo!==Fo&&(Bo=No),o=no(o,i),d=r;do{switch(d.tag){case 3:s=o,d.effectTag|=4096,d.expirationTime=t,fr(d,Eo(d,s,t));break e;case 1:s=o;var w=d.type,E=d.stateNode;if(0==(64&d.effectTag)&&("function"==typeof w.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===Zo||!Zo.has(E)))){d.effectTag|=4096,d.expirationTime=t,fr(d,ko(d,s,t));break e}}d=d.return}while(null!==d)}Wo=xs(Wo)}catch(e){t=e;continue}break}}function vs(){var e=xo.current;return xo.current=vi,null===e?vi:e}function ws(e,t){e<Go&&2<e&&(Go=e),null!==t&&e<Ho&&2<e&&(Ho=e,Uo=t)}function Es(e){e>Yo&&(Yo=e)}function ks(){for(;null!==Wo;)Wo=As(Wo)}function Is(){for(;null!==Wo&&!Rl();)Wo=As(Wo)}function As(e){var t=Io(e.alternate,e,Lo);return e.memoizedProps=e.pendingProps,null===t&&(t=xs(e)),So.current=null,t}function xs(e){Wo=e;do{var t=Wo.alternate;if(e=Wo.return,0==(2048&Wo.effectTag)){if(t=eo(t,Wo,Lo),1===Lo||1!==Wo.childExpirationTime){for(var n=0,a=Wo.child;null!==a;){var l=a.expirationTime,r=a.childExpirationTime;l>n&&(n=l),r>n&&(n=r),a=a.sibling}Wo.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Wo.firstEffect),null!==Wo.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Wo.firstEffect),e.lastEffect=Wo.lastEffect),1<Wo.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Wo:e.firstEffect=Wo,e.lastEffect=Wo))}else{if(null!==(t=to(Wo)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Wo.sibling))return t;Wo=e}while(null!==Wo);return Bo===_o&&(Bo=Fo),null}function Ss(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Ts(e){var t=Hl();return Yl(99,Ps.bind(null,e,t)),null}function Ps(e,t){do{js()}while(null!==ts);if((Ro&(Co|jo))!==To)throw Error(i(327));var n=e.finishedWork,a=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var l=Ss(n);if(e.firstPendingTime=l,a<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:a<=e.firstSuspendedTime&&(e.firstSuspendedTime=a-1),a<=e.lastPingedTime&&(e.lastPingedTime=0),a<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===qo&&(Wo=qo=null,Lo=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,l=n.firstEffect):l=n:l=n.firstEffect,null!==l){var r=Ro;Ro|=jo,So.current=null,vn=Ut;var o=fn();if(mn(o)){if("selectionStart"in o)var s={start:o.selectionStart,end:o.selectionEnd};else e:{var u=(s=(s=o.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(u&&0!==u.rangeCount){s=u.anchorNode;var c=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{s.nodeType,d.nodeType}catch(e){s=null;break e}var p=0,f=-1,m=-1,h=0,g=0,y=o,b=null;t:for(;;){for(var v;y!==s||0!==c&&3!==y.nodeType||(f=p+c),y!==d||0!==u&&3!==y.nodeType||(m=p+u),3===y.nodeType&&(p+=y.nodeValue.length),null!==(v=y.firstChild);)b=y,y=v;for(;;){if(y===o)break t;if(b===s&&++h===c&&(f=p),b===d&&++g===u&&(m=p),null!==(v=y.nextSibling))break;b=(y=b).parentNode}y=v}s=-1===f||-1===m?null:{start:f,end:m}}else s=null}s=s||{start:0,end:0}}else s=null;wn={activeElementDetached:null,focusedElem:o,selectionRange:s},Ut=!1,Qo=l;do{try{Cs()}catch(e){if(null===Qo)throw Error(i(330));Ns(Qo,e),Qo=Qo.nextEffect}}while(null!==Qo);Qo=l;do{try{for(o=e,s=t;null!==Qo;){var w=Qo.effectTag;if(16&w&&We(Qo.stateNode,""),128&w){var E=Qo.alternate;if(null!==E){var k=E.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&w){case 2:mo(Qo),Qo.effectTag&=-3;break;case 6:mo(Qo),Qo.effectTag&=-3,bo(Qo.alternate,Qo);break;case 1024:Qo.effectTag&=-1025;break;case 1028:Qo.effectTag&=-1025,bo(Qo.alternate,Qo);break;case 4:bo(Qo.alternate,Qo);break;case 8:yo(o,c=Qo,s),po(c)}Qo=Qo.nextEffect}}catch(e){if(null===Qo)throw Error(i(330));Ns(Qo,e),Qo=Qo.nextEffect}}while(null!==Qo);if(k=wn,E=fn(),w=k.focusedElem,s=k.selectionRange,E!==w&&w&&w.ownerDocument&&pn(w.ownerDocument.documentElement,w)){null!==s&&mn(w)&&(E=s.start,void 0===(k=s.end)&&(k=E),"selectionStart"in w?(w.selectionStart=E,w.selectionEnd=Math.min(k,w.value.length)):(k=(E=w.ownerDocument||document)&&E.defaultView||window).getSelection&&(k=k.getSelection(),c=w.textContent.length,o=Math.min(s.start,c),s=void 0===s.end?o:Math.min(s.end,c),!k.extend&&o>s&&(c=s,s=o,o=c),c=dn(w,o),d=dn(w,s),c&&d&&(1!==k.rangeCount||k.anchorNode!==c.node||k.anchorOffset!==c.offset||k.focusNode!==d.node||k.focusOffset!==d.offset)&&((E=E.createRange()).setStart(c.node,c.offset),k.removeAllRanges(),o>s?(k.addRange(E),k.extend(d.node,d.offset)):(E.setEnd(d.node,d.offset),k.addRange(E))))),E=[];for(k=w;k=k.parentNode;)1===k.nodeType&&E.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<E.length;w++)(k=E[w]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Ut=!!vn,wn=vn=null,e.current=n,Qo=l;do{try{for(w=e;null!==Qo;){var I=Qo.effectTag;if(36&I&&uo(w,Qo.alternate,Qo),128&I){E=void 0;var A=Qo.ref;if(null!==A){var x=Qo.stateNode;Qo.tag,E=x,"function"==typeof A?A(E):A.current=E}}Qo=Qo.nextEffect}}catch(e){if(null===Qo)throw Error(i(330));Ns(Qo,e),Qo=Qo.nextEffect}}while(null!==Qo);Qo=null,ql(),Ro=r}else e.current=n;if(es)es=!1,ts=e,ns=t;else for(Qo=l;null!==Qo;)t=Qo.nextEffect,Qo.nextEffect=null,Qo=t;if(0===(t=e.firstPendingTime)&&(Zo=null),1073741823===t?e===rs?ls++:(ls=0,rs=e):ls=0,"function"==typeof Fs&&Fs(n.stateNode,a),ps(e),Jo)throw Jo=!1,e=Xo,Xo=null,e;return(Ro&Po)!==To||Kl(),null}function Cs(){for(;null!==Qo;){var e=Qo.effectTag;0!=(256&e)&&io(Qo.alternate,Qo),0==(512&e)||es||(es=!0,Vl(97,(function(){return js(),null}))),Qo=Qo.nextEffect}}function js(){if(90!==ns){var e=97<ns?97:ns;return ns=90,Yl(e,_s)}}function _s(){if(null===ts)return!1;var e=ts;if(ts=null,(Ro&(Co|jo))!==To)throw Error(i(331));var t=Ro;for(Ro|=jo,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:oo(5,n),so(5,n)}}catch(t){if(null===e)throw Error(i(330));Ns(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Ro=t,Kl(),!0}function Os(e,t,n){pr(e,t=Eo(e,t=no(n,t),1073741823)),null!==(e=cs(e,1073741823))&&ps(e)}function Ns(e,t){if(3===e.tag)Os(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Os(n,e,t);break}if(1===n.tag){var a=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof a.componentDidCatch&&(null===Zo||!Zo.has(a))){pr(n,e=ko(n,e=no(t,e),1073741823)),null!==(n=cs(n,1073741823))&&ps(n);break}}n=n.return}}function Ms(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),qo===e&&Lo===n?Bo===Do||Bo===Mo&&1073741823===Go&&Gl()-$o<Ko?ys(e,Lo):Vo=!0:Vs(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,ps(e)))}function Ds(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(t=ss(t=os(),e,null)),null!==(e=cs(e,t))&&ps(e)}Io=function(e,t,n){var a=t.expirationTime;if(null!==e){var l=t.pendingProps;if(e.memoizedProps!==l||gl.current)Ni=!0;else{if(a<n){switch(Ni=!1,t.tag){case 3:zi(t),_i();break;case 5:if(Rr(t),4&t.mode&&1!==n&&l.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:vl(t.type)&&Il(t);break;case 4:Dr(t,t.stateNode.containerInfo);break;case 10:a=t.memoizedProps.value,l=t.type._context,fl(Zl,l._currentValue),l._currentValue=a;break;case 13:if(null!==t.memoizedState)return 0!==(a=t.child.childExpirationTime)&&a>=n?$i(e,t,n):(fl(Wr,1&Wr.current),null!==(t=Xi(e,t,n))?t.sibling:null);fl(Wr,1&Wr.current);break;case 19:if(a=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(a)return Ji(e,t,n);t.effectTag|=64}if(null!==(l=t.memoizedState)&&(l.rendering=null,l.tail=null),fl(Wr,Wr.current),!a)return null}return Xi(e,t,n)}Ni=!1}}else Ni=!1;switch(t.expirationTime=0,t.tag){case 2:if(a=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,l=bl(t,hl.current),ir(t,n),l=Jr(null,t,a,e,l,n),t.effectTag|=1,"object"==typeof l&&null!==l&&"function"==typeof l.render&&void 0===l.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vl(a)){var r=!0;Il(t)}else r=!1;t.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,ur(t);var o=a.getDerivedStateFromProps;"function"==typeof o&&br(t,a,o,e),l.updater=vr,t.stateNode=l,l._reactInternalFiber=t,Ir(t,a,e,n),t=Bi(null,t,a,!0,r,n)}else t.tag=0,Mi(null,t,l,n),t=t.child;return t;case 16:e:{if(l=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(l),1!==l._status)throw l._result;switch(l=l._result,t.type=l,r=t.tag=function(e){if("function"==typeof e)return Ls(e)?1:0;if(null!=e){if((e=e.$$typeof)===se)return 11;if(e===de)return 14}return 2}(l),e=Xl(l,e),r){case 0:t=Wi(null,t,l,e,n);break e;case 1:t=Li(null,t,l,e,n);break e;case 11:t=Di(null,t,l,e,n);break e;case 14:t=Fi(null,t,l,Xl(l.type,e),a,n);break e}throw Error(i(306,l,""))}return t;case 0:return a=t.type,l=t.pendingProps,Wi(e,t,a,l=t.elementType===a?l:Xl(a,l),n);case 1:return a=t.type,l=t.pendingProps,Li(e,t,a,l=t.elementType===a?l:Xl(a,l),n);case 3:if(zi(t),a=t.updateQueue,null===e||null===a)throw Error(i(282));if(a=t.pendingProps,l=null!==(l=t.memoizedState)?l.element:null,cr(e,t),mr(t,a,null,n),(a=t.memoizedState.element)===l)_i(),t=Xi(e,t,n);else{if((l=t.stateNode.hydrate)&&(Ai=xn(t.stateNode.containerInfo.firstChild),Ii=t,l=xi=!0),l)for(n=Cr(t,null,a,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Mi(e,t,a,n),_i();t=t.child}return t;case 5:return Rr(t),null===e&&Pi(t),a=t.type,l=t.pendingProps,r=null!==e?e.memoizedProps:null,o=l.children,kn(a,l)?o=null:null!==r&&kn(a,r)&&(t.effectTag|=16),qi(e,t),4&t.mode&&1!==n&&l.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Mi(e,t,o,n),t=t.child),t;case 6:return null===e&&Pi(t),null;case 13:return $i(e,t,n);case 4:return Dr(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=Pr(t,null,a,n):Mi(e,t,a,n),t.child;case 11:return a=t.type,l=t.pendingProps,Di(e,t,a,l=t.elementType===a?l:Xl(a,l),n);case 7:return Mi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Mi(e,t,t.pendingProps.children,n),t.child;case 10:e:{a=t.type._context,l=t.pendingProps,o=t.memoizedProps,r=l.value;var s=t.type._context;if(fl(Zl,s._currentValue),s._currentValue=r,null!==o)if(s=o.value,0==(r=Ba(s,r)?0:0|("function"==typeof a._calculateChangedBits?a._calculateChangedBits(s,r):1073741823))){if(o.children===l.children&&!gl.current){t=Xi(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){o=s.child;for(var c=u.firstContext;null!==c;){if(c.context===a&&0!=(c.observedBits&r)){1===s.tag&&((c=dr(n,null)).tag=2,pr(s,c)),s.expirationTime<n&&(s.expirationTime=n),null!==(c=s.alternate)&&c.expirationTime<n&&(c.expirationTime=n),rr(s.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else o=10===s.tag&&s.type===t.type?null:s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}Mi(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,a=(r=t.pendingProps).children,ir(t,n),a=a(l=or(l,r.unstable_observedBits)),t.effectTag|=1,Mi(e,t,a,n),t.child;case 14:return r=Xl(l=t.type,t.pendingProps),Fi(e,t,l,r=Xl(l.type,r),a,n);case 15:return Ri(e,t,t.type,t.pendingProps,a,n);case 17:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Xl(a,l),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,vl(a)?(e=!0,Il(t)):e=!1,ir(t,n),Er(t,a,l),Ir(t,a,l,n),Bi(null,t,a,!0,e,n);case 19:return Ji(e,t,n)}throw Error(i(156,t.tag))};var Fs=null,Rs=null;function qs(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ws(e,t,n,a){return new qs(e,t,n,a)}function Ls(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bs(e,t){var n=e.alternate;return null===n?((n=Ws(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zs(e,t,n,a,l,r){var o=2;if(a=e,"function"==typeof e)Ls(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case ne:return Gs(n.children,l,r,t);case oe:o=8,l|=7;break;case ae:o=8,l|=1;break;case le:return(e=Ws(12,n,t,8|l)).elementType=le,e.type=le,e.expirationTime=r,e;case ue:return(e=Ws(13,n,t,l)).type=ue,e.elementType=ue,e.expirationTime=r,e;case ce:return(e=Ws(19,n,t,l)).elementType=ce,e.expirationTime=r,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case re:o=10;break e;case ie:o=9;break e;case se:o=11;break e;case de:o=14;break e;case pe:o=16,a=null;break e;case fe:o=22;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ws(o,n,t,l)).elementType=e,t.type=a,t.expirationTime=r,t}function Gs(e,t,n,a){return(e=Ws(7,e,a,t)).expirationTime=n,e}function Hs(e,t,n){return(e=Ws(6,e,null,t)).expirationTime=n,e}function Us(e,t,n){return(t=Ws(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ys(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Vs(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function $s(e,t){var n=e.firstSuspendedTime,a=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(a>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Ks(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Qs(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Js(e,t,n,a){var l=t.current,r=os(),o=gr.suspense;r=ss(r,l,o);e:if(n){t:{if(Xe(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(i(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(vl(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(i(171))}if(1===n.tag){var u=n.type;if(vl(u)){n=kl(n,u,s);break e}}n=s}else n=ml;return null===t.context?t.context=n:t.pendingContext=n,(t=dr(r,o)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),pr(l,t),us(l,r),r}function Xs(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Zs(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function eu(e,t){Zs(e,t),(e=e.alternate)&&Zs(e,t)}function tu(e,t,n){var a=new Ys(e,t,n=null!=n&&!0===n.hydrate),l=Ws(3,null,null,2===t?7:1===t?3:0);a.current=l,l.stateNode=a,ur(l),e[jn]=a.current,n&&0!==t&&function(e,t){var n=Je(t);xt.forEach((function(e){ft(e,t,n)})),St.forEach((function(e){ft(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=a}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function au(e,t,n,a,l){var r=n._reactRootContainer;if(r){var i=r._internalRoot;if("function"==typeof l){var o=l;l=function(){var e=Xs(i);o.call(e)}}Js(t,i,e,l)}else{if(r=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tu(e,0,t?{hydrate:!0}:void 0)}(n,a),i=r._internalRoot,"function"==typeof l){var s=l;l=function(){var e=Xs(i);s.call(e)}}gs((function(){Js(t,i,e,l)}))}return Xs(i)}function lu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(i(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}tu.prototype.render=function(e){Js(e,this._internalRoot,null,null)},tu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Js(null,e,null,(function(){t[jn]=null}))},mt=function(e){if(13===e.tag){var t=Jl(os(),150,100);us(e,t),eu(e,t)}},ht=function(e){13===e.tag&&(us(e,3),eu(e,3))},gt=function(e){if(13===e.tag){var t=os();us(e,t=ss(t,e,null)),eu(e,t)}},P=function(e,t,n){switch(t){case"input":if(xe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var l=Mn(a);if(!l)throw Error(i(90));Ee(a),xe(a,l)}}}break;case"textarea":Oe(e,n);break;case"select":null!=(t=n.value)&&Ce(e,!!n.multiple,t,!1)}},M=hs,D=function(e,t,n,a,l){var r=Ro;Ro|=4;try{return Yl(98,e.bind(null,t,n,a,l))}finally{(Ro=r)===To&&Kl()}},F=function(){(Ro&(1|Co|jo))===To&&(function(){if(null!==as){var e=as;as=null,e.forEach((function(e,t){Qs(t,e),ps(t)})),Kl()}}(),js())},R=function(e,t){var n=Ro;Ro|=2;try{return e(t)}finally{(Ro=n)===To&&Kl()}};var ru={Events:[On,Nn,Mn,S,I,Bn,function(e){at(e,Ln)},O,N,Qt,it,js,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Fs=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Rs=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(l({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=tt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:_n,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ru,t.createPortal=lu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw Error(i(268,Object.keys(e)))}return null===(e=tt(t))?null:e.stateNode},t.flushSync=function(e,t){if((Ro&(Co|jo))!==To)throw Error(i(187));var n=Ro;Ro|=1;try{return Yl(99,e.bind(null,t))}finally{Ro=n,Kl()}},t.hydrate=function(e,t,n){if(!nu(t))throw Error(i(200));return au(null,e,t,!0,n)},t.render=function(e,t,n){if(!nu(t))throw Error(i(200));return au(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(i(40));return!!e._reactRootContainer&&(gs((function(){au(null,null,e,!1,(function(){e._reactRootContainer=null,e[jn]=null}))})),!0)},t.unstable_batchedUpdates=hs,t.unstable_createPortal=function(e,t){return lu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!nu(n))throw Error(i(200));if(null==e||void 0===e._reactInternalFiber)throw Error(i(38));return au(e,t,n,!1,a)},t.version="16.13.1"},3935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},9590:e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,a="function"==typeof Set,l="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function r(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var o,s,u,c;if(Array.isArray(e)){if((o=e.length)!=i.length)return!1;for(s=o;0!=s--;)if(!r(e[s],i[s]))return!1;return!0}if(n&&e instanceof Map&&i instanceof Map){if(e.size!==i.size)return!1;for(c=e.entries();!(s=c.next()).done;)if(!i.has(s.value[0]))return!1;for(c=e.entries();!(s=c.next()).done;)if(!r(s.value[1],i.get(s.value[0])))return!1;return!0}if(a&&e instanceof Set&&i instanceof Set){if(e.size!==i.size)return!1;for(c=e.entries();!(s=c.next()).done;)if(!i.has(s.value[0]))return!1;return!0}if(l&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(i)){if((o=e.length)!=i.length)return!1;for(s=o;0!=s--;)if(e[s]!==i[s])return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if((o=(u=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(s=o;0!=s--;)if(!Object.prototype.hasOwnProperty.call(i,u[s]))return!1;if(t&&e instanceof Element)return!1;for(s=o;0!=s--;)if(("_owner"!==u[s]&&"__v"!==u[s]&&"__o"!==u[s]||!e.$$typeof)&&!r(e[u[s]],i[u[s]]))return!1;return!0}return e!=e&&i!=i}e.exports=function(e,t){try{return r(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},9943:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var a=n(7294);n(5697);const l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this._updateIframeContent()},t.prototype.componentDidUpdate=function(e,t){this._updateIframeContent()},t.prototype._defineUrl=function(){var e=this.props,t=e.id,n=e.file;return"https://gist.github.com/"+t+".js"+(n?"?file="+n:"")},t.prototype._updateIframeContent=function(){var e=this.props,t=e.id,n=e.file,a=this.iframeNode,l=a.document;a.contentDocument?l=a.contentDocument:a.contentWindow&&(l=a.contentWindow.document);var r='<html><head><base target="_parent"><style>*{font-size:12px;}</style></head><body onload="parent.document.getElementById(\''+(n?"gist-"+t+"-"+n:"gist-"+t)+'\').style.height=document.body.scrollHeight + \'px\'"><script type="text/javascript" src="'+this._defineUrl()+'"><\/script></body></html>';l.open(),l.writeln(r),l.close()},t.prototype.render=function(){var e=this,t=this.props,n=t.id,l=t.file;return a.createElement("iframe",{ref:function(t){e.iframeNode=t},width:"100%",frameBorder:0,id:l?"gist-"+n+"-"+l:"gist-"+n})},t}(a.PureComponent)},4593:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Helmet:()=>ne,default:()=>ae});var a,l,r,i,o=n(5697),s=n.n(o),u=n(3524),c=n.n(u),d=n(9590),p=n.n(d),f=n(7294),m=n(7418),h=n.n(m),g="bodyAttributes",y="htmlAttributes",b={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},v=(Object.keys(b).map((function(e){return b[e]})),"charset"),w="cssText",E="href",k="innerHTML",I="itemprop",A="rel",x={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},S=Object.keys(x).reduce((function(e,t){return e[x[t]]=t,e}),{}),T=[b.NOSCRIPT,b.SCRIPT,b.STYLE],P="data-react-helmet",C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},O=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n},N=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},M=function(e){var t=W(e,b.TITLE),n=W(e,"titleTemplate");if(n&&t)return n.replace(/%s/g,(function(){return Array.isArray(t)?t.join(""):t}));var a=W(e,"defaultTitle");return t||a||void 0},D=function(e){return W(e,"onChangeClientState")||function(){}},F=function(e,t){return t.filter((function(t){return void 0!==t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return _({},e,t)}),{})},R=function(e,t){return t.filter((function(e){return void 0!==e[b.BASE]})).map((function(e){return e[b.BASE]})).reverse().reduce((function(t,n){if(!t.length)for(var a=Object.keys(n),l=0;l<a.length;l++){var r=a[l].toLowerCase();if(-1!==e.indexOf(r)&&n[r])return t.concat(n)}return t}),[])},q=function(e,t,n){var a={};return n.filter((function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&H("Helmet: "+e+' should be of type "Array". Instead found type "'+C(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,n){var l={};n.filter((function(e){for(var n=void 0,r=Object.keys(e),i=0;i<r.length;i++){var o=r[i],s=o.toLowerCase();-1===t.indexOf(s)||n===A&&"canonical"===e[n].toLowerCase()||s===A&&"stylesheet"===e[s].toLowerCase()||(n=s),-1===t.indexOf(o)||o!==k&&o!==w&&o!==I||(n=o)}if(!n||!e[n])return!1;var u=e[n].toLowerCase();return a[n]||(a[n]={}),l[n]||(l[n]={}),!a[n][u]&&(l[n][u]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var r=Object.keys(l),i=0;i<r.length;i++){var o=r[i],s=h()({},a[o],l[o]);a[o]=s}return e}),[]).reverse()},W=function(e,t){for(var n=e.length-1;n>=0;n--){var a=e[n];if(a.hasOwnProperty(t))return a[t]}return null},L=(a=Date.now(),function(e){var t=Date.now();t-a>16?(a=t,e(t)):setTimeout((function(){L(e)}),0)}),B=function(e){return clearTimeout(e)},z="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||L:n.g.requestAnimationFrame||L,G="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||B:n.g.cancelAnimationFrame||B,H=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},U=null,Y=function(e,t){var n=e.baseTag,a=e.bodyAttributes,l=e.htmlAttributes,r=e.linkTags,i=e.metaTags,o=e.noscriptTags,s=e.onChangeClientState,u=e.scriptTags,c=e.styleTags,d=e.title,p=e.titleAttributes;K(b.BODY,a),K(b.HTML,l),$(d,p);var f={baseTag:Q(b.BASE,n),linkTags:Q(b.LINK,r),metaTags:Q(b.META,i),noscriptTags:Q(b.NOSCRIPT,o),scriptTags:Q(b.SCRIPT,u),styleTags:Q(b.STYLE,c)},m={},h={};Object.keys(f).forEach((function(e){var t=f[e],n=t.newTags,a=t.oldTags;n.length&&(m[e]=n),a.length&&(h[e]=f[e].oldTags)})),t&&t(),s(e,m,h)},V=function(e){return Array.isArray(e)?e.join(""):e},$=function(e,t){void 0!==e&&document.title!==e&&(document.title=V(e)),K(b.TITLE,t)},K=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var a=n.getAttribute(P),l=a?a.split(","):[],r=[].concat(l),i=Object.keys(t),o=0;o<i.length;o++){var s=i[o],u=t[s]||"";n.getAttribute(s)!==u&&n.setAttribute(s,u),-1===l.indexOf(s)&&l.push(s);var c=r.indexOf(s);-1!==c&&r.splice(c,1)}for(var d=r.length-1;d>=0;d--)n.removeAttribute(r[d]);l.length===r.length?n.removeAttribute(P):n.getAttribute(P)!==i.join(",")&&n.setAttribute(P,i.join(","))}},Q=function(e,t){var n=document.head||document.querySelector(b.HEAD),a=n.querySelectorAll(e+"["+P+"]"),l=Array.prototype.slice.call(a),r=[],i=void 0;return t&&t.length&&t.forEach((function(t){var n=document.createElement(e);for(var a in t)if(t.hasOwnProperty(a))if(a===k)n.innerHTML=t.innerHTML;else if(a===w)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var o=void 0===t[a]?"":t[a];n.setAttribute(a,o)}n.setAttribute(P,"true"),l.some((function(e,t){return i=t,n.isEqualNode(e)}))?l.splice(i,1):r.push(n)})),l.forEach((function(e){return e.parentNode.removeChild(e)})),r.forEach((function(e){return n.appendChild(e)})),{oldTags:l,newTags:r}},J=function(e){return Object.keys(e).reduce((function(t,n){var a=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+a:a}),"")},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[x[n]||n]=e[n],t}),t)},Z=function(e,t,n){switch(e){case b.TITLE:return{toComponent:function(){return e=t.title,n=t.titleAttributes,(a={key:e})[P]=!0,l=X(n,a),[f.createElement(b.TITLE,l,e)];var e,n,a,l},toString:function(){return function(e,t,n,a){var l=J(n),r=V(t);return l?"<"+e+" "+P+'="true" '+l+">"+N(r,a)+"</"+e+">":"<"+e+" "+P+'="true">'+N(r,a)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case g:case y:return{toComponent:function(){return X(t)},toString:function(){return J(t)}};default:return{toComponent:function(){return function(e,t){return t.map((function(t,n){var a,l=((a={key:n})[P]=!0,a);return Object.keys(t).forEach((function(e){var n=x[e]||e;if(n===k||n===w){var a=t.innerHTML||t.cssText;l.dangerouslySetInnerHTML={__html:a}}else l[n]=t[e]})),f.createElement(e,l)}))}(e,t)},toString:function(){return function(e,t,n){return t.reduce((function(t,a){var l=Object.keys(a).filter((function(e){return!(e===k||e===w)})).reduce((function(e,t){var l=void 0===a[t]?t:t+'="'+N(a[t],n)+'"';return e?e+" "+l:l}),""),r=a.innerHTML||a.cssText||"",i=-1===T.indexOf(e);return t+"<"+e+" "+P+'="true" '+l+(i?"/>":">"+r+"</"+e+">")}),"")}(e,t,n)}}}},ee=function(e){var t=e.baseTag,n=e.bodyAttributes,a=e.encode,l=e.htmlAttributes,r=e.linkTags,i=e.metaTags,o=e.noscriptTags,s=e.scriptTags,u=e.styleTags,c=e.title,d=void 0===c?"":c,p=e.titleAttributes;return{base:Z(b.BASE,t,a),bodyAttributes:Z(g,n,a),htmlAttributes:Z(y,l,a),link:Z(b.LINK,r,a),meta:Z(b.META,i,a),noscript:Z(b.NOSCRIPT,o,a),script:Z(b.SCRIPT,s,a),style:Z(b.STYLE,u,a),title:Z(b.TITLE,{title:d,titleAttributes:p},a)}},te=c()((function(e){return{baseTag:R([E,"target"],e),bodyAttributes:F(g,e),defer:W(e,"defer"),encode:W(e,"encodeSpecialCharacters"),htmlAttributes:F(y,e),linkTags:q(b.LINK,[A,E],e),metaTags:q(b.META,["name",v,"http-equiv","property",I],e),noscriptTags:q(b.NOSCRIPT,[k],e),onChangeClientState:D(e),scriptTags:q(b.SCRIPT,["src",k],e),styleTags:q(b.STYLE,[w],e),title:M(e),titleAttributes:F("titleAttributes",e)}}),(function(e){U&&G(U),e.defer?U=z((function(){Y(e,(function(){U=null}))})):(Y(e),U=null)}),ee)((function(){return null})),ne=(l=te,i=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!p()(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case b.SCRIPT:case b.NOSCRIPT:return{innerHTML:t};case b.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,a=e.arrayTypeChildren,l=e.newChildProps,r=e.nestedChildren;return _({},a,((t={})[n.type]=[].concat(a[n.type]||[],[_({},l,this.mapNestedChildrenToProps(n,r))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,n,a=e.child,l=e.newProps,r=e.newChildProps,i=e.nestedChildren;switch(a.type){case b.TITLE:return _({},l,((t={})[a.type]=i,t.titleAttributes=_({},r),t));case b.BODY:return _({},l,{bodyAttributes:_({},r)});case b.HTML:return _({},l,{htmlAttributes:_({},r)})}return _({},l,((n={})[a.type]=_({},r),n))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=_({},t);return Object.keys(e).forEach((function(t){var a;n=_({},n,((a={})[t]=e[t],a))})),n},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var n=this,a={};return f.Children.forEach(e,(function(e){if(e&&e.props){var l=e.props,r=l.children,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[S[n]||n]=e[n],t}),t)}(O(l,["children"]));switch(n.warnOnInvalidChildren(e,r),e.type){case b.LINK:case b.META:case b.NOSCRIPT:case b.SCRIPT:case b.STYLE:a=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:a,newChildProps:i,nestedChildren:r});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:i,nestedChildren:r})}}})),t=this.mapArrayTypeChildrenToProps(a,t)},t.prototype.render=function(){var e=this.props,t=e.children,n=O(e,["children"]),a=_({},n);return t&&(a=this.mapChildrenToProps(t,a)),f.createElement(l,a)},j(t,null,[{key:"canUseDOM",set:function(e){l.canUseDOM=e}}]),t}(f.Component),r.propTypes={base:s().object,bodyAttributes:s().object,children:s().oneOfType([s().arrayOf(s().node),s().node]),defaultTitle:s().string,defer:s().bool,encodeSpecialCharacters:s().bool,htmlAttributes:s().object,link:s().arrayOf(s().object),meta:s().arrayOf(s().object),noscript:s().arrayOf(s().object),onChangeClientState:s().func,script:s().arrayOf(s().object),style:s().arrayOf(s().object),title:s().string,titleAttributes:s().object,titleTemplate:s().string},r.defaultProps={defer:!0,encodeSpecialCharacters:!0},r.peek=l.peek,r.rewind=function(){var e=l.rewind();return e||(e=ee({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},i);ne.renderStatic=ne.rewind;const ae=ne},9921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,a=n?Symbol.for("react.element"):60103,l=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,h=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case c:case d:case r:case o:case i:case f:return e;default:switch(e=e&&e.$$typeof){case u:case p:case g:case h:case s:return e;default:return t}}case l:return t}}}function k(e){return E(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=s,t.Element=a,t.ForwardRef=p,t.Fragment=r,t.Lazy=g,t.Memo=h,t.Portal=l,t.Profiler=o,t.StrictMode=i,t.Suspense=f,t.isAsyncMode=function(e){return k(e)||E(e)===c},t.isConcurrentMode=k,t.isContextConsumer=function(e){return E(e)===u},t.isContextProvider=function(e){return E(e)===s},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return E(e)===p},t.isFragment=function(e){return E(e)===r},t.isLazy=function(e){return E(e)===g},t.isMemo=function(e){return E(e)===h},t.isPortal=function(e){return E(e)===l},t.isProfiler=function(e){return E(e)===o},t.isStrictMode=function(e){return E(e)===i},t.isSuspense=function(e){return E(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===d||e===o||e===i||e===f||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===h||e.$$typeof===s||e.$$typeof===u||e.$$typeof===p||e.$$typeof===b||e.$$typeof===v||e.$$typeof===w||e.$$typeof===y)},t.typeOf=E},9864:(e,t,n)=>{"use strict";e.exports=n(9921)},3338:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BrowserRouter:()=>ye,HashRouter:()=>be,Link:()=>Ae,MemoryRouter:()=>U,NavLink:()=>Te,Prompt:()=>V,Redirect:()=>X,Route:()=>ae,Router:()=>H,StaticRouter:()=>ue,Switch:()=>ce,generatePath:()=>J,matchPath:()=>ne,useHistory:()=>fe,useLocation:()=>me,useParams:()=>he,useRouteMatch:()=>ge,withRouter:()=>de});var a=n(4578),l=n(7294),r=n(5697),i=n.n(r),o=n(7462);function s(e){return"/"===e.charAt(0)}function u(e,t){for(var n=t,a=n+1,l=e.length;a<l;n+=1,a+=1)e[n]=e[a];e.pop()}const c=function(e,t){void 0===t&&(t="");var n,a=e&&e.split("/")||[],l=t&&t.split("/")||[],r=e&&s(e),i=t&&s(t),o=r||i;if(e&&s(e)?l=a:a.length&&(l.pop(),l=l.concat(a)),!l.length)return"/";if(l.length){var c=l[l.length-1];n="."===c||".."===c||""===c}else n=!1;for(var d=0,p=l.length;p>=0;p--){var f=l[p];"."===f?u(l,p):".."===f?(u(l,p),d++):d&&(u(l,p),d--)}if(!o)for(;d--;d)l.unshift("..");!o||""===l[0]||l[0]&&s(l[0])||l.unshift("");var m=l.join("/");return n&&"/"!==m.substr(-1)&&(m+="/"),m};function d(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const p=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,a){return e(t,n[a])}));if("object"==typeof t||"object"==typeof n){var a=d(t),l=d(n);return a!==t||l!==n?e(a,l):Object.keys(Object.assign({},t,n)).every((function(a){return e(t[a],n[a])}))}return!1};const f=function(e,t){if(!e)throw new Error("Invariant failed")};function m(e){return"/"===e.charAt(0)?e:"/"+e}function h(e){return"/"===e.charAt(0)?e.substr(1):e}function g(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function y(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function b(e){var t=e.pathname,n=e.search,a=e.hash,l=t||"/";return n&&"?"!==n&&(l+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(l+="#"===a.charAt(0)?a:"#"+a),l}function v(e,t,n,a){var l;"string"==typeof e?(l=function(e){var t=e||"/",n="",a="",l=t.indexOf("#");-1!==l&&(a=t.substr(l),t=t.substr(0,l));var r=t.indexOf("?");return-1!==r&&(n=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===n?"":n,hash:"#"===a?"":a}}(e),l.state=t):(void 0===(l=(0,o.Z)({},e)).pathname&&(l.pathname=""),l.search?"?"!==l.search.charAt(0)&&(l.search="?"+l.search):l.search="",l.hash?"#"!==l.hash.charAt(0)&&(l.hash="#"+l.hash):l.hash="",void 0!==t&&void 0===l.state&&(l.state=t));try{l.pathname=decodeURI(l.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+l.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(l.key=n),a?l.pathname?"/"!==l.pathname.charAt(0)&&(l.pathname=c(l.pathname,a.pathname)):l.pathname=a.pathname:l.pathname||(l.pathname="/"),l}function w(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,a,l){if(null!=e){var r="function"==typeof e?e(t,n):e;"string"==typeof r?"function"==typeof a?a(r,l):l(!0):l(!1!==r)}else l(!0)},appendListener:function(e){var n=!0;function a(){n&&e.apply(void 0,arguments)}return t.push(a),function(){n=!1,t=t.filter((function(e){return e!==a}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t.forEach((function(e){return e.apply(void 0,n)}))}}}var E=!("undefined"==typeof window||!window.document||!window.document.createElement);function k(e,t){t(window.confirm(e))}var I="popstate",A="hashchange";function x(){try{return window.history.state||{}}catch(e){return{}}}var S="hashchange",T={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+h(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:h,decodePath:m},slash:{encodePath:m,decodePath:m}};function P(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function C(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function j(e){window.location.replace(P(window.location.href)+"#"+e)}function _(e,t,n){return Math.min(Math.max(e,t),n)}var O=1073741823,N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{};const M=l.createContext||function(e,t){var n,r,o,s="__create-react-context-"+((N[o="__global_unique_id__"]=(N[o]||0)+1)+"__"),u=function(e){function n(){var t,n,a;return(t=e.apply(this,arguments)||this).emitter=(n=t.props.value,a=[],{on:function(e){a.push(e)},off:function(e){a=a.filter((function(t){return t!==e}))},get:function(){return n},set:function(e,t){n=e,a.forEach((function(e){return e(n,t)}))}}),t}(0,a.Z)(n,e);var l=n.prototype;return l.getChildContext=function(){var e;return(e={})[s]=this.emitter,e},l.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,a=this.props.value,l=e.value;((r=a)===(i=l)?0!==r||1/r==1/i:r!=r&&i!=i)?n=0:(n="function"==typeof t?t(a,l):O,0!=(n|=0)&&this.emitter.set(e.value,n))}var r,i},l.render=function(){return this.props.children},n}(l.Component);u.childContextTypes=((n={})[s]=i().object.isRequired,n);var c=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,a.Z)(n,t);var l=n.prototype;return l.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?O:t},l.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?O:e},l.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},l.getValue=function(){return this.context[s]?this.context[s].get():e},l.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(l.Component);return c.contextTypes=((r={})[s]=i().object,r),{Provider:u,Consumer:c}};var D=n(9658),F=n.n(D),R=(n(9864),n(3366)),q=n(8679),W=n.n(q),L=function(e){var t=M();return t.displayName=e,t},B=L("Router-History"),z=function(e){var t=M();return t.displayName=e,t},G=z("Router"),H=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}(0,a.Z)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return l.createElement(G.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},l.createElement(B.Provider,{children:this.props.children||null,value:this.props.history}))},t}(l.Component),U=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).history=function(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,a=t.initialEntries,l=void 0===a?["/"]:a,r=t.initialIndex,i=void 0===r?0:r,s=t.keyLength,u=void 0===s?6:s,c=w();function d(e){(0,o.Z)(y,e),y.length=y.entries.length,c.notifyListeners(y.location,y.action)}function p(){return Math.random().toString(36).substr(2,u)}var f=_(i,0,l.length-1),m=l.map((function(e){return v(e,void 0,"string"==typeof e?p():e.key||p())})),h=b;function g(e){var t=_(y.index+e,0,y.entries.length-1),a=y.entries[t];c.confirmTransitionTo(a,"POP",n,(function(e){e?d({action:"POP",location:a,index:t}):d()}))}var y={length:m.length,action:"POP",location:m[f],index:f,entries:m,createHref:h,push:function(e,t){var a="PUSH",l=v(e,t,p(),y.location);c.confirmTransitionTo(l,a,n,(function(e){if(e){var t=y.index+1,n=y.entries.slice(0);n.length>t?n.splice(t,n.length-t,l):n.push(l),d({action:a,location:l,index:t,entries:n})}}))},replace:function(e,t){var a="REPLACE",l=v(e,t,p(),y.location);c.confirmTransitionTo(l,a,n,(function(e){e&&(y.entries[y.index]=l,d({action:a,location:l}))}))},go:g,goBack:function(){g(-1)},goForward:function(){g(1)},canGo:function(e){var t=y.index+e;return t>=0&&t<y.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return y}(t.props),t}return(0,a.Z)(t,e),t.prototype.render=function(){return l.createElement(H,{history:this.history,children:this.props.children})},t}(l.Component),Y=function(e){function t(){return e.apply(this,arguments)||this}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(l.Component);function V(e){var t=e.message,n=e.when,a=void 0===n||n;return l.createElement(G.Consumer,null,(function(e){if(e||f(!1),!a||e.staticContext)return null;var n=e.history.block;return l.createElement(Y,{onMount:function(e){e.release=n(t)},onUpdate:function(e,a){a.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var $={},K=1e4,Q=0;function J(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if($[e])return $[e];var t=F().compile(e);return Q<K&&($[e]=t,Q++),t}(e)(t,{pretty:!0})}function X(e){var t=e.computedMatch,n=e.to,a=e.push,r=void 0!==a&&a;return l.createElement(G.Consumer,null,(function(e){e||f(!1);var a=e.history,i=e.staticContext,s=r?a.push:a.replace,u=v(t?"string"==typeof n?J(n,t.params):(0,o.Z)({},n,{pathname:J(n.pathname,t.params)}):n);return i?(s(u),null):l.createElement(Y,{onMount:function(){s(u)},onUpdate:function(e,t){var n,a,l=v(t.to);n=l,a=(0,o.Z)({},u,{key:l.key}),n.pathname===a.pathname&&n.search===a.search&&n.hash===a.hash&&n.key===a.key&&p(n.state,a.state)||s(u)},to:n})}))}var Z={},ee=1e4,te=0;function ne(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,a=n.path,l=n.exact,r=void 0!==l&&l,i=n.strict,o=void 0!==i&&i,s=n.sensitive,u=void 0!==s&&s;return[].concat(a).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var a=function(e,t){var n=""+t.end+t.strict+t.sensitive,a=Z[n]||(Z[n]={});if(a[e])return a[e];var l=[],r={regexp:F()(e,l,t),keys:l};return te<ee&&(a[e]=r,te++),r}(n,{end:r,strict:o,sensitive:u}),l=a.regexp,i=a.keys,s=l.exec(e);if(!s)return null;var c=s[0],d=s.slice(1),p=e===c;return r&&!p?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:p,params:i.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var ae=function(e){function t(){return e.apply(this,arguments)||this}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this;return l.createElement(G.Consumer,null,(function(t){t||f(!1);var n=e.props.location||t.location,a=e.props.computedMatch?e.props.computedMatch:e.props.path?ne(n.pathname,e.props):t.match,r=(0,o.Z)({},t,{location:n,match:a}),i=e.props,s=i.children,u=i.component,c=i.render;return Array.isArray(s)&&0===s.length&&(s=null),l.createElement(G.Provider,{value:r},r.match?s?"function"==typeof s?s(r):s:u?l.createElement(u,r):c?c(r):null:"function"==typeof s?s(r):null)}))},t}(l.Component);function le(e){return"/"===e.charAt(0)?e:"/"+e}function re(e,t){if(!e)return t;var n=le(e);return 0!==t.pathname.indexOf(n)?t:(0,o.Z)({},t,{pathname:t.pathname.substr(n.length)})}function ie(e){return"string"==typeof e?e:b(e)}function oe(e){return function(){f(!1)}}function se(){}var ue=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return se},t.handleBlock=function(){return se},t}(0,a.Z)(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,a=n.basename,l=void 0===a?"":a,r=n.context,i=void 0===r?{}:r;i.action=t,i.location=function(e,t){return e?(0,o.Z)({},t,{pathname:le(e)+t.pathname}):t}(l,v(e)),i.url=ie(i.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,a=e.context,r=void 0===a?{}:a,i=e.location,s=void 0===i?"/":i,u=(0,R.Z)(e,["basename","context","location"]),c={createHref:function(e){return le(n+ie(e))},action:"POP",location:re(n,v(s)),push:this.handlePush,replace:this.handleReplace,go:oe(),goBack:oe(),goForward:oe(),listen:this.handleListen,block:this.handleBlock};return l.createElement(H,(0,o.Z)({},u,{history:c,staticContext:r}))},t}(l.Component),ce=function(e){function t(){return e.apply(this,arguments)||this}return(0,a.Z)(t,e),t.prototype.render=function(){var e=this;return l.createElement(G.Consumer,null,(function(t){t||f(!1);var n,a,r=e.props.location||t.location;return l.Children.forEach(e.props.children,(function(e){if(null==a&&l.isValidElement(e)){n=e;var i=e.props.path||e.props.from;a=i?ne(r.pathname,(0,o.Z)({},e.props,{path:i})):t.match}})),a?l.cloneElement(n,{location:r,computedMatch:a}):null}))},t}(l.Component);function de(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,a=(0,R.Z)(t,["wrappedComponentRef"]);return l.createElement(G.Consumer,null,(function(t){return t||f(!1),l.createElement(e,(0,o.Z)({},a,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,W()(n,e)}var pe=l.useContext;function fe(){return pe(B)}function me(){return pe(G).location}function he(){var e=pe(G).match;return e?e.params:{}}function ge(e){var t=me(),n=pe(G).match;return e?ne(t.pathname,e):n}var ye=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).history=function(e){void 0===e&&(e={}),E||f(!1);var t,n=window.history,a=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,l=!(-1===window.navigator.userAgent.indexOf("Trident")),r=e,i=r.forceRefresh,s=void 0!==i&&i,u=r.getUserConfirmation,c=void 0===u?k:u,d=r.keyLength,p=void 0===d?6:d,h=e.basename?y(m(e.basename)):"";function S(e){var t=e||{},n=t.key,a=t.state,l=window.location,r=l.pathname+l.search+l.hash;return h&&(r=g(r,h)),v(r,a,n)}function T(){return Math.random().toString(36).substr(2,p)}var P=w();function C(e){(0,o.Z)(B,e),B.length=n.length,P.notifyListeners(B.location,B.action)}function j(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||N(S(e.state))}function _(){N(S(x()))}var O=!1;function N(e){O?(O=!1,C()):P.confirmTransitionTo(e,"POP",c,(function(t){t?C({action:"POP",location:e}):function(e){var t=B.location,n=D.indexOf(t.key);-1===n&&(n=0);var a=D.indexOf(e.key);-1===a&&(a=0);var l=n-a;l&&(O=!0,R(l))}(e)}))}var M=S(x()),D=[M.key];function F(e){return h+b(e)}function R(e){n.go(e)}var q=0;function W(e){1===(q+=e)&&1===e?(window.addEventListener(I,j),l&&window.addEventListener(A,_)):0===q&&(window.removeEventListener(I,j),l&&window.removeEventListener(A,_))}var L=!1,B={length:n.length,action:"POP",location:M,createHref:F,push:function(e,t){var l="PUSH",r=v(e,t,T(),B.location);P.confirmTransitionTo(r,l,c,(function(e){if(e){var t=F(r),i=r.key,o=r.state;if(a)if(n.pushState({key:i,state:o},null,t),s)window.location.href=t;else{var u=D.indexOf(B.location.key),c=D.slice(0,u+1);c.push(r.key),D=c,C({action:l,location:r})}else window.location.href=t}}))},replace:function(e,t){var l="REPLACE",r=v(e,t,T(),B.location);P.confirmTransitionTo(r,l,c,(function(e){if(e){var t=F(r),i=r.key,o=r.state;if(a)if(n.replaceState({key:i,state:o},null,t),s)window.location.replace(t);else{var u=D.indexOf(B.location.key);-1!==u&&(D[u]=r.key),C({action:l,location:r})}else window.location.replace(t)}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var t=P.setPrompt(e);return L||(W(1),L=!0),function(){return L&&(L=!1,W(-1)),t()}},listen:function(e){var t=P.appendListener(e);return W(1),function(){W(-1),t()}}};return B}(t.props),t}return(0,a.Z)(t,e),t.prototype.render=function(){return l.createElement(H,{history:this.history,children:this.props.children})},t}(l.Component),be=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).history=function(e){void 0===e&&(e={}),E||f(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),a=n.getUserConfirmation,l=void 0===a?k:a,r=n.hashType,i=void 0===r?"slash":r,s=e.basename?y(m(e.basename)):"",u=T[i],c=u.encodePath,d=u.decodePath;function p(){var e=d(C());return s&&(e=g(e,s)),v(e)}var h=w();function I(e){(0,o.Z)(L,e),L.length=t.length,h.notifyListeners(L.location,L.action)}var A=!1,x=null;function _(){var e,t,n=C(),a=c(n);if(n!==a)j(a);else{var r=p(),i=L.location;if(!A&&(t=r,(e=i).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(x===b(r))return;x=null,function(e){A?(A=!1,I()):h.confirmTransitionTo(e,"POP",l,(function(t){t?I({action:"POP",location:e}):function(e){var t=L.location,n=D.lastIndexOf(b(t));-1===n&&(n=0);var a=D.lastIndexOf(b(e));-1===a&&(a=0);var l=n-a;l&&(A=!0,F(l))}(e)}))}(r)}}var O=C(),N=c(O);O!==N&&j(N);var M=p(),D=[b(M)];function F(e){t.go(e)}var R=0;function q(e){1===(R+=e)&&1===e?window.addEventListener(S,_):0===R&&window.removeEventListener(S,_)}var W=!1,L={length:t.length,action:"POP",location:M,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=P(window.location.href)),n+"#"+c(s+b(e))},push:function(e,t){var n="PUSH",a=v(e,void 0,void 0,L.location);h.confirmTransitionTo(a,n,l,(function(e){if(e){var t=b(a),l=c(s+t);if(C()!==l){x=t,function(e){window.location.hash=e}(l);var r=D.lastIndexOf(b(L.location)),i=D.slice(0,r+1);i.push(t),D=i,I({action:n,location:a})}else I()}}))},replace:function(e,t){var n="REPLACE",a=v(e,void 0,void 0,L.location);h.confirmTransitionTo(a,n,l,(function(e){if(e){var t=b(a),l=c(s+t);C()!==l&&(x=t,j(l));var r=D.indexOf(b(L.location));-1!==r&&(D[r]=t),I({action:n,location:a})}}))},go:F,goBack:function(){F(-1)},goForward:function(){F(1)},block:function(e){void 0===e&&(e=!1);var t=h.setPrompt(e);return W||(q(1),W=!0),function(){return W&&(W=!1,q(-1)),t()}},listen:function(e){var t=h.appendListener(e);return q(1),function(){q(-1),t()}}};return L}(t.props),t}return(0,a.Z)(t,e),t.prototype.render=function(){return l.createElement(H,{history:this.history,children:this.props.children})},t}(l.Component),ve=function(e,t){return"function"==typeof e?e(t):e},we=function(e,t){return"string"==typeof e?v(e,null,null,t):e},Ee=function(e){return e},ke=l.forwardRef;void 0===ke&&(ke=Ee);var Ie=ke((function(e,t){var n=e.innerRef,a=e.navigate,r=e.onClick,i=(0,R.Z)(e,["innerRef","navigate","onClick"]),s=i.target,u=(0,o.Z)({},i,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),a())}});return u.ref=Ee!==ke&&t||n,l.createElement("a",u)})),Ae=ke((function(e,t){var n=e.component,a=void 0===n?Ie:n,r=e.replace,i=e.to,s=e.innerRef,u=(0,R.Z)(e,["component","replace","to","innerRef"]);return l.createElement(G.Consumer,null,(function(e){e||f(!1);var n=e.history,c=we(ve(i,e.location),e.location),d=c?n.createHref(c):"",p=(0,o.Z)({},u,{href:d,navigate:function(){var t=ve(i,e.location);(r?n.replace:n.push)(t)}});return Ee!==ke?p.ref=t||s:p.innerRef=s,l.createElement(a,p)}))})),xe=function(e){return e},Se=l.forwardRef;void 0===Se&&(Se=xe);var Te=Se((function(e,t){var n=e["aria-current"],a=void 0===n?"page":n,r=e.activeClassName,i=void 0===r?"active":r,s=e.activeStyle,u=e.className,c=e.exact,d=e.isActive,p=e.location,m=e.sensitive,h=e.strict,g=e.style,y=e.to,b=e.innerRef,v=(0,R.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return l.createElement(G.Consumer,null,(function(e){e||f(!1);var n=p||e.location,r=we(ve(y,n),n),w=r.pathname,E=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),k=E?ne(n.pathname,{path:E,exact:c,sensitive:m,strict:h}):null,I=!!(d?d(k,n):k),A=I?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(u,i):u,x=I?(0,o.Z)({},g,{},s):g,S=(0,o.Z)({"aria-current":I&&a||null,className:A,style:x,to:r},v);return xe!==Se?S.ref=t||b:S.innerRef=b,l.createElement(Ae,S)}))}))},6585:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},9658:(e,t,n)=>{var a=n(6585);e.exports=function e(t,n,l){return a(n)||(l=n||l,n=[]),l=l||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var a=0;a<n.length;a++)t.push({name:a,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(t,n):a(t)?function(t,n,a){for(var l=[],r=0;r<t.length;r++)l.push(e(t[r],n,a).source);return c(new RegExp("(?:"+l.join("|")+")",d(a)),n)}(t,n,l):function(e,t,n){return p(r(e,n),t,n)}(t,n,l)},e.exports.parse=r,e.exports.compile=function(e,t){return o(r(e,t),t)},e.exports.tokensToFunction=o,e.exports.tokensToRegExp=p;var l=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function r(e,t){for(var n,a=[],r=0,i=0,o="",c=t&&t.delimiter||"/";null!=(n=l.exec(e));){var d=n[0],p=n[1],f=n.index;if(o+=e.slice(i,f),i=f+d.length,p)o+=p[1];else{var m=e[i],h=n[2],g=n[3],y=n[4],b=n[5],v=n[6],w=n[7];o&&(a.push(o),o="");var E=null!=h&&null!=m&&m!==h,k="+"===v||"*"===v,I="?"===v||"*"===v,A=n[2]||c,x=y||b;a.push({name:g||r++,prefix:h||"",delimiter:A,optional:I,repeat:k,partial:E,asterisk:!!w,pattern:x?u(x):w?".*":"[^"+s(A)+"]+?"})}}return i<e.length&&(o+=e.substr(i)),o&&a.push(o),a}function i(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function o(e,t){for(var n=new Array(e.length),l=0;l<e.length;l++)"object"==typeof e[l]&&(n[l]=new RegExp("^(?:"+e[l].pattern+")$",d(t)));return function(t,l){for(var r="",o=t||{},s=(l||{}).pretty?i:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if("string"!=typeof c){var d,p=o[c.name];if(null==p){if(c.optional){c.partial&&(r+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(a(p)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<p.length;f++){if(d=s(p[f]),!n[u].test(d))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(d)+"`");r+=(0===f?c.prefix:c.delimiter)+d}}else{if(d=c.asterisk?encodeURI(p).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(p),!n[u].test(d))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+d+'"');r+=c.prefix+d}}else r+=c}return r}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function p(e,t,n){a(t)||(n=t||n,t=[]);for(var l=(n=n||{}).strict,r=!1!==n.end,i="",o=0;o<e.length;o++){var u=e[o];if("string"==typeof u)i+=s(u);else{var p=s(u.prefix),f="(?:"+u.pattern+")";t.push(u),u.repeat&&(f+="(?:"+p+f+")*"),i+=f=u.optional?u.partial?p+"("+f+")?":"(?:"+p+"("+f+"))?":p+"("+f+")"}}var m=s(n.delimiter||"/"),h=i.slice(-m.length)===m;return l||(i=(h?i.slice(0,-m.length):i)+"(?:"+m+"(?=$))?"),i+=r?"$":l&&h?"":"(?="+m+"|$)",c(new RegExp("^"+i,d(n)),t)}},3524:(e,t,n)=>{"use strict";var a,l=n(7294),r=(a=l)&&"object"==typeof a&&"default"in a?a.default:a;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(a){if("function"!=typeof a)throw new Error("Expected WrappedComponent to be a React component.");var s,u=[];function c(){s=e(u.map((function(e){return e.props}))),d.canUseDOM?t(s):n&&(s=n(s))}var d=function(e){var t,n;function l(){return e.apply(this,arguments)||this}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,l.peek=function(){return s},l.rewind=function(){if(l.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=s;return s=void 0,u=[],e};var i=l.prototype;return i.UNSAFE_componentWillMount=function(){u.push(this),c()},i.componentDidUpdate=function(){c()},i.componentWillUnmount=function(){var e=u.indexOf(this);u.splice(e,1),c()},i.render=function(){return r.createElement(a,this.props)},l}(l.PureComponent);return i(d,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(a)+")"),i(d,"canUseDOM",o),d}}},322:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CSSTransition:()=>E,ReplaceTransition:()=>C,SwitchTransition:()=>q,Transition:()=>b,TransitionGroup:()=>T,config:()=>u});var a=n(7462),l=n(3366),r=n(4578);function i(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}n(5697);var o=n(7294),s=n(3935);const u={disabled:!1},c=o.createContext(null);var d="unmounted",p="exited",f="entering",m="entered",h="exiting",g=function(e){function t(t,n){var a;a=e.call(this,t,n)||this;var l,r=n&&!n.isMounting?t.enter:t.appear;return a.appearStatus=null,t.in?r?(l=p,a.appearStatus=f):l=m:l=t.unmountOnExit||t.mountOnEnter?d:p,a.state={status:l},a.nextCallback=null,a}(0,r.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===d?{status:p}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==m&&(t=f):n!==f&&n!==m||(t=h)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,a=this.props.timeout;return e=t=n=a,null!=a&&"number"!=typeof a&&(e=a.exit,t=a.enter,n=void 0!==a.appear?a.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===f?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===p&&this.setState({status:d})},n.performEnter=function(e){var t=this,n=this.props.enter,a=this.context?this.context.isMounting:e,l=this.props.nodeRef?[a]:[s.findDOMNode(this),a],r=l[0],i=l[1],o=this.getTimeouts(),c=a?o.appear:o.enter;!e&&!n||u.disabled?this.safeSetState({status:m},(function(){t.props.onEntered(r)})):(this.props.onEnter(r,i),this.safeSetState({status:f},(function(){t.props.onEntering(r,i),t.onTransitionEnd(c,(function(){t.safeSetState({status:m},(function(){t.props.onEntered(r,i)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),a=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!u.disabled?(this.props.onExit(a),this.safeSetState({status:h},(function(){e.props.onExiting(a),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:p},(function(){e.props.onExited(a)}))}))}))):this.safeSetState({status:p},(function(){e.props.onExited(a)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(a){n&&(n=!1,t.nextCallback=null,e(a))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),a=null==e&&!this.props.addEndListener;if(n&&!a){if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],r=l[0],i=l[1];this.props.addEndListener(r,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===d)return null;var t=this.props,n=t.children,a=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,l.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(c.Provider,{value:null},"function"==typeof n?n(e,a):o.cloneElement(o.Children.only(n),a))},t}(o.Component);function y(){}g.contextType=c,g.propTypes={},g.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:y,onEntering:y,onEntered:y,onExit:y,onExiting:y,onExited:y},g.UNMOUNTED=d,g.EXITED=p,g.ENTERING=f,g.ENTERED=m,g.EXITING=h;const b=g;var v=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return a=t,void((n=e).classList?n.classList.remove(a):"string"==typeof n.className?n.className=i(n.className,a):n.setAttribute("class",i(n.className&&n.className.baseVal||"",a)));var n,a}))},w=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var a=t.resolveArguments(e,n),l=a[0],r=a[1];t.removeClasses(l,"exit"),t.addClass(l,r?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var a=t.resolveArguments(e,n),l=a[0],r=a[1]?"appear":"enter";t.addClass(l,r,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var a=t.resolveArguments(e,n),l=a[0],r=a[1]?"appear":"enter";t.removeClasses(l,r),t.addClass(l,r,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,a="string"==typeof n,l=a?(a&&n?n+"-":"")+e:n[e];return{baseClassName:l,activeClassName:a?l+"-active":n[e+"Active"],doneClassName:a?l+"-done":n[e+"Done"]}},t}(0,r.Z)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var a=this.getClassNames(t)[n+"ClassName"],l=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&l&&(a+=" "+l),"active"===n&&e&&e.scrollTop,a&&(this.appliedClasses[t][n]=a,function(e,t){e&&t&&t.split(" ").forEach((function(t){return a=t,void((n=e).classList?n.classList.add(a):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,a)||("string"==typeof n.className?n.className=n.className+" "+a:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+a)));var n,a}))}(e,a))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],a=n.base,l=n.active,r=n.done;this.appliedClasses[t]={},a&&v(e,a),l&&v(e,l),r&&v(e,r)},n.render=function(){var e=this.props,t=(e.classNames,(0,l.Z)(e,["classNames"]));return o.createElement(b,(0,a.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(o.Component);w.defaultProps={classNames:""},w.propTypes={};const E=w;function k(e,t){var n=Object.create(null);return e&&o.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,o.isValidElement)(e)?t(e):e}(e)})),n}function I(e,t,n){return null!=n[t]?n[t]:e.props[t]}function A(e,t,n){var a=k(e.children),l=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var a,l=Object.create(null),r=[];for(var i in e)i in t?r.length&&(l[i]=r,r=[]):r.push(i);var o={};for(var s in t){if(l[s])for(a=0;a<l[s].length;a++){var u=l[s][a];o[l[s][a]]=n(u)}o[s]=n(s)}for(a=0;a<r.length;a++)o[r[a]]=n(r[a]);return o}(t,a);return Object.keys(l).forEach((function(r){var i=l[r];if((0,o.isValidElement)(i)){var s=r in t,u=r in a,c=t[r],d=(0,o.isValidElement)(c)&&!c.props.in;!u||s&&!d?u||!s||d?u&&s&&(0,o.isValidElement)(c)&&(l[r]=(0,o.cloneElement)(i,{onExited:n.bind(null,i),in:c.props.in,exit:I(i,"exit",e),enter:I(i,"enter",e)})):l[r]=(0,o.cloneElement)(i,{in:!1}):l[r]=(0,o.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:I(i,"exit",e),enter:I(i,"enter",e)})}})),l}var x=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},S=function(e){function t(t,n){var a,l=(a=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a));return a.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},a}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,a,l=t.children,r=t.handleExited;return{children:t.firstRender?(n=e,a=r,k(n.children,(function(e){return(0,o.cloneElement)(e,{onExited:a.bind(null,e),in:!0,appear:I(e,"appear",n),enter:I(e,"enter",n),exit:I(e,"exit",n)})}))):A(e,l,r),firstRender:!1}},n.handleExited=function(e,t){var n=k(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,a.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,a=(0,l.Z)(e,["component","childFactory"]),r=this.state.contextValue,i=x(this.state.children).map(n);return delete a.appear,delete a.enter,delete a.exit,null===t?o.createElement(c.Provider,{value:r},i):o.createElement(c.Provider,{value:r},o.createElement(t,a,i))},t}(o.Component);S.propTypes={},S.defaultProps={component:"div",childFactory:function(e){return e}};const T=S;var P=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.handleLifecycle("onExited",1,n)},t}(0,r.Z)(t,e);var n=t.prototype;return n.handleLifecycle=function(e,t,n){var a,l=this.props.children,r=o.Children.toArray(l)[t];if(r.props[e]&&(a=r.props)[e].apply(a,n),this.props[e]){var i=r.props.nodeRef?void 0:s.findDOMNode(this);this.props[e](i)}},n.render=function(){var e=this.props,t=e.children,n=e.in,a=(0,l.Z)(e,["children","in"]),r=o.Children.toArray(t),i=r[0],s=r[1];return delete a.onEnter,delete a.onEntering,delete a.onEntered,delete a.onExit,delete a.onExiting,delete a.onExited,o.createElement(T,a,n?o.cloneElement(i,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):o.cloneElement(s,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},t}(o.Component);P.propTypes={};const C=P;var j,_,O="out-in",N="in-out",M=function(e,t,n){return function(){var a;e.props[t]&&(a=e.props)[t].apply(a,arguments),n()}},D=((j={})[O]=function(e){var t=e.current,n=e.changeState;return o.cloneElement(t,{in:!1,onExited:M(t,"onExited",(function(){n(f,null)}))})},j[N]=function(e){var t=e.current,n=e.changeState,a=e.children;return[t,o.cloneElement(a,{in:!0,onEntered:M(a,"onEntered",(function(){n(f)}))})]},j),F=((_={})[O]=function(e){var t=e.children,n=e.changeState;return o.cloneElement(t,{in:!0,onEntered:M(t,"onEntered",(function(){n(m,o.cloneElement(t,{in:!0}))}))})},_[N]=function(e){var t=e.current,n=e.children,a=e.changeState;return[o.cloneElement(t,{in:!1,onExited:M(t,"onExited",(function(){a(m,o.cloneElement(n,{in:!0}))}))}),o.cloneElement(n,{in:!0})]},_),R=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).state={status:m,current:null},t.appeared=!1,t.changeState=function(e,n){void 0===n&&(n=t.state.current),t.setState({status:e,current:n})},t}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===f&&e.mode===N?{status:f}:!t.current||((n=t.current)===(a=e.children)||o.isValidElement(n)&&o.isValidElement(a)&&null!=n.key&&n.key===a.key)?{current:o.cloneElement(e.children,{in:!0})}:{status:h};var n,a},n.render=function(){var e,t=this.props,n=t.children,a=t.mode,l=this.state,r=l.status,i=l.current,s={children:n,current:i,changeState:this.changeState,status:r};switch(r){case f:e=F[a](s);break;case h:e=D[a](s);break;case m:e=i}return o.createElement(c.Provider,{value:{isMounting:!this.appeared}},e)},t}(o.Component);R.propTypes={},R.defaultProps={mode:O};const q=R},2408:(e,t,n)=>{"use strict";var a=n(7418),l="function"==typeof Symbol&&Symbol.for,r=l?Symbol.for("react.element"):60103,i=l?Symbol.for("react.portal"):60106,o=l?Symbol.for("react.fragment"):60107,s=l?Symbol.for("react.strict_mode"):60108,u=l?Symbol.for("react.profiler"):60114,c=l?Symbol.for("react.provider"):60109,d=l?Symbol.for("react.context"):60110,p=l?Symbol.for("react.forward_ref"):60112,f=l?Symbol.for("react.suspense"):60113,m=l?Symbol.for("react.memo"):60115,h=l?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function w(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||b}function E(){}function k(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||b}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=w.prototype;var I=k.prototype=new E;I.constructor=k,a(I,w.prototype),I.isPureReactComponent=!0;var A={current:null},x=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var a,l={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)x.call(t,a)&&!S.hasOwnProperty(a)&&(l[a]=t[a]);var s=arguments.length-2;if(1===s)l.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];l.children=u}if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===l[a]&&(l[a]=s[a]);return{$$typeof:r,type:e,key:i,ref:o,props:l,_owner:A.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g,j=[];function _(e,t,n,a){if(j.length){var l=j.pop();return l.result=e,l.keyPrefix=t,l.func=n,l.context=a,l.count=0,l}return{result:e,keyPrefix:t,func:n,context:a,count:0}}function O(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>j.length&&j.push(e)}function N(e,t,n,a){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case r:case i:o=!0}}if(o)return n(a,e,""===t?"."+D(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=t+D(l=e[s],s);o+=N(l,u,n,a)}else if("function"==typeof(u=null===e||"object"!=typeof e?null:"function"==typeof(u=g&&e[g]||e["@@iterator"])?u:null))for(e=u.call(e),s=0;!(l=e.next()).done;)o+=N(l=l.value,u=t+D(l,s++),n,a);else if("object"===l)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return o}function M(e,t,n){return null==e?0:N(e,"",t,n)}function D(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function F(e,t){e.func.call(e.context,t,e.count++)}function R(e,t,n){var a=e.result,l=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?q(e,a,n,(function(e){return e})):null!=e&&(P(e)&&(e=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,l+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(C,"$&/")+"/")+n)),a.push(e))}function q(e,t,n,a,l){var r="";null!=n&&(r=(""+n).replace(C,"$&/")+"/"),M(e,R,t=_(t,r,a,l)),O(t)}var W={current:null};function L(){var e=W.current;if(null===e)throw Error(y(321));return e}var B={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:A,IsSomeRendererActing:{current:!1},assign:a};t.Children={map:function(e,t,n){if(null==e)return e;var a=[];return q(e,a,null,t,n),a},forEach:function(e,t,n){if(null==e)return e;M(e,F,t=_(null,null,t,n)),O(t)},count:function(e){return M(e,(function(){return null}),null)},toArray:function(e){var t=[];return q(e,t,null,(function(e){return e})),t},only:function(e){if(!P(e))throw Error(y(143));return e}},t.Component=w,t.Fragment=o,t.Profiler=u,t.PureComponent=k,t.StrictMode=s,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,n){if(null==e)throw Error(y(267,e));var l=a({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=A.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(l[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)l.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];l.children=u}return{$$typeof:r,type:e.type,key:i,ref:o,props:l,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:p,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:h,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return L().useCallback(e,t)},t.useContext=function(e,t){return L().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return L().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return L().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return L().useLayoutEffect(e,t)},t.useMemo=function(e,t){return L().useMemo(e,t)},t.useReducer=function(e,t,n){return L().useReducer(e,t,n)},t.useRef=function(e){return L().useRef(e)},t.useState=function(e){return L().useState(e)},t.version="16.13.1"},7294:(e,t,n)=>{"use strict";e.exports=n(2408)},53:(e,t)=>{"use strict";var n,a,l,r,i;if("undefined"==typeof window||"function"!=typeof MessageChannel){var o=null,s=null,u=function(){if(null!==o)try{var e=t.unstable_now();o(!0,e),o=null}catch(e){throw setTimeout(u,0),e}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==o?setTimeout(n,0,e):(o=e,setTimeout(u,0))},a=function(e,t){s=setTimeout(e,t)},l=function(){clearTimeout(s)},r=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,p=window.Date,f=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var h=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var g=p.now();t.unstable_now=function(){return p.now()-g}}var y=!1,b=null,v=-1,w=5,E=0;r=function(){return t.unstable_now()>=E},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var k=new MessageChannel,I=k.port2;k.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();E=e+w;try{b(!0,e)?I.postMessage(null):(y=!1,b=null)}catch(e){throw I.postMessage(null),e}}else y=!1},n=function(e){b=e,y||(y=!0,I.postMessage(null))},a=function(e,n){v=f((function(){e(t.unstable_now())}),n)},l=function(){m(v),v=-1}}function A(e,t){var n=e.length;e.push(t);e:for(;;){var a=n-1>>>1,l=e[a];if(!(void 0!==l&&0<T(l,t)))break e;e[a]=t,e[n]=l,n=a}}function x(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,l=e.length;a<l;){var r=2*(a+1)-1,i=e[r],o=r+1,s=e[o];if(void 0!==i&&0>T(i,n))void 0!==s&&0>T(s,i)?(e[a]=s,e[o]=n,a=o):(e[a]=i,e[r]=n,a=r);else{if(!(void 0!==s&&0>T(s,n)))break e;e[a]=s,e[o]=n,a=o}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var P=[],C=[],j=1,_=null,O=3,N=!1,M=!1,D=!1;function F(e){for(var t=x(C);null!==t;){if(null===t.callback)S(C);else{if(!(t.startTime<=e))break;S(C),t.sortIndex=t.expirationTime,A(P,t)}t=x(C)}}function R(e){if(D=!1,F(e),!M)if(null!==x(P))M=!0,n(q);else{var t=x(C);null!==t&&a(R,t.startTime-e)}}function q(e,n){M=!1,D&&(D=!1,l()),N=!0;var i=O;try{for(F(n),_=x(P);null!==_&&(!(_.expirationTime>n)||e&&!r());){var o=_.callback;if(null!==o){_.callback=null,O=_.priorityLevel;var s=o(_.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?_.callback=s:_===x(P)&&S(P),F(n)}else S(P);_=x(P)}if(null!==_)var u=!0;else{var c=x(C);null!==c&&a(R,c.startTime-n),u=!1}return u}finally{_=null,O=i,N=!1}}function W(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var L=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||N||(M=!0,n(q))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return x(P)},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=L,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_scheduleCallback=function(e,r,i){var o=t.unstable_now();if("object"==typeof i&&null!==i){var s=i.delay;s="number"==typeof s&&0<s?o+s:o,i="number"==typeof i.timeout?i.timeout:W(e)}else i=W(e),s=o;return e={id:j++,callback:r,priorityLevel:e,startTime:s,expirationTime:i=s+i,sortIndex:-1},s>o?(e.sortIndex=s,A(C,e),null===x(P)&&e===x(C)&&(D?l():D=!0,a(R,s-o))):(e.sortIndex=i,A(P,e),M||N||(M=!0,n(q))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();F(e);var n=x(P);return n!==_&&null!==_&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<_.expirationTime||r()},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}},3840:(e,t,n)=>{"use strict";e.exports=n(53)},9222:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},a.apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var l=Object.getOwnPropertyDescriptor(t,n);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,l)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var o=i(n(7294)),s=n(3338),u=n(322),c=n(3765),d=n(7171),p=n(9796),f=n(8111);t.App=function(e){var t=(0,s.useLocation)(),n=(0,o.useState)(function(e){var t=function(e){var t=p.articleRoute.path.split("/")[1],n=e.pathname.split("/");return n.length>2&&n[1]===t?n[2]:void 0}(e),n=d.ArticleCategory.tech;if(t){var a=c.articles.find((function(e){return e.metadata.id===t}));a&&(n=a.metadata.category)}return n}(t)),l=n[0],r=n[1];return p.blogRoute.additionalProps={selectedCategory:l,setSelectedCategory:r},p.articleRoute.additionalProps={selectedCategory:l},o.default.createElement("div",{className:"app-container".concat(e.isServerRendered?" server-rendered":"")},p.routes.map((function(e){return o.default.createElement(s.Route,{key:e.path,exact:!0,path:e.path},(function(t){return o.default.createElement(u.CSSTransition,{in:null!=t.match,timeout:f.transitionsDuration,classNames:"page",unmountOnExit:!0},o.default.createElement(e.component,a({},t,e.additionalProps?e.additionalProps:{})))}))})),p.supportedRoutes.some((function(e){return e.test(t.pathname)}))?null:"/"===t.pathname?o.default.createElement(s.Route,{path:"/"},o.default.createElement(s.Redirect,{from:"/",to:p.blogRoute.path})):o.default.createElement(s.Route,{path:t.pathname},o.default.createElement(s.Redirect,{from:t.pathname,to:p.errorRoute.path})))}},2159:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArticleNavigation=void 0;var l=a(n(7294)),r=n(3338),i=(n(7487),n(9796)),o={following:{ca:"Següent",en:"Following"},previous:{ca:"Anterior",en:"Previous"},postsTimeline:{ca:"Històric de posts",en:"Posts timeline"}};t.ArticleNavigation=function(e){var t=function(t){return function(){e.onArticleNavigation(t)}};return l.default.createElement(l.default.Fragment,null,l.default.createElement("h3",{className:"posts-timeline"},o.postsTimeline[e.selectedLanguage]),l.default.createElement("div",{className:"article-links"},l.default.createElement("div",{className:"previous-link"},e.previousArticle&&l.default.createElement("span",{className:"link-text"},l.default.createElement(r.NavLink,{to:i.articleRoute.path.replace(":articleId",e.previousArticle.metadata.id),onClick:t(e.previousArticle.metadata.id)},"⬅️ ",o.previous[e.selectedLanguage]),l.default.createElement("div",{className:"title-preview"},e.previousArticle.content(e.selectedLanguage).title))),l.default.createElement("div",{className:"next-link"},e.nextArticle&&l.default.createElement("span",{className:"link-text"},l.default.createElement(r.NavLink,{to:i.articleRoute.path.replace(":articleId",e.nextArticle.metadata.id),onClick:t(e.nextArticle.metadata.id)},o.following[e.selectedLanguage]," ➡️"),l.default.createElement("div",{className:"title-preview"},e.nextArticle.content(e.selectedLanguage).title)))),"undefined"!=typeof navigator&&navigator.share&&l.default.createElement("div",{className:"share-button"},l.default.createElement("img",{src:"/images/share.png",onClick:function(){navigator.share({text:e.shareSentence,title:e.title,url:"".concat("https://capelski.github.io").concat(i.articleRoute.path.replace(":articleId",e.articleId))})}})))}},8062:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var l=Object.getOwnPropertyDescriptor(t,n);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,l)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Article=void 0;var i=r(n(7294)),o=n(3338),s=n(2159),u=n(9796);t.Article=function(e){var t=(0,i.useRef)(null),n=e.content(e.selectedLanguage);return i.default.createElement("div",{className:"article ".concat(e.metadata.id).concat(e.preview?"  preview-mode":""),onClick:e.preview?function(){var n;e.preview&&(null===(n=t.current)||void 0===n||n.click())}:void 0,lang:e.selectedLanguage},i.default.createElement("div",{className:"article-info"},e.preview?i.default.createElement("h3",{className:"article-title"},n.title):i.default.createElement("h2",{className:"article-title"},n.title),i.default.createElement("div",{className:"article-details"},i.default.createElement("span",{className:"article-date"},"📅 ",e.metadata.date),i.default.createElement("span",{className:"article-duration"},"🕐 ",e.metadata.duration," mins"),e.metadata.languages.map((function(t){return i.default.createElement("span",{key:t,className:e.preview?"":"article-language".concat(e.selectedLanguage===t?" selected-language":""),onClick:e.preview?void 0:function(){return e.setSelectedLanguage(t)}},"🌎 ",t)})))),i.default.createElement("div",{className:"article-body"},n.introduction,e.preview?null:"function"==typeof n.body?n.body({}):n.body,e.preview?i.default.createElement(o.NavLink,{ref:t,to:u.articleRoute.path.replace(":articleId",e.metadata.id),className:"programmatic-link"}):i.default.createElement(i.default.Fragment,null,i.default.createElement(s.ArticleNavigation,{articleId:e.metadata.id,shareSentence:n.shareSentence||n.description,onArticleNavigation:e.onArticleNavigation,nextArticle:e.nextArticle,previousArticle:e.previousArticle,selectedLanguage:e.selectedLanguage,title:n.title}))))}},3e3:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(974),i=n(1121);t.english={title:"Agility... rocks?",description:"Ice breaking exercise for groups of people applied in the context of an Agility training",introduction:l.default.createElement("p",null,"Last week we had an Agile Training in my company (Sage, in the Barcelona office). Usually I feel lazy about this kind of trainings because they focus on very abstract topics and also because the theory and practice of project management are as different as chalk and cheese, so I was expecting a boring couple of days sitting all together in a room stating the obvious and agreeing on how useful those methodologies are."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,"Aware of the skepticism he would find between the training audience, the trainer was wise enough to show up with an ice-breaker exercise to catch our very transient attention and make room for the highly necessary open mindset to face the topics we were about to discuss. In an attempt to make the training as quick as possible and not without a certain feeling of being about to waste our time, I volunteered when he asked for 8 people to complete the ice-breaker."),l.default.createElement("p",null,"In the end the exercise was fun and I felt it was a good excuse to start writing the blog I have been think of lately and that was worth sharing it with any eventual reader I might have. So, without further ado, here is a graphical representation of the exercise (a picture is worth a thousand words) drastically limited by my drawing skills on GIMP (so I should be happy if its worth anything more than two hundred):"),l.default.createElement(i.ArticleImage,{articleId:r.ArticleId.agilityRocks,alt:"Agility exercise representation",filename:"agile-exercise.png"}),l.default.createElement("p",null,"In short, the exercise consist of any even number of people (4 at least) standing in a circle facing inward. All the participants will first hold the left hand of the participant in front of them with their left hand and hold any other participant's right hand with their right hand, thus forming an interlaced closed circle. The goal of the team is to undo the interlaces without letting go of anyone's hands."),l.default.createElement("p",null,"We took 15 minutes to get to a \"better situation\" but in fact we never managed to solve the problem. The trainer insisted that it is possible and that probably we have someone in the group who isn't very familiar with the right and left concepts. In my opinion, if it hadn't have been for the duty calls of the training, we would still be stuck in that room trying to figure it out. On a final note, the exercise is worth giving it a shot and is totally fit for drinking game purposes."))}},8025:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.agilityRocks=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(3e3);t.agilityRocks={content:function(){return i.english},metadata:{category:a.ArticleCategory.offTopic,date:"2019-06-17",duration:2,id:l.ArticleId.agilityRocks,languages:[r.Language.en],shareImage:"agile-exercise.png"}}},4711:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Anchor=void 0;var l=a(n(7294));t.Anchor=function(e){return l.default.createElement("a",{href:e.url,target:"_blank"},e.children)}},6191:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(3338),i=n(9796),o=n(4711),s=n(974),u=n(1121);t.english={title:"Publishing an Android app to Play Store",description:"Detailed explanation on how to publish an Android app to Play Store",shareSentence:"Want to publish an Android app to Play Store? This is what it looks like in 2021",introduction:l.default.createElement("p",null,"So you just had that amazing idea for a killer mobile app. You know how to develop it and you have the motivation but you are not sure how hard it's gonna be to get it published on Play Store. Or maybe you don't have the idea yet, but still you wonder about how publishing a mobile app works. You came to the right article. This is what it looks like to upload an Android app to Play Store in January 2021."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,l.default.createElement("i",null,"Both App Store and Play Store require you to purchase a developer license. While Play Store's license is cheap ($25) and lasts forever, Apple's one is more expensive ($100), must be renewed every year and the upload process is more complicated. I recommend starting with Play Store, testing the app with some users in the production environment and once everything is ready,"," ",l.default.createElement(r.NavLink,{to:i.articleRoute.path.replace(":articleId",s.ArticleId.iosAppPublishing)},"move into App Store"),".")),l.default.createElement("h3",null,"Google Play Console"),l.default.createElement("p",null,"First things first. Once your app is ready to be uploaded you will need to create a Google Play Console developer account. To do so head to"," ",l.default.createElement(o.Anchor,{url:"https://play.google.com/console/about/"},"Google Play Console"),", click ",l.default.createElement("i",null,"Go to Play Console"),", sign in with your Google account, fill the form (the developer name doesn't need to be your legal name, you can use whatever you like), pay the $25 registration fee and you are good to start."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"Google Play console home",filename:"play-console-home.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"Google Play console sign up form",filename:"play-console-sign-up.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"Google Play Console dashboard",filename:"play-console-dashboard.png"}),l.default.createElement("p",null,"Once your account is created you will land into the Play Console dashboard. To upload your app you will first need to create one. Click on ",l.default.createElement("i",null,"Create app")," and fill the app details: name, language and type (if you select free app, you won't be able to change it after you've published the app)."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"Play Store app creation form",filename:"play-console-create-app.png"}),l.default.createElement("h3",null,"App content"),l.default.createElement("p",null,"After the app is created you will be directed to the app dashboard. There you will find a straightforward guide with the steps you need to take in order to setup the app. First, Google needs some information about your app content. This is:"),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App setup checklist",filename:"app-setup.png"}),l.default.createElement("ul",{className:"numbered"},l.default.createElement("li",null,l.default.createElement("b",null,"App access"),": If your app requires users to authenticate (e.g. creating an account or using an identity provider such as Facebook), you will need to provide demo credentials. Create a testing account in your app and add the username and password in the App access section."),l.default.createElement("li",null,l.default.createElement("b",null,"Ads"),": Whether your app contains ads or not. This setting is purely informative and won't change or restrict any aspect of your app. It will only display the Contains ads label on the app Play Store page. E.g:",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"Ads label example in Play Store",filename:"app-ads-label-example.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"Content rating"),":Questionnaire to receive official content ratings (e.g. PEGI, IARC, USK, etc.) for your app. Contains questions such as"," ",l.default.createElement("i",null,'"Does the app contain sexual material or nudity?"')," and"," ",l.default.createElement("i",null,'"Does the app contain any potentially offensive language?"'),". Play Store won't ban your app because of the questionnaire answers. It's all about understanding the content of the app and issuing the corresponding content rating, so stay calmed and be honest. It takes a while to complete it but it only must be done once for each app."),l.default.createElement("li",null,l.default.createElement("b",null,"Target audience"),": In this section you need to specify the age group your app is targeting. If your app is designed for children, you will need to take additional steps (e.g. uploading a Privacy Policy)."),l.default.createElement("li",null,l.default.createElement("b",null,"News app"),":Whether your app is a news app or not. If it is you will need to comply with the Google Play News policy.")),l.default.createElement("p",null,"If you need to make changes in any of these sections later, you can access them in the ",l.default.createElement("i",null,"App content")," section, at the end of the left menu:"),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App content section",filename:"app-content-section.png"}),l.default.createElement("h3",null,"Store presence"),l.default.createElement("p",null,"Now things get more interesting 😁 The store presence is the information that will be displayed on your app's page. You will need to choose a category for the app (e.g. productivity, dating, photography, etc.), provide a description for interested users to read and upload some app preview images (they can be screenshots or other images detailing the app's functionality) among others."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App store settings details",filename:"app-store-settings-1.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App store settings screenshots",filename:"app-store-settings-2.png"}),l.default.createElement("p",null,"A couple remarks:"),l.default.createElement("ul",null,l.default.createElement("li",null,"7-inch and 10-inch tablet screenshots are marked as mandatory fields but they are actually not mandatory"),l.default.createElement("li",null,"An app can have up to five tags and they are meant to help users finding your app. Choose the more relevant tags for your app, the ones that your target audience is probably interested in"),l.default.createElement("li",null,"A feature graphic image is required in order to publish the app. I still haven't figured out where this image is displayed but I did learn that they can be easily created with tools like this"," ",l.default.createElement(o.Anchor,{url:"https://www.norio.be/graphic-generator/"},"graphic generator"),". Get it done for now and you will worry about it later (if it does become a problem). This is an example from an app of mine:",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"Feature graphic example",filename:"app-feature-graphic.png"}))),l.default.createElement("p",null,"The store presence is something that evolves as your apps does and that you will be allowed to change after your app gets published (with the corresponding review by the Play Store team). Don't worry about getting it perfect from the start: a short description and some screenshots will do. Eventually you can refine your description and upload nice creativities such as Tinder's ones. For now, let's get your app released 🚀"),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"Tinder app store presence",filename:"tinder-store-presence.png"}),l.default.createElement("h3",null,"Release your app"),l.default.createElement("p",null,"Once completed all the previous steps you can go back to your app's dashboard and you will find the steps you need to follow to release the app. For the sake of simplicity I will skip the testing tracks and release the app straight to production. If you instead want to test the app with a small group of users first (which is usually a good idea), just follow the same steps for the corresponding testing track (and maybe read more about"," ",l.default.createElement(o.Anchor,{url:"https://support.google.com/googleplay/android-developer/answer/9845334?hl=en"},"testing tracks"),")."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App release checklist",filename:"app-release-steps.png"}),l.default.createElement("p",null,"Before rolling out the first release we need to choose which countries the app will be available in. There are no additional charges or consequences for selecting all the countries of the world so go ahead and do so if your app functionality is not limited to specific countries. Some countries might ban your app but, again, it has no consequences and you will find out as you go."),l.default.createElement("p",null,"After choosing the available countries we can proceed to create a new release. The first time you will need to configure how your app is signed. The recommended way is to let Google handle the signing process (is simpler and it enables publishing Android App Bundles, .aab files) but you can choose to provide your own key if you like."),l.default.createElement("p",null,"Almost there! We just need to upload the actual application file (.apk or .aab), review the release a name (it will be the application version by default), optionally provide some release notes and roll it out! The Play Store team will review your app and get back to you in a few days 💃"),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App's available countries",filename:"app-release-countries.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"Play Console app signing",filename:"app-signing.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App release files",filename:"app-release-files.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App release details",filename:"app-release-details.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App release final screen",filename:"app-release-roll-out.png"}),l.default.createElement("p",null,l.default.createElement("i",null,"In the final release screen Play Store displays errors and warnings found in your application file (.apk or .aab). In my case the warning states that I haven't uploaded a debug symbol file in order to analyse app errors.")),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App release being reviewed",filename:"app-release-in-review.png"}),l.default.createElement("h3",null,"Handling rejection"),l.default.createElement("p",null,"If the Play Store team doesn't encounter any issue with your app, they will publish it right after finishing the review. If they do encounter issues they will reject your app and write back to you with the reasons for the rejection. Don't panic though! The rejection is not permanent. It just means you are not compliant with some Google Play policy. You will need to go through the email and fix the reported issues."),l.default.createElement("p",null,"The rejection reasons will vary depending on the nature of your app. For example, if your app contains gambling simulation it will be automatically rejected in a number of countries."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App rejection notification due to gambling policies",filename:"gambling-rejection-reason.png"}),l.default.createElement("p",null,"A more common issue you might run into is displaying content in your app's page that is not suitable for all age groups. Even if your content rating is already warning about such content (which will prevent users below the age group from installing the app), the app's page is still accessible to all users. Therefore, your app's page must be suited for all audiences."),l.default.createElement("p",null,"For example, let's say your app has a PEGI 16 content rating because it uses potentially offensive language. If you include offensive language in the app's page (e.g. in the description or in the app screenshots), your app will get rejected. This is what the Play Store rejection mail looks like:"),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App rejection email",filename:"app-rejection-email.png"}),l.default.createElement("p",null,"Luckily the rejection reasons are explained in a clear manner, even including an image of the app screenshot that doesn't comply with the metadata if that's the case. In this case (in spanish) the Play Store team even highlighted the offensive word:"),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"Rejected app screenshot",filename:"app-rejected-screenshot.png"}),l.default.createElement("p",null,"Don't lose heart, spend some time fixing the issues and eventually you will get an email stating that your app is now published 🍾"),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.androidAppPublishing,alt:"App published notification email",filename:"app-published-email.png"}))}},442:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.androidAppPublishing=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(6191);t.androidAppPublishing={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2021-01-03",duration:8,id:l.ArticleId.androidAppPublishing,languages:[r.Language.en],shareImage:"play-console-home.png"}}},7171:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AllArticleCategories=t.ArticleCategory=void 0,function(e){e.tech="💻 Tech",e.offTopic="🕹️ Off-topic"}(n||(t.ArticleCategory=n={})),t.AllArticleCategories=Object.values(n)},974:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ArticleId=void 0,function(e){e.agilityRocks="agility-rocks",e.leakedApiKey="leaked-api-key",e.meaningOfLife="meaning-of-life",e.fourCoinChallenge="four-coin-challenge",e.progressiveWebApps="progressive-web-apps",e.existentialInjustice="existential-injustice",e.subscribersList="subscribers-list",e.kanbanGoalsTracking="kanban-goals-tracking",e.trecember="trecember",e.webDevOnSteroidsI="web-dev-on-steroids-i",e.webDevOnSteroidsII="web-dev-on-steroids-ii",e.provinencaDesconeguda="provinenca-desconeguda",e.sudokuGeneration="sudoku-generation",e.persuasionInPictures="persuasion-in-pictures",e.stadiaPlatform="stadia-platform",e.webBadDecisions="web-bad-decisions",e.linearGradient="linear-gradient",e.expressOnGoogleCloud="express-on-google-cloud",e.npmPackagesDevelopment="npm-packages-development",e.wordpressOnGoogleCloud="wordpress-on-google-cloud",e.androidAppPublishing="android-app-publishing",e.iosAppPublishing="ios-app-publishing",e.reactNativeFirebaseAuth="react-native-firebase-auth",e.expoSocialSignIn="expo-social-sign-in",e.expoPushNotifications="expo-push-notifications",e.typescriptMonorepo="typescript-monorepo",e.expressTypedApi="express-typed-api",e.webRTC="web-rtc",e.typescriptMonorepoII="typescript-monorepo-ii",e.typedWebApi="typed-web-api",e.otfMigrations="otf-migrations",e.webApiProxyMigration="web-api-proxy-migration",e.minimalisticTranslation="minimalistic-translation"}(n||(t.ArticleId=n={}))},1121:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var l=Object.getOwnPropertyDescriptor(t,n);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,l)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ArticleImage=void 0;var i=r(n(7294));t.ArticleImage=function(e){var t=(0,i.useState)(!1),n=t[0],a=t[1];return i.default.createElement("div",null,i.default.createElement("img",{className:"article-image".concat(e.footer?" with-footer":"").concat(n?" image-placeholder":"").concat(e.className?" "+e.className:""),src:"/images/blog/".concat(e.articleId,"/").concat(e.filename),alt:e.alt||e.footer,onError:function(){a(!0)}}),e.footer?i.default.createElement("p",{className:"article-image-footer"},e.footer):null)}},4856:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArticleVideo=void 0;var l=a(n(7294));t.ArticleVideo=function(e){return l.default.createElement("video",{controls:!0,width:"100%",className:"article-video ".concat(e.className?e.className:""),src:"/images/blog/".concat(e.articleId,"/").concat(e.filename)})}},8892:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSnippet=void 0;var l=a(n(7294));t.BlockSnippet=function(e){return l.default.createElement("div",{className:"article-block-snippet"},e.children)}},4173:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectoryView=void 0;var l=a(n(7294));t.DirectoryView=function(e){return l.default.createElement(l.default.Fragment,null,e.directoryName||"root",l.default.createElement("br",null),l.default.createElement(r,{parentPrefix:"",structure:e.structure}))};var r=function(e){var t=Object.keys(e.structure);return l.default.createElement(l.default.Fragment,null,t.map((function(n,a){var i=e.structure[n],o="object"==typeof i,s=a===t.length-1,u="".concat(e.parentPrefix).concat(s&&o?"   ":"|  ");return l.default.createElement(l.default.Fragment,{key:n},e.parentPrefix,o?"📂 ":"📝 ",n,l.default.createElement("br",null),"object"==typeof i?l.default.createElement(r,{parentPrefix:u,structure:i}):void 0)})))}},2774:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.catalan=void 0;var l=a(n(7294)),r=n(974),i=n(1121);t.catalan={title:"Injustícia existencial",description:"Reflexió sobre la sensació de falta de propòsit que sentim a vegades",introduction:l.default.createElement("p",null,"Has quedat amb algú. Potser uns amics. Potser una cita. Potser la teva parella. Potser un grup de gent que fa poc que coneixes. Les primeres hores flueixen i t'ho passes bé. Arriba un punt que la situació es refreda una mica. El grau de connexió amb les altres persones baixa. Encara parleu i rieu, però notes que no t'omple de la mateixa manera que altres vegades."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,"Comences a sentir que podries estar fent alguna altra cosa, aprofitar millor el temps d'una altra manera. Dedicar-te unes hores a aquell projecte personal que estàs ajornant o allargant. Potser acabar el llibre que estàs llegint. Potser anar al gimnàs. Potser començar la teva carrera com a novel·lista. Intentes descartar la idea i centrar-te en el moment. Poses una mica més d'èmfasi en recuperar la sinergia amb les persones que estàs."),l.default.createElement("p",null,"Passa una altra hora i t'adones que esteu cansats o que teniu el cap a una altra banda. Així no és com t'havies imaginat que aniria la tarda. Decideixes tornar a casa i treure profit al que queda de dia. És dissabte a les 19. Potser encara falta estona perquè es faci fosc. Potser ja fa estona que el sol s'ha post. De totes maneres, tens temps de posar-t'hi."),l.default.createElement("p",null,"Tanmateix, el teu cervell no està per la labor. Demà t'has compromès a assistir a una activitat. Potser anar a un parc d'atraccions. Potser una barbacoa. Potser un dinar amb la família de la teva parella. En qualsevol cas, ara tens la ment ocupada quantificant el nivell de mandra que et provoca aquest compromís. Preveus que tornaràs tard a casa, exhaust, i que, una vegada més, t'adonaràs que ha passat el cap de setmana volant i que segueixes en el mateix punt on estaves el diumenge anterior."),l.default.createElement("p",null,l.default.createElement("b",null,"Fins i tot si ara poguessis dedicar una estona al teu projecte, no podries avançar prou"),". Els quatre forats al mes que trobes no són suficients per aconseguir el teu objectiu. I encara que ara aconseguissis espolsar-te la mandra de sobre,",l.default.createElement("b",null,"estàs a un nivell energètic molt inferior del que necessites per progressar"),". No. Definitivament, avui no és el dia. T'entregues a la sensació d'impotència i et passes les hores que li queden a la tarda jugant a videojocs o mirant l'útlima sèrie de Netflix."),l.default.createElement("p",null,l.default.createElement("b",null,"Notes que el temps se t'escapa de les mans i no aconsegueixes fer res transcendental amb la teva vida"),". És una sensació aclaparadora, però no és culpa teva que et sentis així. Prens notes mentals de determinació i decideixes que el cap de setmana que ve t'hi posaràs. Merda. El cap de setmana que ve és el de l'excursió a la muntanya que fa més d'un mes que heu organitzat. No és que no et vingui de gust. De fet, en tens moltes ganes. Però et preguntes quan tindràs temps per tu. Per què les estrelles s'alineen i no trobes mai l'espai que necessites per dedicar-te a les teves ambicions? Tens tantes coses per aportar al món..."),l.default.createElement("p",null,"Ha passat la tarda sense pena ni glòria. Si no et comences a fer el sopar aviat, aniràs a dormir a les tantes i demà no t'aguantaràs. Però tant se val. Sembla que no tens cap poder real sobre el curs dels esdeveniments. No tens ganes de fer res. No tens energia. No és just. A la merda el cansament de demà."),l.default.createElement("p",null,"Truques a un restaurant amb servei a domicili i demanes que et portin el sopar. Si aquest és l'únic temps lliure que tindràs no te'l penses passar cuinant i rentant plats. Et miraràs un capítol més de la sèrie mentre esperes la pizza. El sopar triga a arribar. Hi ha més gent en la mateixa situació que tu i els restaurants no donen l'abast. Acabes ficant-te al llit més tard del que voldries i preguntant-te on coi han anat totes les hores lliures que tenies."),l.default.createElement("p",null,"\"Ja n'hi ha prou! T'has de centrar\", et dius una vegada més. Durant la setmana següent començaràs a donar formar a alguna mesura dràstica per recuperar el control de la teva vida. Potser cancel·lar la subscripció de Netflix. Potser desapuntar-te de les classes de taekwondo. Potser deixar la teva parella. Sigui el que sigui, trobaràs un responsable de la teva falta d'organització."),l.default.createElement(i.ArticleImage,{articleId:r.ArticleId.existentialInjustice,alt:"Enough meme",filename:"enough.gif"}),l.default.createElement("p",null,"Si mai t'has sentit així, benvingut al món real. Tots tenim dies en què la procrastinació s'apodera de nosaltres i no trobem ganes de fer res. Acabo l'entrada analitzant algunes de les sensacions que he descrit. Potser recordaràs alguna cosa en el teu proper episodi d'injustícia existencial i t'ajudarà a treure importancia a la situació. Potser te n'oblidaràs demà. Potser ja fa estona que has deixat de llegir. En qualsevol cas, aquí van les reflexions."),l.default.createElement("p",null,l.default.createElement("b",null,"1) Fins i tot si ara poguessis dedicar una estona al teu projecte, no podries avançar prou"),". No et preocupis per l'objectiu final. Sigui quin sigui el teu projecte, l'has triat perquè t'agrada o perquè aprens mentre hi treballes. Potser no arribaràs a ser el proper Michael Phelps, però si gaudeixes nedant, ves a fer piscines quan puguis i oblida't de la resta."),l.default.createElement("div",{className:"article-quote"},l.default.createElement("h4",null,"❝Un objectiu no sempre es marca per aconseguir-lo, sovint serveix només per tenir una direcció cap on apuntar❞"),l.default.createElement("h4",null,"Bruce Lee")),l.default.createElement("p",null,"També pots fer l'exercici de rebaixar les expectatives que hi tens posades. Assumir que completaràs el projecte per sota dels estàndards que t'havies proposat. Sovint la sensació de no poder avançar prou apareix quan l'objectiu sembla estar massa lluny. Busca una manera de completar-lo d'una forma més simple (deixa les cançons de Metallica per més endavant, i comença amb una base senzilla dels U2)."),l.default.createElement("p",null,"Potser aconseguiràs acabar-lo d'una forma simplificada. Després, si encara no en tens prou amb el resultat, sempre pots seguir-hi treballant per arribar a la meta original. També pot ser que t'adonis que no necessites el nivell d'excel·lència que havies imaginat en un primer moment. De totes maneres, completar un objectiu encara que sigui petit et donarà una bona dosi de motivació i et farà sentir bé."),l.default.createElement("p",null,l.default.createElement("b",null,"2) Estàs a un nivell energètic molt inferior del que necessites per progressar"),". Ningú és constant. Potser la feina que facis avui no serà la millor, però t'ajudarà a desbloquejar una etapa de l'objectiu que et provoca més mandra que la resta (sinó, no estaries ara mateix mirant el sostre i esperant que et baixin del cel les ganes de treballar-hi). Segueix avançant en el projecte i, si fa falta, ja faràs les correccions pertinents el dia que estiguis inspirat."),l.default.createElement("p",null,l.default.createElement("b",null,"3) Notes que el temps se t'escapa de les mans i no aconsegueixes fer res transcendental amb la teva vida"),". A vegades aquesta sensació és causada més per no tenir clar quins objectius són realment transcendentals que no pas per no poder progressar amb un objectiu concret. Pensa si de veritat t'omple treballar en el projecte que tens al cap, si et fa feliç. Surt a passejar tot sol i no tornis a casa fins que no tinguis una resposta. O, almenys, fins que t'hagis desfet d'aquesta sensació."),l.default.createElement("p",null,"Això és tot per avui 👍 Fins al proper post!"))}},9345:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(974),i=n(1121);t.english={title:"Existential injustice",description:"Thoughts about the lack of life purpose that we feel sometimes",introduction:l.default.createElement("p",null,"You are meeting somebody. Maybe some friends. Maybe a date. Maybe your partner. Maybe a group of people you have recently started to hang out with. The first hours go by and you are having fun. You get to a point where the situation cools down. The connection level with the others decreases. You are still talking and laughing, but it doesn't fill you in the same way past occasions did."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,"You start feeling you could be doing something else, that you could be making better use of your time. Dedicate a couple of hours to that personal project you are postponing or unnecessary extending over time. Maybe finish the book you are reading. Maybe go to gym. Maybe start your novelist career. You try to forget about the feeling and focus in the moment. You put a bit more emphasis in restoring the synergy between you and the people who you are with."),l.default.createElement("p",null,"Another hour goes by and you realize that all of you are tired or your minds are somewhere else. This is not the way you had pictured the afternoon. You decide to go back home and make use of the rest of the day. It is 19:00 on a Saturday. Maybe there is much time left before it gets dark. Maybe the sun has already set a while ago. Anyway, you are on time to focus and start the good work."),l.default.createElement("p",null,"Your brain doesn't seem to want to cooperate however. You arranged an activity for tomorrow. Maybe going to an amusement park. Maybe a barbecue. Maybe having launch with your partner's family. In any case, your mind is now busy quantifying how lazy this commitment makes you feel. You are foreseeing you will get home late, exhausted and, once more, to realize the weekend has just flew by and you still in the same point you were the previous Sunday."),l.default.createElement("p",null,l.default.createElement("b",null,"Even if you would manage to allocate some time to your project now, you wouldn't progress enough"),". The few time slots you find on a monthly basis are not enough to complete your project. Also, based in the assumption that you could overcome the laziness now,",l.default.createElement("b",null,"your energy levels are way below the ones you need to work properly on it"),". No. Definitely today is not the day. You give in to the impotence feeling and spend the rest of the day playing videogames or watching the latest Netflix TV show."),l.default.createElement("p",null,l.default.createElement("b",null,"You feel the time is running out and you don't get to make anything transcendent with your life"),". It's an overwhelming situation but it is not your fault you feel like that. You take mental notes and you decide the next weekend will be the one. Next weekend you will fully commit to your personal projects."),l.default.createElement("p",null,"Damn. Next weekend is the mountain excursion you arranged a month ago. Is not that you don't feel like going. In fact, you are eager to go. But you wonder when you will have time for yourself. Why do stars align and you never get to find the space you need to work on your ambitions? You have so much to contribute to the world..."),l.default.createElement("p",null,"The afternoon has passed almost unnoticed. If you don't start cooking dinner soon you will go to bed late and tomorrow you will feel tired all day. But, what does it matter? You seem not to have any power over the course of events. You don't feel like doing anything. You don't have energy. Is not fair. Fuck tomorrow's tiredness."),l.default.createElement("p",null,"You call a takeaway and order dinner. If this is the only free time you will have, you will not spend it cooking and doing the dishes. You watch another episode of the TV show while you wait for the pizza. The food takes it's time. There is a bunch of people out there in the same situation you are, and restaurants can't handle it. You end up going to bed later than you expected and wondering where have all your free hours gone."),l.default.createElement("p",null,'"That is enough! You need to focus", you tell yourself again. Over next week you will start shaping some drastic measures to get the control of your life back. Maybe canceling the Netflix subscription. Maybe unrolling the taekwondo lessons. Maybe dumping your partner. Whatever it is, you will find a responsible for your lack of organization.'),l.default.createElement(i.ArticleImage,{articleId:r.ArticleId.existentialInjustice,alt:"Enough meme",filename:"enough.gif"}),l.default.createElement("p",null,"If you've ever felt like this, welcome to the real world. All of us have days in which procrastination takes over and we don't find the energy to do anything. I'm finishing the post by analyzing some of the sensations I've described. Maybe you will remember something in your next existential injustice episode and it will help you to worry less about it. Maybe you will have forgotten everything by tomorrow. Maybe you have stopped reading a while ago. In any case, here come the thoughts."),l.default.createElement("p",null,l.default.createElement("b",null,"1) Even if you would manage to dedicate some time to your project now, you wouldn't progress enough"),". Don't worry about the final goal. Whichever your project is, you chose it because you like it or because you learn while working on it. Maybe you won't become the next Michael Phelps, but if you enjoy it, go swimming whenever you can and forget about the rest."),l.default.createElement("div",{className:"article-quote"},l.default.createElement("h4",null,"❝A goal is not always meant to be reached, it often serves simply as something to aim at❞"),l.default.createElement("h4",null,"Bruce Lee")),l.default.createElement("p",null,"You can also try lowering the expectations you have put on it. Assume that you will complete the project below the standards you had set. Often the feeling of not being able to make enough progress comes when the goal seems to hard to reach. Search for a way to achieve it in a simpler manner (keep the Metallica songs for later and settle with the base of a U2 simple one for now)."),l.default.createElement("p",null,"Maybe you will be able to finish it in a simplified shape. Afterwards, if you are not happy enough with the result, you can always keep working on it to reach the original goal. You might also realise that you are happy without the excelence level you were chasing in first place. Anyway, completing a goal will give you a motivation boost and will make you feel good regardless its size."),l.default.createElement("p",null,l.default.createElement("b",null,"2) Your energy levels are way below the ones you need to work properly on it"),". Nobody is regular. Probably today's work won't be the best one you will have ever made. But it will help you unlocking the current stage of the project, which is making you lazier than other stages (otherwise, you wouldn't be staring at the sky now trying to find the power of will to work on it). Keep progressing with the project and, if needed, you will apply the corresponding corrections when you feel more inspired."),l.default.createElement("p",null,l.default.createElement("b",null,"3) You feel the time is running out and you don't get to make anything transcendent with your life"),". Sometimes this feeling is caused more by not having clear which goals are really transcendent and worth chasing rather than not being able to progress with a specific one. Think whether it makes you feel realized to work on the project you have in mind, whether it makes you happy or not. Go for a walk alone and don't come back home until you find the answer. Or, at least, until you cleared your mind a bit."),l.default.createElement("p",null,"That's all for today 👍 See you in the next post!"))}},8555:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.existentialInjustice=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(2774),o=n(9345);t.existentialInjustice={content:function(e){return e===r.Language.ca?i.catalan:o.english},metadata:{category:a.ArticleCategory.offTopic,date:"2019-08-28",duration:5,id:l.ArticleId.existentialInjustice,languages:[r.Language.ca,r.Language.en]}}},3985:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121),u=n(8892),c=n(5922);t.english={title:"First-class push notifications for Expo apps",description:"How to implement push notifications in Expo managed apps",shareSentence:"That's how easy it is to bring push notifications to your Expo app!",introduction:l.default.createElement("p",null,"So the time has come for your brilliant Expo app to start delivering push notifications. You've had a look at the multiple options available and still you are unsure which one to go for. Regardless where you are at now this is all you need to know before implementing push notifications on your managed Expo app and how to do so in August 2021."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("h3",null,"Introduction"),l.default.createElement("h4",null,"Notification gateways"),l.default.createElement("p",null,"Ultimately notifications reach users' devices through push notification gateways: FCM (Firebase Cloud Messaging) for Android devices and APNs (Apple Push Notification service) for iOS devices. Both gateways are services that expose a Web API for sending push notifications to users through HTTP requests."),l.default.createElement("p",null,"We don't need to know more about these gateways but using them is the only way to deliver push notifications to our users. We will need to configure both FCM and APNs credentials and call their APIs for our app to successfully deliver notifications."),l.default.createElement("h4",null,"Push tokens"),l.default.createElement("p",null,"A push token is a unique key that identifies an app installed in a specific device. Push tokens are issued by the Apple or Google push notification gateways and allow delivering the messages only to the intended app-device combination. Their format changes depending on the operating system but they look something like"," ",l.default.createElement(c.InlineSnippet,null,"03df25c845d460b...f99cc3edcb63a85ea2ef2"),"."),l.default.createElement("h4",null,"Server side requirements"),l.default.createElement("p",null,"Any form of messaging involves a sender and a receiver and, in addition, the sender needs to know the receiver's ID in order to locate them. When it comes to push notifications the receiver's ID is their push token."),l.default.createElement("p",null,"Users' push tokens will therefore need to be collected and stored somewhere prior to sending users notifications. While this doesn't necessarily mean you will need a backend server you will certainly need a trusted environment in which to store the push tokens and call the notification gateways API."),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expoPushNotifications,filename:"push-token-collection.png",footer:"Push token collection"}),l.default.createElement("p",null,"If you are already leveraging a backend infrastructure it's definitely a good place to handle the notification-related operations. If you don't have such infrastructure and you want to keep it simple you can use serverless solutions."),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expoPushNotifications,filename:"push-token-notification.png",footer:"Sending a push notification to a specific push token"}),l.default.createElement("p",null,l.default.createElement("i",null,"Notifications can also be sent to the entire audience of the app. If you don't need to send notifications to specific users you can then skip collecting push tokens and setting up a server side environment to send notifications from and use a graphical notifications composer tools instead (e.g. Firebase notification composer).")),l.default.createElement("h3",null,"Technical considerations"),l.default.createElement("h4",null,"Push tokens collection: The Expo way"),l.default.createElement("p",null,"Expo provides a great module for setting up and handling push notifications which not only works like a charm but it is also magnifically documented:",l.default.createElement(c.InlineSnippet,null,"expo-notifications"),". This is the module I'm going to be using to handle push notifications on the client side and it provides two different methods for collecting push tokens:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,l.default.createElement(i.Anchor,{url:"https://docs.expo.dev/versions/latest/sdk/notifications/#getdevicepushtokenasync-devicepushtoken"},"getDevicePushTokenAsync")),": This method returns the device native push token, different for iOS and Android, and that's the token we will need to use when communicating directly with the notification gateways"),l.default.createElement("li",null,l.default.createElement("b",null,l.default.createElement(i.Anchor,{url:"https://docs.expo.dev/versions/latest/sdk/notifications/#getexpopushtokenasyncoptions-expotokenoptions-expopushtoken"},"getExpoPushTokenAsync")),": This method returns an Expo push token (something like"," ",l.default.createElement(c.InlineSnippet,null,"ExponentPushToken[lBc...ZsM]"),"), a custom token that Expo push notifications service uses to deliver notifications instead of the native push tokens. This is the method we need to use when using Expo's service")),l.default.createElement("h4",null,"Push tokens collection: The Firebase way"),l.default.createElement("p",null,"Firebase includes a messaging module that can be used to manage push notifications. According to the"," ",l.default.createElement(i.Anchor,{url:"https://firebase.google.com/docs/cloud-messaging/js/client"},"Firebase documentation"),", ",l.default.createElement(c.InlineSnippet,null,"messaging.getToken")," is the function we need to call in order to retrieve the device push token, which will first ask for notification permissions in case they have not been granted yet."),l.default.createElement("p",null,"Unfortunately the Firebase messaging module is not compatible with React native 💔 Long story short trying to call the messaging module will result in an unhandled exception (more details about this issue in this"," ",l.default.createElement(i.Anchor,{url:"https://stackoverflow.com/questions/61300018/typeerror-firebase-default-messaging-is-not-a-function-in-firebase-default-m/64855286#64855286"},"stackoverflow question"),")."),l.default.createElement(u.BlockSnippet,null,"firebase.default.messaging is not a function. (In '_firebase.default.messaging()', '_firebase.default.messaging' is undefined)",l.default.createElement("br",null),"  ","at App.tsx:34:4 in <global>",l.default.createElement("br",null),"  at node_modules\\metro\\src\\lib\\polyfills\\require.js:321:11 in loadModuleImplementation",l.default.createElement("br",null),"  ","at node_modulesexpoAppEntry.js:3:0 in <global>",l.default.createElement("br",null),"  - ... 4 more stack frames from framework internals"),l.default.createElement("h4",null,"Expo push notifications service"),l.default.createElement("p",null,"While communicating directly with the notification gateways Web APIs is a totally acceptable way of sending push notifications I'm going to be using a different approach in this article. As explained in the"," ",l.default.createElement(i.Anchor,{url:"https://docs.expo.dev/push-notifications/sending-notifications-custom"},"Expo docs")," ","notification gateways direct communication requires handling certain complexity:"),l.default.createElement("ul",null,l.default.createElement("li",null,"Differentiating between native iOS & Android device tokens"),l.default.createElement("li",null,"Twice the amount of code to write and maintain"),l.default.createElement("li",null,"FCM and APNs responses error handling")),l.default.createElement("p",null,"We could of course handle such complexity but Expo happens to provide an iOS-agnostic push notification service that does handle it already. Plus we will be using ",l.default.createElement(c.InlineSnippet,null,"expo-notifications")," to handle notifications on the client side so I feel using the Expo push notifications service makes a lot of sense (e.g. the notification ",l.default.createElement(c.InlineSnippet,null,"data")," is automatically serialized and deserialized by Expo on both ends). This is how the service works:"),l.default.createElement(s.ArticleImage,{alt:"Expo push notifications service diagram",articleId:o.ArticleId.expoPushNotifications,filename:"expo-push-notifications-diagram.png"}),l.default.createElement("h3",null,"Use case"),l.default.createElement("p",null,"Before start coding we will need a use case for push notifications. Let's say we will create an app that allows users to subscribe to daily weather notifications. For the sake of simplicity we will start with a single city (e.g. Barcelona 🕶️) and notifications will always be sent at the same hour (e.g. 8:00 am)."),l.default.createElement("p",null,'Apart from the subscribe/unsubscribe buttons the app will also include a "Send" button to receive a test notification on user demand. Users will be anonymous: we will only store users\' ExpoPushToken so we can identify the devices that need to be notified on the scheduled time.'),l.default.createElement("p",null,"Upon notification received/clicked the app will display the notification content (I'll use a JSON Viewer for illustrative purposes) and a button to clear the notification out. The ExpoPushToken is also displayed so that user can use the"," ",l.default.createElement(i.Anchor,{url:"https://expo.dev/notifications"},"Expo notifications tool")," to send test notifications to his own device."),l.default.createElement("p",null,"Because it's a demonstration only app we don't need to spend much time styling it."),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(s.ArticleImage,{alt:"App use case screenshot 1",articleId:o.ArticleId.expoPushNotifications,className:"image-300",filename:"use-case-screen-1.png"}),l.default.createElement(s.ArticleImage,{alt:"App use case screenshot 2",articleId:o.ArticleId.expoPushNotifications,className:"image-300",filename:"use-case-screen-2.png"})),l.default.createElement("h3",null,"Implementation: client side"),l.default.createElement("p",null,"Handling push notifications on Expo is fairly simple. Let's go ahead and install the Expo notifications module. We will be using this module to:"),l.default.createElement(u.BlockSnippet,null,"expo install expo-notifications"),l.default.createElement("ul",null,l.default.createElement("li",null,"Display received notifications. When a notification is received Expo calls the",l.default.createElement(c.InlineSnippet,null,"handleNotification")," function parameter we pass to",l.default.createElement(c.InlineSnippet,null,"Notifications.setNotificationHandler")," to decide whether the notification must be shown to the user"),l.default.createElement("li",null,"Update the app on notification received. Only if the app is ",l.default.createElement("b",null,"foregrounded")," ","when a notification is received Expo will run the callback provided through",l.default.createElement(c.InlineSnippet,null,"Notifications.addNotificationReceivedListener")),l.default.createElement("li",null,"Update the app on notification clicked. When the user clicks on a notification Expo will launch the app and run the callback provided through"," ",l.default.createElement(c.InlineSnippet,null,"Notifications.addNotificationResponseReceivedListener")),l.default.createElement("li",null,"Get the device push token")),l.default.createElement("p",null,"For the following snippet to be as simple as possible I have extracted the server related functions in a separate file (i.e."," ",l.default.createElement(c.InlineSnippet,null,"server-operations.ts"),") and I have omitted all style tags."),l.default.createElement(r.default,{id:"f5713a2e5cd2a783ac58f23bbe8de8e4"}),l.default.createElement("p",null,"We then need to tweak the ",l.default.createElement(c.InlineSnippet,null,"app.json")," file a bit by adding the ",l.default.createElement(c.InlineSnippet,null,"NOTIFICATIONS")," permission and setting the"," ",l.default.createElement(c.InlineSnippet,null,"android.useNextNotificationsApi")," to"," ",l.default.createElement(c.InlineSnippet,null,"true"),"."),l.default.createElement(r.default,{id:"e7617025298dbcc97ded69947acfbbc0"}),l.default.createElement("p",null,"And that's all we need to get notifications working on the Expo Go client 🍾 You can test them now by using the"," ",l.default.createElement(i.Anchor,{url:"https://expo.dev/notifications"},"Expo notifications tool"),", providing the ExpoPushToken that will be displayed in the app. Pressing the buttons on the app will not work until we implement the server side."),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(s.ArticleImage,{alt:"Expo notification tool send form",articleId:o.ArticleId.expoPushNotifications,filename:"expo-notifications-tool-form.png"}),l.default.createElement(s.ArticleImage,{alt:"Received notification from Expo notification tool",articleId:o.ArticleId.expoPushNotifications,className:"image-300",filename:"expo-notifications-tool-received.png"})),l.default.createElement("p",null,"About ",l.default.createElement(c.InlineSnippet,null,"server-operations.ts"),", notice that server related operations will depend largely on the server side choices. Here is what the operations can look like when using Firebase Realtime database and Firebase Functions on the server side (omitting error management)."),l.default.createElement(r.default,{id:"62e0dedda61461e6beaa138200e05b6c"}),l.default.createElement("p",null,"Let's get ready for release now 🚀 When testing notifications in the Expo Go client we use Expo's FCM and APNs credentials but that's not going to do the trick when releasing the app. The next thing we need to do to get the push notifications working on a release version of our app (e.g. standalone version) is to configure and add both FCM and APNs credentials to the Expo app."),l.default.createElement("h4",null,"Configuring APNs"),l.default.createElement("p",null,"Since we are building on Expo it turns out to be really easy to configure APNs. All we need to do is launching the Expo credentials manager and choose from the options on the list."),l.default.createElement(u.BlockSnippet,null,"expo credentials:manager",l.default.createElement("br",null),l.default.createElement("br",null),"Accessing credentials for ","<...>"," in project expo-notifications-tutorial",l.default.createElement("br",null),l.default.createElement("br",null),"? Select platform › — Use arrow-keys. Return to submit.",l.default.createElement("br",null),"❯ ios",l.default.createElement("br",null),"android",l.default.createElement("br",null),l.default.createElement("br",null),"? What do you want to do? › - Use arrow-keys. Return to submit.",l.default.createElement("br",null),"❯ Use existing Push Notifications Key in current project",l.default.createElement("br",null),"Use existing Distribution Certificate in current project",l.default.createElement("br",null),"Remove Provisioning Profile",l.default.createElement("br",null),"Add new Push Notifications Key",l.default.createElement("br",null),"Remove Push Notification credentials",l.default.createElement("br",null),"Update Push Notifications Key",l.default.createElement("br",null),"Add new Distribution Certificate",l.default.createElement("br",null),"Remove Distribution Certificate",l.default.createElement("br",null),"Update Distribution Certificate"),l.default.createElement("p",null,l.default.createElement("i",null,'If you get a "CommandError: Input is required, but Expo CLI is in non-interactive mode." error you will need to use a different command line utility. In my case, developing on Windows 10, the Windows Subsystem for Linux was the only terminal that did the trick.')),l.default.createElement("p",null,"Here you will want to use an existing push notifications key for your Expo app in case you have one. Be aware that you can only have two push notifications keys for the same Apple Developer account and those keys will be used across all of your apps."),l.default.createElement("p",null,"Only create a new push notification key if you don't have any for your current Apple Developer account. Trying to create a third push notification key will result in an error message both from the Expo credentials manager and the Apple Developer Portal."),l.default.createElement(u.BlockSnippet,null,"✖ Failed to create Apple push key",l.default.createElement("br",null),"CommandError:",l.default.createElement("br",null),"You can have only two Apple Keys generated on your Apple Developer account.",l.default.createElement("br",null),"Please revoke the old ones or reuse existing from your other apps.",l.default.createElement("br",null),"Please remember that Apple Keys are not application specific!",l.default.createElement("br",null)),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expoPushNotifications,filename:"apple-developer-portal-apns-key.png",footer:"Apple Developer Portal error message"}),l.default.createElement("p",null,"Regardless reusing an existing key or creating a new one at the end of the process you should see a similar message to the one below. You can also check the"," ",l.default.createElement("b",null,"Credentials")," section of your app in"," ",l.default.createElement(i.Anchor,{url:"https://expo.dev/"},"https://expo.dev/"),"."),l.default.createElement(u.BlockSnippet,null,"Successfully assigned Push Notifications Key to <...>/expo-notifications-tutorial (expo.notifications.tutorial)"),l.default.createElement(s.ArticleImage,{alt:"APNs key in Expo credentials section",articleId:o.ArticleId.expoPushNotifications,filename:"expo-credentials-apns-key.png"}),l.default.createElement("p",null,"You will need to rebuild the app for iOS,"," ",l.default.createElement(c.InlineSnippet,null,"expo build:ios"),", at least once after having added the push notification key for the changes to take effect."),l.default.createElement("h4",null,"Configuring FCM"),l.default.createElement("p",null,"As stated in the Expo documentation we need to link a Firebase project to our Expo app in order to use FCM. This doesn't mean you will need to migrate your app to Firebase at all, but you do will need to create a Firebase project and add the Firebase credentials to your Expo app. Straight from"," ",l.default.createElement(i.Anchor,{url:"https://docs.expo.dev/push-notifications/using-fcm/"},"this page of the Expo docs"),":"),l.default.createElement("ul",null,l.default.createElement("li",null,"Choose your Firebase project. Either create a new project or use an already existing one. In both cases you will need to have Firebase added to your Android app (using the ",l.default.createElement(c.InlineSnippet,null,"android.package")," value of your"," ",l.default.createElement(c.InlineSnippet,null,"app.json")," file)",l.default.createElement(s.ArticleImage,{alt:"Adding Firebase to the Android app",articleId:o.ArticleId.expoPushNotifications,filename:"firebase-android-app.png"})),l.default.createElement("li",null,"Download the ",l.default.createElement(c.InlineSnippet,null,"google-services.json")," file of your Firebase app and place it in your Expo app's root directory. It's a good idea to exclude this file from source control",l.default.createElement(s.ArticleImage,{alt:"Downloading Firebase google-services.json file",articleId:o.ArticleId.expoPushNotifications,filename:"firebase-google-services.png"})),l.default.createElement("li",null,"In your ",l.default.createElement(c.InlineSnippet,null,"app.json")," file add an"," ",l.default.createElement(c.InlineSnippet,null,"android.googleServicesFile")," field with the relative path to the ",l.default.createElement(c.InlineSnippet,null,"google-services.json")," file you just downloaded",l.default.createElement(r.default,{id:"825ea2eb3d9a2bd94af5c936ed97dbb4"})),l.default.createElement("li",null,"Rebuild the app for Android, ",l.default.createElement(c.InlineSnippet,null,"expo build:android"),", for the changes to take effect")),l.default.createElement("p",null,l.default.createElement("i",null,"Skip the previous steps if you are already using Firebase in your app and you have previously added the ",l.default.createElement(c.InlineSnippet,null,"google-services.json")," ","file.")),l.default.createElement("p",null,"That's all we need to do on the Expo app side but there is one more step we need to complete. Because we are using Expo notifications service instead of directly calling FCM we need to upload the Firebase project server key to Expo's servers, so Expo's service can provide the key for us when calling FCM."),l.default.createElement(s.ArticleImage,{alt:"Obtaining Firebase server key",articleId:o.ArticleId.expoPushNotifications,filename:"firebase-server-key.png"}),l.default.createElement("p",null,"The Firebase server key can be found in ",l.default.createElement("b",null,"Project settings")," ",">"," ",l.default.createElement("b",null,"Cloud Messaging")," ",">"," ",l.default.createElement("b",null,"Server key"),". Once you locate the server key you need to run the following command to upload it to Expo's servers:"),l.default.createElement(u.BlockSnippet,null,"expo push:android:upload --api-key AAA...jbQ"),l.default.createElement("p",null,"Afterwards you can again check the ",l.default.createElement("b",null,"Credentials")," section of your app in"," ",l.default.createElement(i.Anchor,{url:"https://expo.dev/"},"https://expo.dev/")," to make sure the server key has been correctly uploaded."),l.default.createElement(s.ArticleImage,{alt:"FCM server key in Expo credentials section",articleId:o.ArticleId.expoPushNotifications,filename:"expo-credentials-fcm-key.png"}),l.default.createElement("h3",null,"Implementation: server side"),l.default.createElement("p",null,"The most relevant task the server code needs to handle is composing and sending the push notifications. Because we are relying on Expo push notifications service we will use the Expo server SDK (the"," ",l.default.createElement(i.Anchor,{url:"https://www.npmjs.com/package/expo-server-sdk"},"Node.js flavour")," ","since I'm coding in Typescript)."),l.default.createElement("p",null,l.default.createElement(c.InlineSnippet,null,"expo-server-sdk")," exposes a method named"," ",l.default.createElement(c.InlineSnippet,null,"sendPushNotificationAsync")," that receives an array of message objects and schedules the delivery of those messages to the corresponding notification gateways. The message objects must be formatted according to Expo. Both things can be done in a simple function like the one below (omitting error management)."),l.default.createElement(r.default,{id:"32d5f14fbc00ce746b6545632060e0d6"}),l.default.createElement("p",null,"About retrieving the push tokens we need to provide to the function, it depends again on the server side choices. Sticking to Firebase Realtime database and Firebase Functions it can be done like this:"),l.default.createElement(r.default,{id:"549763f3f5679b20ebf750d91af8a700"}),l.default.createElement("p",null,"This is not a Firebase tutorial so I'm not going to explain the code above with great detail. All we need to know is that creates a Cloud Scheduler job that runs every day and notifies the subscribed users and exposes an HTTPS endpoint that can be used to send individual notifications at any time."),l.default.createElement("p",null,"Finally the only missing bit is the function to get the weather data. If you are curious about it such function can be implemented as an HTTPS call to the"," ",l.default.createElement(i.Anchor,{url:"https://openweathermap.org/"},"Open Weather")," web API providing the name of the corresponding city:"),l.default.createElement(r.default,{id:"45d7b82690dbb8db8d2714acc0080e53"}),l.default.createElement("h3",null,"Wrapping up"),l.default.createElement("p",null,"Give yourself a round of applause 👏 If you have made it this far your app should successfully be delivering push notifications on both Android and iOS devices. I'll finish this article by tackling a couple issues you might find while testing your app."),l.default.createElement("h4",null,"Unhandled Firebase composer notification click"),l.default.createElement("p",null,"Firebase has a notification composer that can be used to send notifications to the entire audience of an app. Sending notifications through this graphical tool will indeed deliver notifications to all the users of our app (on Android devices at least; I haven't tested it on iOS)."),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expoPushNotifications,filename:"firebase-notification-composer.png",footer:"Firebase Cloud Messaging notification composer"}),l.default.createElement(s.ArticleImage,{alt:"Received notification from Firebase composer",articleId:o.ArticleId.expoPushNotifications,className:"image-300",filename:"firebase-notification-received.png"})),l.default.createElement("p",null,"An unpleasant surprise appears when clicking on the notification however: the app opens but Expo notification handlers are not fired, causing the notification click to be missed 😢 At first it might look like an Expo bug but after reading through the Expo's repository issues we discover it's actually the expected behavior."),l.default.createElement("p",null,"As explained"," ",l.default.createElement(i.Anchor,{url:"https://github.com/expo/expo/issues/10789#issuecomment-716624242"},"in this comment")," ","there are two types of FCM notifications: data messages and notification messages. Having a look at the"," ",l.default.createElement(i.Anchor,{url:"https://firebase.google.com/docs/cloud-messaging/concept-options#notifications_and_data_messages"},"provided Firebase documentation page")," ","we find the cause of the problem:"),l.default.createElement(u.BlockSnippet,null,"With FCM, you can send two types of messages to clients:",l.default.createElement("br",null),l.default.createElement("br",null),'Notification messages, sometimes thought of as "display messages." These are handled by the FCM SDK automatically.',l.default.createElement("br",null),l.default.createElement("br",null),"Data messages, which are handled by the client app."),l.default.createElement("p",null,"So no room for Expo to handle the Firebase composer notifications. We will have to live with that and write some more code for the cases in which we need to notify the entire audience of the app."),l.default.createElement("h4",null,"Unhandled notification click on app launch (on Android)"),l.default.createElement("p",null,"In the code above we are defining the notifications handlers from a"," ",l.default.createElement(c.InlineSnippet,null,"useEffect")," inside the App component given we need React to update the app to display the content of the received notifications."),l.default.createElement("p",null,"There's nothing wrong with it but, as explained in"," ",l.default.createElement(i.Anchor,{url:"https://github.com/expo/expo/issues/6943#issuecomment-677901678"},"this github issue"),", if the handlers are not defined as soon as possible upon app launch the notification click might go unnoticed when launching the app from closed state. That's exactly what occurs now when clicking on a notification while the app is in closed state."),l.default.createElement("p",null,"Luckily this issue can be worked around. A simple way is to define stub notification handlers on app launch, outside any component, and define the the actual handlers' behavior later on (e.g. from a ",l.default.createElement(c.InlineSnippet,null,"useEffect")," inside a component). The catch to this approach is that stub handlers allow us to track notifications received before the actual handler's behavior is defined."),l.default.createElement("p",null,"Looks easier than it sounds and, elegant or not, it works 💪:"),l.default.createElement(r.default,{id:"fe3e1dad37b9ec8a19ee336339fe87c8"}),l.default.createElement("p",null,"And that's the end of it! You can find all the source code you might need to check in"," ",l.default.createElement(i.Anchor,{url:"https://github.com/capelski/expo-notifications-tutorial"},"this repository"),". Happy coding 🥳"))}},6378:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expoPushNotifications=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(3985);t.expoPushNotifications={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2021-08-19",duration:12,id:l.ArticleId.expoPushNotifications,languages:[r.Language.en],shareImage:"push-token-notification.png"}}},6055:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(3338),o=n(9796),s=n(4711),u=n(974),c=n(1121),d=n(8892),p=n(5922);t.english={title:"Apple/Google authentication in Expo apps using Firebase",description:"How to implement Apple and Google authentication in Expo apps using Firebase",shareSentence:"Want to improve your Expo app's sign-up conversion rate? Here is how to add social sign-in using Firebase!",introduction:l.default.createElement("p",null,"You are authenticating your Expo app users with email and password using Firebase. It works great but marketing funnels seem to indicate that users quit the app at the sign up screen. Looks like offering social sign options will help mitigate that problem, so says the marketing department, and you now want to add Apple sign-in and Google sign-in to your app. This is how to do it in February 2021!"),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,l.default.createElement("i",null,"To follow along with this story you need to meet this two requirements. You can check how to do so in"," ",l.default.createElement(i.NavLink,{to:o.articleRoute.path.replace(":articleId",u.ArticleId.reactNativeFirebaseAuth)},"Email authentication in React Native apps using Firebase"),":")),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("i",null,"Have an existing Firebase project with Authentication enabled")),l.default.createElement("li",null,l.default.createElement("i",null,"Handle successful user authentication through Firebase"," ",l.default.createElement(p.InlineSnippet,null,"onAuthStateChanged")," listener"))),l.default.createElement("h3",null,"Firebase limitations in React Native"),l.default.createElement("p",null,"The Firebase Javascript SDK has an specific method called"," ",l.default.createElement(p.InlineSnippet,null,"signInWithPopup")," to handle authentication providers' sign-in flow using OAuth. Relaying on the Firebase"," ",l.default.createElement(s.Anchor,{url:"https://firebase.google.com/docs/auth/web/apple"},"Apple authentication documentation page")," ","will instruct us to handle the sign-in flow in the following fashion:"),l.default.createElement(r.default,{id:"1bb4b55d72cf38daef7a658cf4d81147"}),l.default.createElement("p",null,"Using this approach in React Native apps will raise an exception however. This happens because the Firebase Javascript SDK is designed for web applications and the"," ",l.default.createElement(p.InlineSnippet,null,"signInWithPopup")," method expects the app to run in a browser. Frog! We will need to find another way to do it."),l.default.createElement(d.BlockSnippet,null,'Error: This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),l.default.createElement("p",null,"Fortunately for us we are using Expo 🎉 and Expo has two modules designed for this specific purpose: ",l.default.createElement(p.InlineSnippet,null,"expo-google-app-auth")," and"," ",l.default.createElement(p.InlineSnippet,null,"expo-apple-authentication"),". Both modules authenticate the user against the corresponding provider and return a credential that can be used to authenticate the user in Firebase through the"," ",l.default.createElement(p.InlineSnippet,null,"signInWithCredential")," method."),l.default.createElement("p",null,l.default.createElement("i",null,"In fact Expo provides two modules to authenticate users against Google:"," ",l.default.createElement(p.InlineSnippet,null,"expo-google-app-auth")," and"," ",l.default.createElement(p.InlineSnippet,null,"expo-google-sign-in"),". They both achieve the same goal but the latter uses native Google authentication while the former uses a secure system web browser. At practice this means that"," ",l.default.createElement(p.InlineSnippet,null,"expo-google-sign-in")," requires a bit more configuration and it doesn't work in the Expo Go client. Feel free to use the one you like better.")),l.default.createElement("p",null,"Having set the strategy it's just a matter of completing the necessary steps for each of the two modules. Let's go one by one."),l.default.createElement("h3",null,"Sign in with Google"),l.default.createElement("p",null,"Go ahead and install ",l.default.createElement(p.InlineSnippet,null,"expo-google-app-auth"),". We will then use the straightforward ",l.default.createElement(p.InlineSnippet,null,"logInAsync")," method to get the users' credentials. This method needs at least three parameters:"," ",l.default.createElement(p.InlineSnippet,null,"androidStandaloneAppClientId"),","," ",l.default.createElement(p.InlineSnippet,null,"iosStandaloneAppClientId"),", and"," ",l.default.createElement(p.InlineSnippet,null,"scopes"),"."),l.default.createElement("p",null,"The first two are OAuth 2.0 Client IDs that are automatically generated by Firebase when you activate the corresponding authentication providers while the third is a list of OAuth 2.0 scopes. Let's enable Google authentication provider and get our client IDs before moving into the code."),l.default.createElement("p",null,"Navigate to ",l.default.createElement("b",null,"Authentication ",">"," Sign-in method")," and enable Google. After saving the changes the ",l.default.createElement("i",null,"Web client ID")," and ",l.default.createElement("i",null,"Web client secret")," fields will get populated but this is not the Client ID we are looking for."),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"Firebase authentication providers list",filename:"firebase-auth-providers.png"}),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"Firebase Google authentication provider",filename:"firebase-google-auth-provider.png"}),l.default.createElement("p",null,"The client ID we need is generated after enabling the Google sign-in method and can be found in the corresponding Google Cloud Platform project. Go to"," ",l.default.createElement(s.Anchor,{url:"https://console.cloud.google.com/"},"https://console.cloud.google.com/"),", select the Firebase project (every Firebase project creates an associated GCP project) and navigate to"," ",l.default.createElement("b",null,"APIs & Services ",">","Credentials"),". There you will see a list of OAuth 2.0 Client IDs:"),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"Google Cloud Platform credentials dashboard",filename:"gcp-oauth-client-ids.png"}),l.default.createElement("p",null,"Great! Now let's drop those client IDs into some code 💪 You might want to create environment variables for the client IDs instead of including them in the source code but I'm not doing so here for the sake of simplicity."),l.default.createElement(r.default,{id:"a47a64db2a2fe7d4ad3469655d98addf"}),l.default.createElement("p",null,"The ",l.default.createElement(p.InlineSnippet,null,"logInAsync")," call returns a promise with the result of the operation. If the result type equals The"," ",l.default.createElement(p.InlineSnippet,null,"success")," we will then find the"," ",l.default.createElement(p.InlineSnippet,null,"idToken")," and"," ",l.default.createElement(p.InlineSnippet,null,"accessToken")," in the result, which we will use to authenticate the user in Firebase by creating a GoogleAuthProvider credential. If the result equals ",l.default.createElement(p.InlineSnippet,null,"cancel")," means the user didn't complete the sign-in flow. Easy as 1,2,3!"),l.default.createElement("p",null,"Keep in mind that the code above will not work on the Expo Go client. You can either"," ",l.default.createElement("b",null,"create a new Internal testing release")," on Google Play console and install the app on an Android device or ",l.default.createElement("b",null,"generate new OAuth 2.0 Client IDs")," for testing purposes and pass them to ",l.default.createElement(p.InlineSnippet,null,"logInAsync")," using the"," ",l.default.createElement(p.InlineSnippet,null,"androidClientId")," and"," ",l.default.createElement(p.InlineSnippet,null,"iosClientId")," parameters (in which case you will need 4 client IDs)."),l.default.createElement("h3",null,"Sign in with Apple"),l.default.createElement("p",null,"Before starting configuring the Apple sign-in service I suggest you to read"," ",l.default.createElement(s.Anchor,{url:"https://medium.com/@dansinger_68758/adding-sign-in-with-apple-to-a-managed-expo-app-using-firebase-authentication-ca331b4de05"},"this helpful story")," ","from Dan Singer. There you will find some considerations that must be taken into account before adding the Apple sign-in into an Expo app, along with the explanation on how to do it. In this story I'll be extending his tutorial with more detail."),l.default.createElement("p",null,l.default.createElement("i",null,"It comes as no surprise that Apple's sign-in is more complicated than Google's one and it can be tempting to skip it. Apple won't make so easy though. As stated in"," ",l.default.createElement(s.Anchor,{url:"https://developer.apple.com/app-store/review/guidelines/#sign-in-with-apple"},"this section of the App Store Review Guidelines"),', "apps that use social login services (e.g. Google sign-in) must also offer Sign in with Apple as an equivalent option". So let\'s make our best to get it working!')),l.default.createElement("p",null,"First we need to install the necessary modules:"," ",l.default.createElement(p.InlineSnippet,null,"expo-apple-authentication")," and"," ",l.default.createElement(p.InlineSnippet,null,"expo-crypto"),". We will use the"," ",l.default.createElement(p.InlineSnippet,null,"signInAsync")," method from the"," ",l.default.createElement(p.InlineSnippet,null,"expo-apple-authentication")," module to, just as we did before, get the user's credentials and then authenticate the user in Firebase using those credentials."),l.default.createElement("p",null,"The difference this time is that ",l.default.createElement(p.InlineSnippet,null,"signInAsync")," does not return an OAuth access token. As Dan Singer points in his story, we can get around this issue by providing a SHA256-hashed nonce to the"," ",l.default.createElement(p.InlineSnippet,null,"signInAsync")," function and then pass the original nonce to Firebase's ",l.default.createElement(p.InlineSnippet,null,"signInWithCredential"),". That's why we also need the ",l.default.createElement(p.InlineSnippet,null,"expo-crypto")," module. Let's put it all together:"),l.default.createElement(r.default,{id:"ea93abe5f49d1db77bab773ea83a894d"}),l.default.createElement("p",null,"The ",l.default.createElement(p.InlineSnippet,null,"requestedScopes")," parameter is a list of OAuth 2.0 scopes. Not that complicated after all! Next thing we need to care about is the UI. While Google let's you display their sign-in button the way you want Apple will require you to use a guideline approved button. In fact it's normal to get rejected because the sign in button doesn't meet the requirements."),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"App Store rejection e-mail due to non compliant Sign-in button",footer:"App Store rejection e-mail due to non compliant Sign-in button",filename:"apple-sign-in-button-rejection.png"}),l.default.createElement("p",null,'The simplest way to prevent the rejection is to use the "corporative" button Expo provides for us. Keep in mind that Apple sign-in only works on iOS devices so we need to check whether it\'s available or not before rendering the button. Expo gets us covered with the ',l.default.createElement(p.InlineSnippet,null,"isAvailableAsync")," method:"),l.default.createElement(r.default,{id:"17de06c5390b050620c548a9a5f233ce"}),l.default.createElement("p",null,"Well! Having the code in place we can now move on to configuring the services. Let's start with Apple and we will tackle Firebase afterwards. Expo team did a great job documenting the necessary steps in the"," ",l.default.createElement(s.Anchor,{url:"https://developer.apple.com/app-store/review/guidelines/#sign-in-with-apple"},l.default.createElement(p.InlineSnippet,null,"expo-apple-authentication"))," ","page so make sure to take a look at it."),l.default.createElement("p",null,"First add the ",l.default.createElement(p.InlineSnippet,null,"usesAppleSignIn")," property to your"," ",l.default.createElement(p.InlineSnippet,null,"app.json")," configuration file. Then head to"," ",l.default.createElement(s.Anchor,{url:"https://developer.apple.com/"},"Apple Developer Portal")," to do the following two things:"),l.default.createElement(r.default,{id:"2615d8fc1ef19e0be681ae17c1f2872a"}),l.default.createElement("ul",null,l.default.createElement("li",null,"Enable the Sign In with Apple capability for your App ID. Navigate to"," ",l.default.createElement("b",null,"Certificates, IDs & Profiles ",">"," Identifiers")," and select your App ID. In the Capabilities list select ",l.default.createElement("i",null,"Sign In with Apple")," and click"," ",l.default.createElement("i",null,"Configure"),". Leave the ",l.default.createElement("i",null,"Enable as a primary App ID")," option selected and provide the Return URL for your Firebase app (step 1 in the"," ",l.default.createElement(s.Anchor,{url:"https://firebase.google.com/docs/auth/web/apple#configure-sign-in-with-apple"},"Firebase Apple Auth documentation page"),")",l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"Sign in with Apple App ID capability",filename:"sign-in-with-apple-1.png"}),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"Sign in with Apple return url",filename:"sign-in-with-apple-2.png"})),l.default.createElement("li",null,"Enable the Sign In with Apple service in your app private key. If your app doesn't use a private key yet you will need to create a new one. Navigate to"," ",l.default.createElement("b",null,"Certificates, IDs & Profiles ",">"," Keys")," and select your key. Click"," ",l.default.createElement("i",null,"Edit"),", select the ",l.default.createElement("i",null,"Sign in with Apple")," service and click"," ",l.default.createElement("i",null,"Configure"),". In the list of Primary App IDs select the ID of your app.",l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"Sign in with Apple Key service",filename:"sign-in-with-apple-3.png"}),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"Sign in with Apple Primary App ID",filename:"sign-in-with-apple-4.png"}))),l.default.createElement("p",null,"We are done with Apple 💃 Notice that we modified the App ID configuration and that will invalidate the app Provisioning Profile. Fortunately we can easily generate a new Profile as well as revoke the old one thanks to Expo by using a couple command line arguments next time we build the app:"),l.default.createElement(d.BlockSnippet,null,"expo build:ios --clear-provisioning-profile --revoke-credentials"),l.default.createElement("p",null,"We are almost there! We only need to enable Apple authentication provider in Firebase and will have arrived to our destination: success. Head to the"," ",l.default.createElement(s.Anchor,{url:"https://console.firebase.google.com/"},"Firebase console"),", navigate to ",l.default.createElement("b",null,"Authentication ",">"," Sign-in method")," and enable Apple."),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"Firebase Apple authentication provider",filename:"firebase-apple-auth-provider-1.png"}),l.default.createElement("p",null,"In the ",l.default.createElement("i",null,"Services ID")," field you will need to provide the ID of the"," ",l.default.createElement("i",null,"Sign In with Apple")," service you've enabled in the app private key. You can find the Service ID in the Apple Developer Portal navigating to"," ",l.default.createElement("b",null,"Certificates, IDs & Profiles ",">"," Keys")," and selecting your key. Next to the"," ",l.default.createElement("i",null,"Sign In with Apple")," enabled service you will find the ID which looks like"," ",l.default.createElement("i",null,"{","TeamID","}",".","{","Bundle ID","}"),"."),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"Sign in with Apple Service ID",filename:"sign-in-with-apple-5.png"}),l.default.createElement("p",null,"The ",l.default.createElement("i",null,"OAuth code flow configuration")," section is optional and I'm not sure it makes a difference to fill in the details or not. Given you only need your Apple Team ID and your app's private key I prefer to provide them but, again, I'm not sure it makes a difference. Feel free to skip this part and test your luck 🤞"),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expoSocialSignIn,alt:"Firebase Apple authentication provider configuration",filename:"firebase-apple-auth-provider-2.png"}),l.default.createElement("p",null,l.default.createElement("i",null,"You can download your private key (a .p8 format file) from the Apple Developer Portal but you can only do it once. If you let Expo handle the process back in the day then you probably won't be able to download the key. You can manually generate a new key from the Apple Developer Portal and then use"," ",l.default.createElement(p.InlineSnippet,null,"expo credentials:manager")," to replace the private key your app uses.")),l.default.createElement("p",null,"Save the changes, head to the command line to generate a new .ipa in case you haven't done it above and that's all there is 🎉 Wait for the new app version to be available in TestFlight and delight yourself with the wonders of the 21st century state-of-the-art authentication. Happy coding!"))}},7791:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expoSocialSignIn=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(6055);t.expoSocialSignIn={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2021-02-20",duration:8,id:l.ArticleId.expoSocialSignIn,languages:[r.Language.en],shareImage:"firebase-auth-providers.png"}}},5446:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121),u=n(8892);t.english={title:"Running express on Google Cloud",description:"How to deploy your node.js express app to Google Cloud Platform for first-timers",shareSentence:"Interested in cloud infrastructure? Learn how to deploy your node.js express app to Google Cloud Platform 🚀",introduction:l.default.createElement("p",null,"So you have just finished your splendid new node.js express app, it runs smoothly in your local environment and you are ready to make it available to the users who are eagerly awaiting for the release. The question now is... where to deploy it? Search no more! Google Cloud Platform is the place you've been looking for. Seamlessly deploy your app with a single command and let Google handle the scaling your app needs according to the users traffic."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expressOnGoogleCloud,alt:"Autoscaling environment",className:"image-600",filename:"autoscaling.gif"}),l.default.createElement("h3",null,"The conventional way"),l.default.createElement("p",null,"Before the appearance of cloud infrastructure providers (e.g. Google Cloud, Amazon Web Services, Microsoft Azure, etc.), the usual deployment process consisted in having a dedicated server or virtual machine in which the application was installed along with all the necessary requirements. Still this can be done today by creating a virtual machine in your cloud provider but it has some drawbacks:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,"Scaling"),": Any virtual machine has a computation limit. When enough users start accessing the application at the same time, the virtual machine will not be able to handle all their requests and some users will get timeout errors. Also, even when there are no users accessing the app, the virtual machine is still running and so increasing the monthly bill total."),l.default.createElement("li",null,l.default.createElement("b",null,"Machine management"),": Having a dedicated virtual machine gives the highest degree of freedom. And with great freedom comes great responsibility (remember SpiderMan?). You will need to install the runtime, configure the environment, expose the necessary network ports, manage the application from within the virtual machine (start, stop, update, deploy, access the logs, etc.) and so on.")),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expressOnGoogleCloud,filename:"gcp-compute-engine.png",footer:"GCP virtual machines page"}),l.default.createElement("h3",null,"The cloud way"),l.default.createElement("p",null,"Instead of managing dedicated virtual machines the current trend is to delegate the low-level layers (e.g. hardware, network, operating system, runtime, etc.) to a cloud provider and deploying the application on top of that. This approach is called PaaS (platform as a service) and it has many flavours and providers. In GCP there are three main categories: Google App Engine, Google Cloud Functions and Google Cloud Run."),l.default.createElement("p",null,"All the categories pursue the same goal but they achieve it in different manners. Cloud Run is meant to run applications containerized through Docker. Cloud Functions is designed to run single functions, for a mobile app backend for example. App Engine is the best choice for web applications, adding additional capabilities that Cloud Functions do not include (e.g. easier database connections). You can read more about it in"," ",l.default.createElement(i.Anchor,{url:"https://cloud.google.com/docs/overview/cloud-platform-services"},"GCP documentation"),"."),l.default.createElement("h3",null,"Simple yet realistic app"),l.default.createElement("p",null,"You can host any kind of application in GCP (Google Cloud Platform) so before jumping into it let's have a look at the nature of the web app that will be deployed. For this example I developed a web Api connected to a mySQL database. I used ",l.default.createElement(i.Anchor,{url:"https://nestjs.com/"},"NestJS"),", one of the most popular node.js frameworks, which supports Typescript (is built with it), has a good community adoption (other developers will have an easier time joining the project) and simplifies certain parts of the development process."),l.default.createElement("p",null,"The Api itself is simple. It exposes a collection of jokes (spanish content), allowing to fetch them by id or through text match. It has the following three endpoints only, which you can test at"," ",l.default.createElement(i.Anchor,{url:"https://bromuro-api.oa.r.appspot.com/"},"https://bromuro-api.oa.r.appspot.com/")," ","if the gcp app is still running (in case the gcp app is shutdown, you can clone"," ",l.default.createElement(i.Anchor,{url:"https://github.com/capelski/bromuro-api"},"this repository"),", run the project using docker-compose and access it at"," ",l.default.createElement(i.Anchor,{url:"http://localhost:3000"},"localhost:3000"),")."),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expressOnGoogleCloud,className:"image-600",filename:"swagger-ui.png",footer:"Web api endpoints"}),l.default.createElement("p",null,l.default.createElement("i",null,"This interactive documentation is using"," ",l.default.createElement(i.Anchor,{url:"https://swagger.io/"},"swagger"),", an OpenAPI Specification standard, through a NestJS module which automatically generates the interactive page based on code annotations. The coolest part of swagger is that you can make actual calls to the endpoints, providing the parameters and getting a real response:")),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expressOnGoogleCloud,className:"image-600",filename:"swagger-call.png",footer:"Web api endpoint call example"}),l.default.createElement("h3",null,"Google App Engine"),l.default.createElement("p",null,"Given the nature of the application App Engine is the right choice, but before delving into the deployment steps there are a couple of considerations we must address."),l.default.createElement("h5",null,"Stateful apps"),l.default.createElement("p",null,"In first place, there is a type of express libraries that don't play well with autoscaling environments, being the most used express-session. The issue with this library is it stores user information (the request session) in the server memory. While this works out when there is a single server, it falls apart when there are multiple virtual machines running the application because a user request might be served by a different machine that served the previous request."),l.default.createElement("p",null,"For example, this happens when a user authentication request is served by VM1 and a following request to a restricted URL is served by VM2. VM2 did not authenticate the user, hence it will return an error. An application that keeps data in memory (state) between requests is called stateful, and it will struggle to live in any autoscaling environment. The solution for this problem is to persist the state outside the server, using solutions like"," ",l.default.createElement(i.Anchor,{url:"https://redis.io/"},"Redis"),", making the app stateless."),l.default.createElement("p",null,l.default.createElement("i",null,'Another alternative to persist the state outside the server is to delegate the state management to the client when possible. For example, in the first version of this web api there was a fourth endpoint called "random", which returned a random joke and stored the joke id to the session so it would not return a joke twice to the same user. Instead of going for a Redis-like solution, I decided to remove the endpoint and generate the random ids in the client, keeping track of the already consumed jokes.')),l.default.createElement("h5",null,"Database connection"),l.default.createElement("p",null,"Since we don't know which and how many virtual machines will be running the app, the database can't be placed inside any of them. We will need a separate permanent virtual machine to contain the database. In GCP there is a special type of virtual machines called SQL instances, which allow you to deploy a database with a couple of clicks, choosing from MySQL, PostgreSQL or SQL Server database engines."),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expressOnGoogleCloud,className:"image-600",filename:"gcp-sql-instance.png",footer:"SQL instance creation in GCP"}),l.default.createElement("p",null,"This database instances are specially suited to be used from within GCP, making it specially easy to connect to from App Engine (using a mechanism called socket files). mysql npm package supports socket files connections through a configuration parameter called ",l.default.createElement("b",null,"socketPath"),", so it's just a matter of setting the right environment variables and handling both TCP connections (for development environment) and socket file connections (for production environment). This is how I implemented the database connection (using Typeorm instead of mysql) and you can learn more about it in the"," ",l.default.createElement(i.Anchor,{url:"https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/master/cloud-sql/mysql/mysql/server.js#L72"},"official nodejs examples repository"),"."),l.default.createElement(r.default,{id:"71c30556e15a3d2b6dbce78cff62d5c6"}),l.default.createElement("p",null,l.default.createElement("i",null,"For noSQL databases such as MongoDB you still will have to create a virtual machine and install the database engine or use a third-party solution such as"," ",l.default.createElement(i.Anchor,{url:"https://www.mongodb.com/cloud/atlas"},"MongoDB Atlas"),". In fact a MongoDB database makes much more sense for this application (simple domain with no references), but for the sake of environment simplicity I decided to use MySQL.")),l.default.createElement("h3",null,"Deployment"),l.default.createElement("p",null,"Without further ado, let's upload our app to Google Cloud 🚀 All you need to do in your repository is adding a ",l.default.createElement("b",null,"app.yaml")," file with the cloud configuration for you app. The only mandatory field in this file is the ",l.default.createElement("b",null,"runtime"),", which you will set to the node version you are using (e.g. nodejs12). You can set the type of virtual machines you want to use through the ",l.default.createElement("i",null,"instance_class")," parameter and you can also define environment variables through ",l.default.createElement("b",null,"env_variables"),"."),l.default.createElement("p",null,"When it comes to sensitive environment variables (e.g. api keys, database users and passwords, etc.), still there is"," ",l.default.createElement(i.Anchor,{url:"https://stackoverflow.com/questions/22669528/securely-storing-environment-variables-in-gae-with-app-yaml"},"not much agreement")," ","on which is the most convenient way to do it. In my case, I went for the simplest option: defining the environment variables in a file excluded from the repository (env_variables.yaml), and then use the ",l.default.createElement("b",null,"include")," parameter in app.yaml to load those variables. In this cases, I like to add a template file to the repository indicating which environment variables the application is expecting:"),l.default.createElement(r.default,{id:"f755b72c8ad6fe5a1b130c79982dbe68"}),l.default.createElement("p",null,"And we are good to go 🍾 In order to deploy the app you will need the"," ",l.default.createElement(i.Anchor,{url:"https://cloud.google.com/sdk/docs"},"Google Cloud SDK"),", which allows to execute commands in the cloud environment from your own terminal. The first time you will need to login, create a project and create an app (you can also create the project and the app in the"," ",l.default.createElement(i.Anchor,{url:"https://console.cloud.google.com/"},"GCP website"),"). Once you have done this you just need to run the deploy command to automatically deploy your app while you go getting some coffee."),l.default.createElement(u.BlockSnippet,null,l.default.createElement("p",null,">"," gcloud auth login"),l.default.createElement("p",null,">"," gcloud projects create [YOUR_PROJECT_ID] --set-as-default"),l.default.createElement("p",null,">"," gcloud app create --project=[YOUR_PROJECT_ID]"),l.default.createElement("p",null,">"," gcloud app deploy")),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expressOnGoogleCloud,className:"image-600",filename:"gcp-project-creation.png",footer:"Project creation in GCP"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expressOnGoogleCloud,className:"image-600",filename:"gcp-app-engine-creation.png",footer:"App engine creation in GCP"}),l.default.createElement("p",null,"When the deploy command finishes your app will be live on GCP 🤩 You can use"," ",l.default.createElement("b",null,"gcloud app browse")," to launch your app in the browser. It's likely that the first time you deploy something will not work as expected. If you get an error add some logs to your application (the good old console.log will do), deploy again and you will find the logs in the GCP Log Viewer."),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expressOnGoogleCloud,className:"image-600",filename:"gcp-app-engine-versions.png",footer:"App engine versions in GCP"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expressOnGoogleCloud,className:"image-600",filename:"gcp-app-engine-logs.png",footer:"App engine logs in GCP"}),l.default.createElement("p",null,l.default.createElement("i",null,"For each deployment you make, a new version of the app is created in GCP. Each version has independent logs, a unique URL and independent environment variables. You can check a version environment variables by accessing the version's configuration:")),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.expressOnGoogleCloud,className:"image-600",filename:"gcp-app-engine-config.png",footer:"App engine config in GCP"}),l.default.createElement("p",null,"And that's it! Fix the problems that might appear in the way (e.g. wrong sql instance connection name) and you are good to go 🎉 One last tip if you are using windows: you will have an easier time with gcloud sdk if you use it from cmd or powershell instead of git bash."))}},1680:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expressOnGoogleCloud=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(5446);t.expressOnGoogleCloud={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2020-09-30",duration:6,id:l.ArticleId.expressOnGoogleCloud,languages:[r.Language.en],shareImage:"gcp-app-engine-creation.png"}}},4824:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(3338),o=n(9796),s=n(4711),u=n(974),c=n(1121),d=n(5922);t.english={title:"Inferring network requests' return type: @express-typed-api",description:"How to use @express-typed-api to declare a type for an express API and automatically infer the corresponding network requests' return type",shareSentence:"Automatically infer network requests' return type through @express-typed-api",introduction:l.default.createElement("p",null,"Even though choosing Typescript to develop an express web app provides type safety in both client and server, the network requests data remains untyped on both ends, complicating our attempts to keep a consistent code base 🤬 With that idea in mind I wrote ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api"),", a library to help creating a type declaration for an express API so that it can be used to automatically infer the network requests' return type from the client side. Here is how to use it."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("h3",null,"The problem"),l.default.createElement("p",null,"Usually, when making a Web API network request via"," ",l.default.createElement(d.InlineSnippet,null,"fetch"),", we either settle with the"," ",l.default.createElement(d.InlineSnippet,null,"any")," type of the response payload or we explicitly cast it to the type we expect it to be."),l.default.createElement(r.default,{id:"2be8474970323e3c4814e6ee13a629c2"}),l.default.createElement("p",null,"Explicitly casting the payload's type does provide type safety but it's not ideal: it must be done for each different fetch call and, more importantly, it is not linked to the actual endpoint's return type. When we change an endpoint's return type, we also need to change the explicit casts accordingly for all of the endpoint's fetch calls."),l.default.createElement("p",null,"The idea behind ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api")," is generating a type declaration for the express API, with no dependencies on the server side, and in a way that Typescript can tell the return type of the API endpoints based on their path and method. That API type declaration is then provided to a fetch wrapper function, which uses the request URL and method to automatically infer the function return type. Let's get on with it!"),l.default.createElement("h3",null,"Sample code"),l.default.createElement("p",null,"To better illustrate the explanations in this article I'll be applying the steps on a simple express API with a single get endpoint (i.e."," ",l.default.createElement(d.InlineSnippet,null,"/api/weather"),"), that receives a city name via query string parameter and returns weather data for the specified city, and the corresponding client side fetch call. A fairly simple example, yet it involves all the necessary aspects to get automatic inferring going in any other express API."),l.default.createElement(r.default,{id:"2b1c6f55f38d1769cb2b4bb2c773e3af"}),l.default.createElement(r.default,{id:"2c766ae92d278b2d284a25610e287b29"}),l.default.createElement("h3",null,"1. API's type declaration"),l.default.createElement("p",null,"The first and obvious step is to define a type for our API, including each endpoint's path and method. A convenient way to generate such type consists in"," ",l.default.createElement("b",null,"declaring a type")," containing the endpoints' return type as properties and using the endpoints' path/method as keys. This is what we are talking about:"),l.default.createElement(r.default,{id:"8c63fc889423183f60c0ee9002e5f4c5"}),l.default.createElement("p",null,"When using ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api")," we will declare our endpoints using the ",l.default.createElement(d.InlineSnippet,null,"EndpointHandler")," generic type like so. ",l.default.createElement(d.InlineSnippet,null,"EndpointHandler")," is meant to enforce the return type of the endpoints' handler and provides explicit typing for the handlers' express arguments (i.e. ",l.default.createElement(d.InlineSnippet,null,"req"),","," ",l.default.createElement(d.InlineSnippet,null,"res")," and ",l.default.createElement(d.InlineSnippet,null,"next"),")."),l.default.createElement(r.default,{id:"6eb2b491b2af0ff8ea0eb02122833bbe"}),l.default.createElement("p",null,"Make sure you create the API type declaration in a"," ",l.default.createElement(i.NavLink,{to:o.articleRoute.path.replace(":articleId",u.ArticleId.typescriptMonorepo)},"package/folder that can be imported from both client and server side"),", with ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api/common")," installed as a dependency."),l.default.createElement("h3",null,"2. Handlers' return type"),l.default.createElement("p",null,"The second step consists in making Typescript aware of the handlers' return type. Because express handlers send the response data by calling methods on the response object (e.g. ",l.default.createElement(d.InlineSnippet,null,"res.json"),"), Typescript is not aware of the handlers' return type (which is usually void). We will need to slightly change the implementation of each handler so that the data is returned as the function result instead."),l.default.createElement("p",null,"A simple way to do so consists in splitting the handler's actual logic and the response object manipulation into two separate functions. One will run the corresponding business logic and return the appropriate data while the other will just call the corresponding response method. This is what it looks like for our sample express API:"),l.default.createElement(r.default,{id:"31d7557f3e8a32ce0a3b545de2eb706c"}),l.default.createElement("p",null,l.default.createElement("i",null,"Note that, even though the express response object offers several methods to return data (e.g. ",l.default.createElement(d.InlineSnippet,null,"res.send"),"),"," ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api")," only works with"," ",l.default.createElement(d.InlineSnippet,null,"res.json"),".")),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expressTypedApi,filename:"handler-payload-return-type.png",footer:"Payload part of the endpoint handler's return type"}),l.default.createElement("p",null,"Now Typescript gets access to the handler's return type 👌 When using"," ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api")," it's a good practice to type the endpoints' handler implementation with the types we created for the API type declaration, so we keep the handlers consistent with the type declaration."),l.default.createElement("p",null,"Note that, because we sometimes want to set the response's HTTP status code before sending the payload, we will need our handlers to return an object with two properties: ",l.default.createElement(d.InlineSnippet,null,"payload")," (the type we are actually interested in) and ",l.default.createElement(d.InlineSnippet,null,"status")," (an optional HTTP status code). You can optionally use the ",l.default.createElement(d.InlineSnippet,null,"EndpointResponse")," ","class to simplify the handlers' return statement."),l.default.createElement(r.default,{id:"f8303dcb64189f7b808b4bb0b0ffb877"}),l.default.createElement("h3",null,"3. Consistent API's implementation"),l.default.createElement("p",null,"The third step consists in validating that the endpoints' path and method used in the API's implementation match the values used in the API's type declaration. So far we have a type declaration for our API and we are using it in the handler's return type, but we would still run into trouble if we would change the path or method of an endpoint's handler but we forgot to update the corresponding part of the API's type declaration."),l.default.createElement("p",null,"To prevent that from happening we will need to extract the"," ",l.default.createElement(d.InlineSnippet,null,"path")," and ",l.default.createElement(d.InlineSnippet,null,"method")," values from the express"," ",l.default.createElement(d.InlineSnippet,null,"app.","<","method",">","(path, handler)")," ","calls and associate them with the corresponding"," ",l.default.createElement(d.InlineSnippet,null,"handler")," so that Typescript can tell whether the values match the API's type declaration. A convenient way of doing so consists in mimicking the approach we used when declaring the API's type:"," ",l.default.createElement("b",null,"creating an object")," containing the endpoints' handlers as properties and using the endpoints' path/method as keys."),l.default.createElement(r.default,{id:"548b3e036f8c4cd62a3991694339507c"}),l.default.createElement("p",null,"Because we are typing such object with the API's type declaration, we make sure that the API's implementation will always be compliant with its type declaration. Now we only need to use the API representation object to replace the"," ",l.default.createElement(d.InlineSnippet,null,"app.","<","method",">")," ","calls: ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api/server")," exports a"," ",l.default.createElement(d.InlineSnippet,null,"publishApi")," function for that purpose."),l.default.createElement("p",null,"It receives an express app and an API representation object as parameters and it traverses the representation object properties, calling the necessary methods on the express app with the corresponding method, path and handler. This is what it looks like when used in our sample express API:"),l.default.createElement(r.default,{id:"c8d6220e71e27430a2d4e21d8eda6168"}),l.default.createElement("i",null,l.default.createElement("p",null,"Heads up! Having both the API's type declaration and API representation object might feel like an unnecessary code duplication but it is indeed necessary. A couple remarks worth mentioning:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("p",null,"It would be possible to remove the API's type declaration and infer the type from the API representation object instead, but we would then be introducing dependencies on the server side code. Since we want to use the API's type declaration on the client side, that is not an option."),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expressTypedApi,filename:"inferred-api-type-declaration.png",footer:"API's type declaration inferred from the API representation object"})),l.default.createElement("li",null,l.default.createElement("p",null,l.default.createElement(d.InlineSnippet,null,"@express-typed-api")," exports an"," ",l.default.createElement(d.InlineSnippet,null,"ApiEndpoints")," helper type to validate the API representation objects. Using it to type the API representation object results in obstructing the Typescript inferring:"),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expressTypedApi,filename:"obstructed-return-type.png",footer:"Typescript inferring obstruction"})))),l.default.createElement("h3",null,"4. Fetch requests' return type inferring"),l.default.createElement("p",null,"With the API's type declaration available on the client side the final step is using it to infer the return type of the fetch calls."," ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api")," contains a"," ",l.default.createElement(d.InlineSnippet,null,"typedFetch")," function, a"," ",l.default.createElement(d.InlineSnippet,null,"fetch")," wrapper that receives the endpoints' path and method as parameters and, apart from passing them to the actual fetch call, uses them to cast the response's json payload."),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expressTypedApi,filename:"typed-fetch-usage.png",footer:"typedFetch usage"}),l.default.createElement("p",null,l.default.createElement(d.InlineSnippet,null,"typedFetch")," is exported in the"," ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api/client")," package via a getter function called ",l.default.createElement(d.InlineSnippet,null,"getTypedFetch"),", that takes the API's type declaration as the type parameter and returns the corresponding instance of"," ",l.default.createElement(d.InlineSnippet,null,"typedFetch"),". It can be called any number of times but the best practice is to call it once and use the returned function all across the client side code."),l.default.createElement("p",null,"Note also that using query string parameters (and/or express URL parameters) in the request's URL will result in a Typescript error when using"," ",l.default.createElement(d.InlineSnippet,null,"typedFetch"),". Because the API's type declaration is defined with the endpoints' path instead of the actual requests' URL, i.e."," ",l.default.createElement(d.InlineSnippet,null,"/api/weather")," instead of"," ",l.default.createElement(d.InlineSnippet,null,"/api/weather?cityName=xyz")," (or"," ",l.default.createElement(d.InlineSnippet,null,"/api/weather/:cityName")," instead of"," ",l.default.createElement(d.InlineSnippet,null,"/api/weather/xyz"),"), Typescript will only accept path arguments that match one of the paths in the API's type declaration."),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expressTypedApi,filename:"typed-fetch-invalid-query-string.png",footer:"Invalid query string URL parameter"}),l.default.createElement("p",null,l.default.createElement(d.InlineSnippet,null,"typedFetch")," resolves this issue by taking the query string parameters (or URL parameters) in a separate"," ",l.default.createElement(d.InlineSnippet,null,"query")," property (or"," ",l.default.createElement(d.InlineSnippet,null,"params"),") and then building the actual request's URL before passing it down to the underlying ",l.default.createElement(d.InlineSnippet,null,"fetch")," call. Applied to our sample express API fetch request:"),l.default.createElement(r.default,{id:"4f25d48d4fe7952395430cb6bc026a9b"}),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expressTypedApi,filename:"typed-fetch-query-string.png",footer:"typedFetch usage with query string parameters"}),l.default.createElement("p",null,l.default.createElement("i",null,"The existence of ",l.default.createElement(d.InlineSnippet,null,"getTypedFetch")," is meant to prevent code duplication in the ",l.default.createElement(d.InlineSnippet,null,"typedFetch")," calls, as using ",l.default.createElement(d.InlineSnippet,null,"typedFetch")," directly would require each call to provide type parameters, duplicating the function's arguments in the function's type parameters.")),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expressTypedApi,filename:"typed-fetch-explicit-parameters.png",footer:"Possible implementation of typedFetch with explicit type parameters"}),l.default.createElement("h3",null,"Additional features"),l.default.createElement("p",null,"Finally here are a couple other features that are likely to be needed in modern express APIs and ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api")," does support but, for the sake of simplicity, are not included in the sample express API. Plus a bonus feature to bring type safety to the request's payload as well 💪"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("p",null,l.default.createElement("b",null,"express middleware"),". Sometimes we need to run additional middleware before executing an endpoint's handler (e.g. authentication, request parsing, etc.). Let's take the following POST endpoint, for which we want to execute ",l.default.createElement(d.InlineSnippet,null,"express.json()")," before running the actual endpoint handler."),l.default.createElement(r.default,{id:"5709a982dd41b627368a156dc7692382"}),l.default.createElement("p",null,l.default.createElement(d.InlineSnippet,null,"@express-typed-api")," exports a"," ",l.default.createElement(d.InlineSnippet,null,"EndpointHandlerWithMiddleware")," type for such cases. When declaring an endpoint with this type its implementation will expect an object with two properties: the actual"," ",l.default.createElement(d.InlineSnippet,null,"handler")," and"," ",l.default.createElement(d.InlineSnippet,null,"middleware"),", a function that receives the endpoint handler and returns an array with any number of handlers that will be executed in that order."),l.default.createElement(r.default,{id:"3087226f4539e35425e1aee3f43e695b"}),l.default.createElement(r.default,{id:"0fc0e9513dff375d0227d4ce7327777f"})),l.default.createElement("li",null,l.default.createElement("p",null,l.default.createElement("b",null,"baseUrl"),". The API's type declaration does not contain the endpoints' full URL but only relative paths. The"," ",l.default.createElement(d.InlineSnippet,null,"getTypedFetch")," function accepts an optional"," ",l.default.createElement(d.InlineSnippet,null,"baseUrl")," parameter that will prepend the provided value to all the ",l.default.createElement(d.InlineSnippet,null,"typedFetch")," ","requests' URL. Note it can contain any value, not necessarily an absolute URL."),l.default.createElement(r.default,{id:"88fe3f3b9ae0f5b95a201b61d9ec44be"}),l.default.createElement("p",null,l.default.createElement("i",null,"In a similar fashion the server"," ",l.default.createElement(d.InlineSnippet,null,"publishApi")," method accepts a"," ",l.default.createElement(d.InlineSnippet,null,"pathsPrefix")," parameter that can be used to remove a common prefix from the API's type declaration, while keeping it in the endpoints' actual path."))),l.default.createElement("li",null,l.default.createElement("p",null,l.default.createElement("b",null,"Typed request payload"),"."," ",l.default.createElement(d.InlineSnippet,null,"@express-typed-api")," allows specifying the type of the requests' payload (i.e. ",l.default.createElement(d.InlineSnippet,null,"body"),","," ",l.default.createElement(d.InlineSnippet,null,"params")," and"," ",l.default.createElement(d.InlineSnippet,null,"query"),") by providing an optional second type parameter to ",l.default.createElement(d.InlineSnippet,null,"EndpointHandler"),", containing any combination of ",l.default.createElement(d.InlineSnippet,null,"jsonBody"),","," ",l.default.createElement(d.InlineSnippet,null,"params")," and/or"," ",l.default.createElement(d.InlineSnippet,null,"query")," types. The types will then be enforced on both client requests and server endpoint handlers."),l.default.createElement(r.default,{id:"4f2bd5cb87b3250730c97b906fd10ffe"}),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expressTypedApi,filename:"typed-request-payload-server.png",footer:"Request query type inferring on the server side"}),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.expressTypedApi,filename:"typed-request-payload-client.png",footer:"Request query type inferring on the client side"}))),l.default.createElement("p",null,"And that's pretty much it. There are some more examples in the"," ",l.default.createElement(s.Anchor,{url:"https://github.com/capelski/express-typed-api/tree/main/projects/%40sample-express-app"},"sample repository"),", and both"," ",l.default.createElement(s.Anchor,{url:"https://www.npmjs.com/package/@express-typed-api/server"},"server")," ","and"," ",l.default.createElement(s.Anchor,{url:"https://www.npmjs.com/package/@express-typed-api/client"},"client")," ","packages are available on npm, containing the API documentation in the README. Give it a try and, hopefully, it will turn out to be useful for you too. Happy coding!"))}},3327:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expressTypedApi=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(4824);t.expressTypedApi={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2023-01-13",duration:8,id:l.ArticleId.expressTypedApi,languages:[r.Language.en]}}},2516:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var l=Object.getOwnPropertyDescriptor(t,n);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,l)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var i=r(n(7294)),o=n(974),s=n(1121);t.english={title:"Four coin challenge",description:"Challenge consisting in laying 4 coins in a row, with some restrictions to make it interesting, and how to solve it",introduction:i.default.createElement("p",null,"In contrast to my abstract esoteric last post on the meaning of life, today I bring a light and enjoyable post that will make you think in a different manner; you will need to find a way to lay four coins in a row. Doesn't sound complicated, does it? Just let me add a couple of restrictions so that the word challenge on the title is not used in vain and in order for you to feel proud of yourself if you are able to find out a solution."),body:function(){var e=(0,i.useState)(1),t=e[0],n=e[1];return i.default.createElement(i.default.Fragment,null,i.default.createElement(s.ArticleImage,{articleId:o.ArticleId.fourCoinChallenge,filename:"initial-position.jpg",footer:"Coins initial position"}),i.default.createElement("p",null,"To start with the coins must placed in the ",i.default.createElement("b",null,"initial position")," displayed above. I will use the bitcoin logo to cause confusion and get some more views by mistake (catching the attention of the distracted minds), but you can use any kind of coin as long as they have the same size."),i.default.createElement("p",null,"The goal of the challenge is to put the coins on a row by moving just one coin at a time, not lifting it from the surface where they are laying. The tricky part that will make you struggle with the challenge is that each time you move a coin, it can only be left in a position where it touches at least two other coins. A picture is worth a thousand words: the first movement is invalid while the second one is perfectly accepted."),i.default.createElement(s.ArticleImage,{articleId:o.ArticleId.fourCoinChallenge,filename:"invalid-movement.jpg",footer:"Invalid movement"}),i.default.createElement(s.ArticleImage,{articleId:o.ArticleId.fourCoinChallenge,filename:"valid-movement.jpg",footer:"Valid movement"}),i.default.createElement("p",null,"That's all you need to know! So go get some coins and don't come back until you have a solution or the closest thing you can get before you get tired of trying. Regardless what happens first, here you will find the solution when the moment arrives:"),i.default.createElement(s.ArticleImage,{articleId:o.ArticleId.fourCoinChallenge,alt:"4-coin challenge solution",filename:"solution-".concat(t,".jpg")}),i.default.createElement("div",{className:"solution-buttons"},i.default.createElement("button",{type:"button",className:"button primary big ".concat(t>1?"":"disabled-button"),onClick:function(){n(Math.max(t-1,1))}},"Back"),i.default.createElement("button",{type:"button",className:"button primary big ".concat(t<13?"":"disabled-button"),onClick:function(){n(Math.min(t+1,13))}},"Next")),i.default.createElement("p",null,"Hope you enjoy the challenge and you were able to solve it. See you in the next post!"))}}},9326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fourCoinChallenge=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(2516);t.fourCoinChallenge={content:function(){return i.english},metadata:{category:a.ArticleCategory.offTopic,date:"2019-07-22",duration:2,id:l.ArticleId.fourCoinChallenge,languages:[r.Language.en],shareImage:"initial-position.jpg"}}},3765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.articles=void 0;var a=n(8025),l=n(442),r=n(8555),i=n(6378),o=n(7791),s=n(1680),u=n(3327),c=n(9326),d=n(9316),p=n(7795),f=n(8235),m=n(1081),h=n(1072),g=n(4484),y=n(643),b=n(4605),v=n(4694),w=n(1338),E=n(3351),k=n(2967),I=n(9291),A=n(8241),x=n(7704),S=n(5794),T=n(106),P=n(3195),C=n(1490),j=n(6691),_=n(7580),O=n(8794),N=n(8605),M=n(5466),D=n(7020);t.articles=[a.agilityRocks,f.leakedApiKey,h.meaningOfLife,c.fourCoinChallenge,w.progressiveWebApps,r.existentialInjustice,A.subscribersList,p.kanbanGoalsTracking,S.trecember,O.webDevOnSteroidsI,N.webDevOnSteroidsII,E.provinencaDesconeguda,x.sudokuGeneration,v.persuasionInPictures,I.stadiaPlatform,_.webBadDecisions,m.linearGradient,s.expressOnGoogleCloud,y.npmPackagesDevelopment,D.wordpressOnGoogleCloud,l.androidAppPublishing,d.iosAppPublishing,k.reactNativeFirebaseAuth,o.expoSocialSignIn,i.expoPushNotifications,P.typescriptMonorepo,u.expressTypedApi,M.webRTC,C.typescriptMonorepoII,T.typedWebApi,b.otfMigrations,j.webApiProxyMigration,g.minimalisticTranslation].reverse()},5922:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InlineSnippet=void 0;var l=a(n(7294));t.InlineSnippet=function(e){return l.default.createElement("span",{className:"article-inline-snippet"},e.children)}},4930:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(3338),i=n(9796),o=n(4711),s=n(974),u=n(1121);t.english={title:"Publishing an iOS app to App Store",description:"Detailed explanation on how to publish an iOS app to App Store",shareSentence:"Want to publish an iOS app to App Store? This is what it looks like in 2021",introduction:l.default.createElement("p",null,"So you heard that Apple is rather picky when it comes to accepting apps in App Store. And indeed, Apple does make it much harder than Google when it comes to publishing apps. This doesn't mean it's impossible however. All you will need is patience and, if possible, following the advice of somebody who has done it before. This is what it looks like to upload an iOS to App Store in January 2021."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,l.default.createElement("i",null,"Both App Store and Play Store require you to purchase a developer license. While Play Store's license is cheap ($25) and lasts forever, Apple's one is more expensive ($100), must be renewed every year and the upload process is more complicated. I recommend"," ",l.default.createElement(r.NavLink,{to:i.articleRoute.path.replace(":articleId",s.ArticleId.androidAppPublishing)},"starting with Play Store"),", testing the app with some users in the production environment and once everything is ready, move into App Store.")),l.default.createElement("p",null,l.default.createElement("b",null,"Important!")," You will need a Mac device or virtual machine to upload the app to App Store. The only way to upload apps is through XCode or Transporter and they both can only be installed in MacOS."),l.default.createElement("h3",null,"Apple Developer Portal"),l.default.createElement("p",null,"In order to upload an app to App Store you will first need to create an Apple Developer account in the"," ",l.default.createElement(o.Anchor,{url:"https://developer.apple.com/"},"Apple Developer Portal"),". Sign in with your Apple ID, fill the enrollment form, pay the $100 registration fee and let's move on."),l.default.createElement("p",null,'You will notice you get asked twice for the same details in the Romanized Contact Information. "Romanized" stands for latin alphabet here, so I guess this section is meant for users who write in non-latin alphabets (e.g. cyrillic, chinese, etc.). In your case, enter the same details you filled above.'),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Apple developer portal landing page",filename:"apple-developer-portal-1.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Apple developer portal home",filename:"apple-developer-portal-2.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Apple developer program home",filename:"apple-developer-portal-3.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Apple developer program personal information",filename:"apple-developer-portal-4.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Apple developer program romanized information",filename:"apple-developer-portal-5.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Apple developer program entity type",filename:"apple-developer-portal-6.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Apple developer program purchase",filename:"apple-developer-portal-7.png"}),l.default.createElement("p",null,"After your Developer Program Enrollment finishes you will be able to access developer resources from the Apple Developer Portal. Here you will need to create a few items:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,"Distribution certificate"),": Certificate that identifies your team and allows you to submit apps to the App Store. Here is a great guide on"," ",l.default.createElement(o.Anchor,{url:"https://support.magplus.com/hc/en-us/articles/203808748-iOS-Creating-a-Distribution-Certificate-and-p12-File"},"how to create a distribution certificate")," ","manually (you will need to generate the certificate from a Mac).",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Distribution certificate on Apple Developer Portal",filename:"distribution-certificate.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"App ID"),": The identifier of your app. The Bundle ID must be the same as the bundleIdentifier in your app binaries. When creating the App ID manually you will see a list of capabilities your app can add to your app (e.g. Push Notifications, Sign In with Apple, etc.). You can edit those capabilities later, so you don't need to configure them now.",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App ID on Apple Developer Portal",filename:"app-id.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"Provisioning profile"),": Only apps signed by Apple can be installed on an iOS device. This becomes an issue when developing, because you will likely want to test the app on a real device before submitting the app for review. Provisioning profiles are the solution to this problem; they are embedded in your app binaries and allow the app to run in certain devices before Apple signs it. A provisioning profile must be created for each app.",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Provisioning profile on Apple Developer Portal",filename:"provisioning-profile.png"}))),l.default.createElement("p",null,"Creating this items is the most confusing and undocumented part of the entire upload process. I can't provide much more details about it since I am using"," ",l.default.createElement(o.Anchor,{url:"http://expo.io/"},"Expo")," to develop iOS apps and I relied on their CLI to generate both the distribution certificate, the app id and the provisioning profile."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Expo iOS credentials setup",filename:"expo-ios-build.png"}),l.default.createElement("p",null,l.default.createElement("i",null,"If you use Expo CLI from Windows and run into Apple Developer Portal authentication issues, consider running the command in an Ubuntu terminal using WSL (Windows Subsystem for Linux). Neither Command Prompt, PowerShell or Git Bash were able to authenticate at the time of writing.")),l.default.createElement("h3",null,"App Store Connect"),l.default.createElement("p",null,"After you have successfully created the items described above in the Apple Developer Portal, we can move on to"," ",l.default.createElement(o.Anchor,{url:"https://appstoreconnect.apple.com/"},"App Store Connect")," (former Itunes Connect), the platform where application binaries are actually uploaded."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App Store Connect login",filename:"app-store-connect-1.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App Store Connect home",filename:"app-store-connect-2.png"}),l.default.createElement("p",null,"Click on ",l.default.createElement("i",null,"My Apps")," and, once in he Apps page, create a new app by clicking in the ",l.default.createElement("i",null,"+")," button. You will be asked a bunch of details about the app. In the Bundle ID field pick the App ID you've just created in the Apple Developer Portal. The SKU is a unique ID not visible to app users: you can use the bundle identifier or any other relevant text."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App Store Connect create app",filename:"app-store-connect-3.png"}),l.default.createElement("p",null,"When the create operation finishes you will then be directed to the app settings page, where you will need to provide plenty of information about your app. Filling all the required sections is mandatory in order to submit your app for review."),l.default.createElement("p",null,"The simplest approach to getting your app ready consists in clicking the"," ",l.default.createElement("i",null,"Submit for Review")," button, fixing the errors that will be reported and then clicking the button again, until no more errors are reported. Here is an overview of some of the sections you will find:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,"iOS App ",">"," Version Information ",">"," App screenshots"),": You will need to submit screenshots for different device sizes: 6.5 inches iPhones (1242 x 2688px or 1284 x 2778px), 5.5 inches iPhones (1242 x 2208px) and iPads (2048 x 2732px). You can capture those from an emulator / real device or you can generate some images featuring the app look and feel (e.g. the images on Tinder's app store page), as long as you use the required sizes and the app content on the images matches the app appearance. The images you attach here are the ones that will be visible on your app's store page.",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App screenshots section",filename:"app-screenshots.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"Tinder screenshots example",filename:"tinder-screenshots.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"iOS App ",">"," Version Information ",">"," Support URL"),": It's not enough to put a URL to your landing page. The Apple team will visit the link and look for user support content (e.g. a contact form).",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App version information section",filename:"app-version-information.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"iOS App ",">"," Build"),": Here you will need to select the actual app file (.ipa format), but it's not possible to upload it directly to App Store Connect. You will need to use XCode or Transporter to upload the generated .ipa file. When the upload finishes you will find a new app version available in this section. You can see a list of all available versions in the TestFlight tab.",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App build section",filename:"app-build-1.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App builds list",filename:"app-build-2.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App versions in TestFlight tab",filename:"testflight-builds.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"iOS App ",">"," Age rating"),": You will be asked questions about the type of content in your app. There are no rights or wrongs. It's only about determining age restrictions for certain types of content. The"," ",l.default.createElement("b",null,"Unrestricted Web Access")," item means whether users can access any URL inside your app (e.g. a web browser).",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App age rating section",filename:"app-age-rating.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"iOS App ",">"," Review information"),": If your app requires users to authenticate (e.g. creating an account or using an identity provider such as Facebook), you will need to provide demo credentials. Create a testing account in your app and add the username and password in this section.",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App review information section",filename:"app-review-info.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"App information ",">"," Content rights"),": Here you need to confirm that you don't use third-party content or, in case you do, that you are allowed to use such content. If you use a public API for example, you are allowed to use it given it's public.",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App information section",filename:"app-content-rights-1.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App content rights section",filename:"app-content-rights-2.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"Pricing and availability"),": Apple let's you chose your app's price by selecting one of the 90+ price tiers at the time of writing (from free app to tier 87 app, i.e., 1099€). You can also choose the countries availability for your app in this section (by default your app will be available in all the countries of the world).",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App pricing section",filename:"app-pricing.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App availability section",filename:"app-availability.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"App Privacy ",">"," Privacy policy"),": It's mandatory to have a privacy policy in order to deploy an app to the app store. It will be visible on your app's page and it can either be a link to a PDF file or a web page. If you have already created a privacy policy page for you website you can link to that page (e.g."," ",l.default.createElement(o.Anchor,{url:"https://www.whatsapp.com/legal/privacy-policy-eea"},"https://www.whatsapp.com/legal/privacy-policy-eea"),").",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App privacy policy section",filename:"app-privacy-policy.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"App Privacy ",">"," Privacy practices"),": Questionnaire to determine whether your app collects and stores users data outside the application. If your app requires users to create an account for example, you are then storing user information outside the app. You will need to specify why you collect the data for each of the data types your app collects. Once you finish answering the privacy practices questionnaire, you will need to publish the answers to be able to submit your app for review.",l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App privacy section",filename:"app-privacy-practices-1.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App data collection form",filename:"app-privacy-practices-2.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App data types section",filename:"app-privacy-practices-3.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App data type form",filename:"app-privacy-practices-4.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App data type form",filename:"app-privacy-practices-5.png"}),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App privacy responses publish dialog",filename:"app-privacy-practices-6.png"}))),l.default.createElement("h3",null,"Submit for Review"),l.default.createElement("p",null,"Congratulate yourself! You've made it through the App Store maze 🍾 You've filled all the necessary sections and you've finally been allowed to submit your app for review. Over the next days Apple will take a look at your app and either approve it, getting back to you with the good news you are expecting, or reject it, providing a detailed explanation with the rejection reasons."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App rejected notification email",filename:"app-rejected-email.png"}),l.default.createElement("p",null,"It's ok to get rejected. It only means that there is something you need to change or clarify. Go through the rejection reasons and cheerfully fix all the reported issues. Eventually you will get a different email, your app will get approved and your only concern will be to make your app even better 💃"),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App approved notification email",filename:"app-approved-email.png"}),l.default.createElement("h3",null,"Edit: February 2022"),l.default.createElement("p",null,"When the iOS developer license expires, you will not only lose the hability to update your apps but they will be entirely removed from the App Store until you renew your membership."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.iosAppPublishing,alt:"App store connect dashboard when developer license is expired",filename:"app-store-connect-expired-license.png"}))}},9316:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iosAppPublishing=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(4930);t.iosAppPublishing={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2021-01-18",duration:9,id:l.ArticleId.iosAppPublishing,languages:[r.Language.en],shareImage:"apple-developer-portal-3.png"}}},4034:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(4711),i=n(974),o=n(1121);t.english={title:"Kanban: keep track of your goals",description:"How to efficiently manage your personal goals using Kanban strategy",introduction:l.default.createElement("p",null,"As a software engineer I am quite used to project management practice. With it's never ending meetings, the excess of control mechanisms and the recurrent mail chains it is certainly not the most popular system between the employees. Far from perfect however, it let to some techniques that are simple and effective when it comes to goals management."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,"One of this techniques is called Kanban, an"," ",l.default.createElement(r.Anchor,{url:"https://en.wikipedia.org/wiki/Agile_software_development"},"Agile methodology")," ","that, as many others, helps breaking a big and complex problem into small managable tasks and tackling them iteratively over time. The interesting aspect of Kanban is how this tasks get layed out in the Kanban board."),l.default.createElement("p",null,"The Kanban board consists in a set of columns which always include but are not limited to the following three: ",l.default.createElement("b",null,"Pending"),",",l.default.createElement("b",null,"In Progress")," and ",l.default.createElement("b",null,"Done"),". The three columns can have any names and you might find any number of additional columns (e.g. in software engineering we add columns to represent the different stages of a task development: implementation, testing, deployment, etc.). This is an empty Kanban board:"),l.default.createElement("div",{className:"kanban-board"},l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"Pending")),l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"In Progress")),l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"Done"))),l.default.createElement("p",null,"When a new goal appears it always enters the Pending column, thus this column becomes the list of all the goals that need to be completed someday. The Pending column is sorted by priority, having the tasks that needs to be completed first in the very top. Let's turn the empty Kanban board into my personal goals Kanban board and add a few of them:"),l.default.createElement("div",{className:"kanban-board"},l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"Pending"),l.default.createElement("p",null,"Write post about Kanban"),l.default.createElement("p",null,"Join CrossFit classes"),l.default.createElement("p",null,"Start playing the guitar")),l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"In Progress")),l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"Done"))),l.default.createElement("p",null,"When we start working in any of the goals from the Pending column we move it into the In Progress column. One of the key principles to keep Kanban effective is to limit the number of tasks in the In Progress column. You will find the limit through trial and error but somewhat around 5 makes sense for most of the cases. I am currently working in the first task of the board so let's keep things updated:"),l.default.createElement("div",{className:"kanban-board"},l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"Pending"),l.default.createElement("p",null,"Join CrossFit classes"),l.default.createElement("p",null,"Start playing the guitar")),l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"In Progress"),l.default.createElement("p",null,"Write post about Kanban")),l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"Done"))),l.default.createElement("p",null,"As you have already guessed, once I finish writing this post I will move the task to the Done column, which becomes a historical register of all the goals that you have completed. And that's the Kanban theory in a nutshell! There are many online tools you can use to represent a Kanban board and the one I like the most is"," ",l.default.createElement(r.Anchor,{url:"https://trello.com/"},"Trello"),". Trello boards can have any number of lists and each list contains cards that are much more powerful than just plain text: you can attach pictures, you can share them, you can label them, you can create check lists, etc. This is what my books Kanban board looks like in Trello:"),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.kanbanGoalsTracking,alt:"Kanban board in Trello",filename:"trello-board.png"}),l.default.createElement("p",null,"This is it! Simple but effective Kanban helps you managing and tracking your personal goals. If you still keeping your todos in a messy text file, give it a try and surrender to it's simplicity 💪 See you in the next post!"),l.default.createElement("div",{className:"kanban-board"},l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"Pending"),l.default.createElement("p",null,"Join CrossFit classes"),l.default.createElement("p",null,"Start playing the guitar")),l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"In Progress")),l.default.createElement("div",null,l.default.createElement("div",{className:"kanban-board-header"},"Done"),l.default.createElement("p",{style:{textDecoration:"line-through"}},"Write post about Kanban"))))}},7795:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kanbanGoalsTracking=void 0;var a=n(974),l=n(7487),r=n(4034),i=n(7171);t.kanbanGoalsTracking={content:function(){return r.english},metadata:{category:i.ArticleCategory.offTopic,date:"2019-10-21",duration:3,id:a.ArticleId.kanbanGoalsTracking,languages:[l.Language.en],shareImage:"trello-board.png"}}},7487:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AllLanguages=t.Language=void 0,function(e){e.ca="ca",e.en="en"}(n||(t.Language=n={})),t.AllLanguages=Object.keys(n).map((function(e){return n[e]}))},6223:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121);t.english={title:"The leaked Api key",description:"Article on how to import the Google Maps API through npm and Webpack instead of requiring it with a script tag",introduction:l.default.createElement("p",null,"Few days ago I received the following email from Google Cloud Platform. Apparently, I was publishing my Google Maps API key to a public Github repository (for the non-technical audience, I was uploading some kind of password to a social network public wall), allowing any smart-ass clever enough to find it to spend my Google Maps quota on his behalf."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.leakedApiKey,alt:"Google Cloud Platform",filename:"google-mail.png"}),l.default.createElement("p",null,"And indeed, I was! Truth to be told, I was aware of that. When I first built my website I wanted to get it done as quick as possible and I imported the Google Maps code through the lazy way; the good old script tags. Given that almost nobody would visit my website and, even less, take a look at the source code, the strategy was decent enough and I got the job done. This is what my index.html file look like at the time Google sent me the email (note line 26):"),l.default.createElement(r.default,{id:"6b6c6da0006ca9cfc5f28c1f0769f8d0"}),l.default.createElement("p",null,"The sharp readers will have realized that I did harcode the API key as a query string parameter in the Google Maps script tag. Now, even though I like to think of myself as a generous kind person, sharing an API key with an unknown non thanks giving anonymous crowd is not how I want to demonstrate it. Also, the fact that Google knows that I am doing it makes me feel embarrassed, so let's try to do it better!"),l.default.createElement("p",null,"My page is using Vue + Webpack so chances were high that I would find a handy library on npm. A"," ",l.default.createElement(i.Anchor,{url:"https://www.npmjs.com/search?q=vue%20google%20maps"},"quick npm search")," ","returns many potentially interesting results. I gave a chance to the following two:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,"vue2-google-maps"),": This one was making Webpack build to fail. I went to the Github repository opened issues (245 at the time of writing) and I found one"," ",l.default.createElement(i.Anchor,{url:"https://github.com/xkjyeah/vue-google-maps/issues/472"},"reporting the Webpack failure")," ","which had been seating there for almost a year"),l.default.createElement("li",null,l.default.createElement("b",null,"vue-googlemaps"),': This one gave me a better start and I could get to make it work on development mode. However, when building and deploying the app on production mode I was getting a "You have included the Google Maps JavaScript API multiple times on this page" error which would make the Map to break')),l.default.createElement("p",null,"Having run out of luck on npm, it was time to do some field research on Google. It didn't take me long to find this"," ",l.default.createElement(i.Anchor,{url:"https://medium.com/@paw145/using-the-google-maps-api-with-webpack-npm-and-a-handy-promise-returning-helper-19c9312971b0"},"Medium article")," ","which explains exactly what I needed; how to use the Google Maps API with Webpack and NPM. In short, I had to install the ",l.default.createElement("b",null,"load-google-maps-api")," module and use the function it exports to asynchronously load the Google Maps API, providing the API key in the configuration parameter. When the promise returning function gets resolved, I can then use the object it returns in the usual fashion:"),l.default.createElement(r.default,{id:"fc1ea8c211a1b585f85c13257e83746f"}),l.default.createElement("p",null,"Almost there! The last missing piece was to use ",l.default.createElement("b",null,"dotenv")," (or any similar tool) to define the API key as an environment variable and keep it away from Github. If you have never used it before, it allows you to define properties in a ",l.default.createElement("b",null,".env")," ","file (which must be excluded from Github) and then load them to the"," ",l.default.createElement("b",null,"process.env")," nodejs global object. Finally, to be sure that I don't break my website by forgetting to define the key in the .env file (or more exactly, to create the whole .env file), I added the following check to the webpack configuration file:"),l.default.createElement(r.default,{id:"13d92378c503a146d3ca3193a1f9f053"}),l.default.createElement("p",null,"And that's how to remove google maps hardcoded API keys from public repositories and keep Google happy. Please contact me at ",l.default.createElement("b",null,"capellas.carles@gmail.com")," or check"," ",l.default.createElement(i.Anchor,{url:"https://github.com/capelski/vue-personal-page/commit/fcf068af000ad02b5a38583e44b104edeaeb25cc"},"this Github commit")," ","if you have any doubts on specific details (other than how does Google detect that their API keys are being uploaded to public repositories... isn't it a bit scary?). See you in the next post!"))}},8235:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.leakedApiKey=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(6223);t.leakedApiKey={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2019-06-23",duration:3,id:l.ArticleId.leakedApiKey,languages:[r.Language.en],shareImage:"google-mail.png"}}},3385:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(6610),o=n(1087),s=n(627),u=n(8892);t.english={title:"Linear gradient is the new black",description:"How to implement a wheel of fortune using nothing but CSS3 and HTML",shareSentence:"Learn how to build a wheel of fortune using CSS and HTML ☸️🎉",introduction:l.default.createElement("p",null,"Build a wheel of fortune in CSS... is that even possible!? I had never thought about it until I met a group of entrepreneurs who were building a savings application based on video games. They were using React Native and a couple of graphics libraries which, in my opinion, seemed to be too much overhead for just a roulette. I immediately started to dig in the internet and I found a way to implement it in pure CSS3 and HTML. The CSS property that makes it possible? Meet your new best friend: linear-gradient 🕶️"),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,"So the problem is simple; a wheel with some triangular tiles which is able to spin on its center. Ideally the wheel could display any number of tiles but we have to start somewhere so let's say we are happy with 8. We are aiming for a wheel like the following one:"),l.default.createElement(i.Wheel,{tiles:["250","750","500","1000","x2","2000","500","%2"]}),l.default.createElement("p",null,'Now, for the sake of simplicity, let\'s see first how a 4-tile wheel can be implemented with some absolute positioning and css transformations. We will have one 300x300px "wheel" div container and four 150x150px "tile" div elements inside. Each of the "tile" elements will have absolute positioning and will be rotated based on the wheel container center, so they are distributed along the entire "wheel" area:'),l.default.createElement(o.WheelPocFour,{isSkeleton:!0}),l.default.createElement("p",null,'Not bad! We next need to give the container some border radius in order to achieve the circular shape and to hide the overflowing contents so the absolute "tile" elements don\'t break the circle. By adding some more rotation to the tiles content and painting the tiles background color, we get a pretty decent 4-tile roulette:'),l.default.createElement(o.WheelPocFour,{isSkeleton:!1}),l.default.createElement(r.default,{id:"6a997482cd36eb55553a8087c5e552e3"}),l.default.createElement("p",null,l.default.createElement("i",null,'"So! What\'s the fuzz with linear-gradient? It looks like the wheel is ready to spin."')," ","Easy soldier. This approach works for 4-tile wheels, but let's see what happens when we try to double up the number of tiles. For the sake of clarity, I'll remove the border radius from the wheel, so it's easier to understand what is going on:"),l.default.createElement(s.WheelPocEight,{isSkeleton:!0}),l.default.createElement("p",null,"Aha! A wild couple of problems appears. The more important one is the fact that the last tile (number 8) is displayed on top the first one (number 1). We could try to fix this by giving the first tile a greater ",l.default.createElement("i",null,"z-index"),", but we will end up with the first tile covering the second and so on... Here is where ",l.default.createElement("b",null,"linear-gradient")," ","comes into play 😁 Instead of having a plain ",l.default.createElement("i",null,"background-color"),", each of the tiles will get half of the background colored with the value we want and the other half will be transparent."),l.default.createElement(s.WheelPocEight,{isSkeleton:!1}),l.default.createElement(u.BlockSnippet,null,"background: linear-gradient(135deg, #0082ff 50%, transparent 50%);"),l.default.createElement("p",null,"This is how linear-gradient makes its magic. The first argument is optional and it can be used to apply a rotation to the background. The rest of arguments are a set of colors which will be used to fill the background. If no percentages are provided, the background will be filled with a gradient, in this case from #0082ff to transparent. By adding the percentages, we can make the gradient sharp (e.g. no shadow effect).")," ",l.default.createElement("p",null,"The second problem is the tiles content is misaligned. This happens because now the tiles can only use half of their total area (the other half is transparent and, at practice, it belongs to another tile) and it can easily be fixed by giving the tile contents div half the width of the tile itself. The only thing that is now missing is to bring back the border radius and to improve the styling a little bit. Put that in place and you will get the same wheel you saw in the beginning of the post 👌"),l.default.createElement(r.default,{id:"fe698c685117f804b80ded68a5b95ca5"}),l.default.createElement("p",null,"And that's all there is! Feeling up for a bit of challenge? Try to fit four more tiles to the wheel 🏆 See you in the next post!"),l.default.createElement(i.Wheel,{tiles:["250","750","500","1000","x2","2000","500","%2","0","1500","350","900"]}))}},1081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linearGradient=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(3385);t.linearGradient={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2020-09-04",duration:3,id:l.ArticleId.linearGradient,languages:[r.Language.en],shareImage:"wheel.png"}}},627:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},a.apply(this,arguments)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WheelPocEight=void 0;var r=l(n(7294));t.WheelPocEight=function(e){var t={position:"absolute",top:0,right:0,height:150,width:150,display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box"},n={color:"#f2f2f2"},l={color:"#0082ff"},i={transform:"rotate(25deg)"};return e.isSkeleton?(n.backgroundColor="#0082ff",l.backgroundColor="#f2f2f2"):(n.background="linear-gradient(135deg, #0082ff 50%, transparent 50%)",l.background="linear-gradient(135deg, #f2f2f2 50%, transparent 50%)",i.width="50%"),r.default.createElement("div",{style:{position:"relative",height:300,width:300,margin:"80px auto"}},r.default.createElement("div",{style:a(a({},t),n)},r.default.createElement("div",{style:i},"1")),r.default.createElement("div",{style:a(a(a({},t),l),{transform:"translateX(-75px) translateY(75px) rotate(45deg) translateX(75px) translateY(-75px)"})},r.default.createElement("div",{style:i},"2")),r.default.createElement("div",{style:a(a(a({},t),n),{transform:"translateX(-75px) translateY(75px) rotate(90deg) translateX(75px) translateY(-75px)"})},r.default.createElement("div",{style:i},"3")),r.default.createElement("div",{style:a(a(a({},t),l),{transform:"translateX(-75px) translateY(75px) rotate(135deg) translateX(75px) translateY(-75px)"})},r.default.createElement("div",{style:i},"4")),r.default.createElement("div",{style:a(a(a({},t),n),{transform:"translateX(-75px) translateY(75px) rotate(180deg) translateX(75px) translateY(-75px)"})},r.default.createElement("div",{style:i},"5")),r.default.createElement("div",{style:a(a(a({},t),l),{transform:"translateX(-75px) translateY(75px) rotate(225deg) translateX(75px) translateY(-75px)"})},r.default.createElement("div",{style:i},"6")),r.default.createElement("div",{style:a(a(a({},t),n),{transform:"translateX(-75px) translateY(75px) rotate(270deg) translateX(75px) translateY(-75px)"})},r.default.createElement("div",{style:i},"7")),r.default.createElement("div",{style:a(a(a({},t),l),{transform:"translateX(-75px) translateY(75px) rotate(315deg) translateX(75px) translateY(-75px)"})},r.default.createElement("div",{style:i},"8")))}},1087:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},a.apply(this,arguments)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WheelPocFour=void 0;var r=l(n(7294));t.WheelPocFour=function(e){var t={position:"relative",height:300,width:300,margin:"32px auto"},n={position:"absolute",top:0,right:0,height:150,width:150,display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box"},l={},i={},o={};return e.isSkeleton?n.border="1px solid black":(t.overflow="hidden",t.borderRadius=150,t.border="1px solid black",l.backgroundColor="#0082ff",l.color="#f2f2f2",i.backgroundColor="#f2f2f2",i.color="#0082ff",o.transform="rotate(25deg)"),r.default.createElement("div",{style:t},r.default.createElement("div",{style:a(a({},n),l)},r.default.createElement("div",{style:o},"1")),r.default.createElement("div",{style:a(a(a({},n),i),{transform:"translateX(-75px) translateY(75px) rotate(90deg) translateX(75px) translateY(-75px)"})},r.default.createElement("div",{style:o},"2")),r.default.createElement("div",{style:a(a(a({},n),l),{transform:"translateX(-75px) translateY(75px) rotate(180deg) translateX(75px) translateY(-75px)"})},r.default.createElement("div",{style:o},"3")),r.default.createElement("div",{style:a(a(a({},n),i),{transform:"translateX(-75px) translateY(75px) rotate(270deg) translateX(75px) translateY(-75px)"})},r.default.createElement("div",{style:o},"4")))}},6610:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var l=Object.getOwnPropertyDescriptor(t,n);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,l)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Wheel=void 0;var i=r(n(7294));t.Wheel=function(e){var t=360/e.tiles.length,n=t/2,a=(0,i.useState)(!1),l=a[0],r=a[1],o=(0,i.useState)(n),s=o[0],u=o[1];return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"wheel tiles-".concat(e.tiles.length).concat(l?" animated":""),style:{transform:"rotate(".concat(-s,"deg)")}},e.tiles.map((function(e,n){return i.default.createElement("div",{className:"wheel-tile",key:n,style:{transform:"translateX(".concat(-75,"px) translateY(").concat(75,"px) rotate(").concat(t*n,"deg) translateX(").concat(75,"px) translateY(").concat(-75,"px)")}},i.default.createElement("div",{className:"tile-text"},e))}))),i.default.createElement("div",{className:"button-wrapper"},i.default.createElement("button",{type:"button",className:"button primary big ".concat(l?"disabled-button":""),disabled:l,onClick:function(){var a=Math.floor(Math.random()*e.tiles.length)*t+n,l=360*Math.floor(3*Math.random()+1)+a;r(!0),u(l),setTimeout((function(){r(!1),u(l%360)}),4e3)}},"Spin")))}},4171:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(4711),i=n(974),o=n(1121);t.english={title:"The meaning of life",description:"Reflection on how the meaning of life is not that relevant and what could we focus on instead",introduction:l.default.createElement("p",null,"From time to time I used to wonder about the meaning of life. Or more exactly which is the goal of life. Why are we here for? If you have wondered about it too without getting to any satisfactory conclusion, I'm sorry to tell you that I don't have an specific answer. However, as the time goes by, I am less worried about finding it."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(o.ArticleImage,{alt:"You have lost your damn mind gif",articleId:i.ArticleId.meaningOfLife,filename:"crazy.gif"}),l.default.createElement("p",null,"In my opinion the fact that we don't know which is the objective of life (or if there is one in first place) makes life beautiful. It allows the life of each person in the planet to be unique and different. Which sense would make to plant peppers on the backyard if the life is meant to, let's say, eat as much chocolate as possible? But still, there is beauty in planting the peppers and we can enjoy and learn by doing it. In the same line why would we play football, listen to music, cut our hair, develop software or dance salsa if that doesn't help us getting more chocolate?"),l.default.createElement("p",null,"If life had a goal, it would be simpler and we wouldn't feel so lost sometimes, but it would have a drawback too because we wouldn't explore as many possibilities as we do now (e.g. to quote an extravagant experiment, we sent a Tesla across the universe, can you believe it!?)."),l.default.createElement(o.ArticleImage,{alt:"Tesla car in space",articleId:i.ArticleId.meaningOfLife,filename:"tesla-in-space.jpg"}),l.default.createElement("p",null,"We can discuss whether having a specific goal would make life better or worst, but possibly you don't care about it neither I have the reflective skills to come up with a comparison. Let's just assume the wide range of possibilities that life offers and that sometimes we will feel lost and overwhelmed. If you are still reading, at this point you are probably thinking \"Where are you going with this, Paulo Coelho? All of us have similar thoughts about existence but we don't write about it in a blog\"."),l.default.createElement("p",null,'My point in the subject is that instead of searching for the meaning of life, we should aspire at most to find the best way to make use of our individual time in life from within all the available options. "Which are the best things I can dedicate my life to?". That\'s a way easier question to find an answer for. In first place because we step out of the philosophy domains to land in the kingdom of practicality, but also because it is simpler to think of an answer that gives meaning to your single life, from your point of view (who else could judge your own answer anyway?), than finding the theory of everything that holds for the rest of the humanity, the animals, the planets, the infinite and beyond.'),l.default.createElement("p",null,"The latter question is then easier to answer but the answer becomes subjective, so you are again left alone in dark and you will have to find it for yourself. It would be unfair however to leave you empty-handed, given that you have read all along this post, so I want to leave you with an answer candidate, which might or might not fit your expectations: ",l.default.createElement("b",null,"Learning"),"."),l.default.createElement(o.ArticleImage,{alt:"String theory representation",articleId:i.ArticleId.meaningOfLife,filename:"string-theory.jpg"}),l.default.createElement("p",null,l.default.createElement("b",null,"Learning what?")," Doesn't matter. Learning anything new or learning more about something you already know but you can do better. Specially practical things (e.g. martial arts, cooking, salsa, play an instrument, a language, etc.) which can easily be practiced on a daily basis and might eventually turn useful. Learning about the"," ",l.default.createElement(r.Anchor,{url:"https://en.wikipedia.org/wiki/String_theory"},"string theory")," ","might be very interesting for the intricate minds, but is a different kind of learning and it doesn't provide the sense of accomplishment that I am trying to explain."),l.default.createElement("p",null,l.default.createElement("b",null,"Why learning?")," And why is not important the subject to be learnt? Because our brain is genetically configured to be good at learning. Natural selection rewards the species that learn from their mistakes, and remember the expensive consequences of making them, allowing them to survive while the species that do not learn are doomed to an eventual extinction due to the unfitness of their behaviors. So, like it or not, our brain is good at learning and your neurons are eager to form new connections!"),l.default.createElement("p",null,"What to learn will depend on you, but I am sure that you will feel realized during the process and you will be proud after having acquired new skills. Also, learning gives you a goal. Is not the great goal of life but is a goal you can understand, chosen by you, which makes it meaningful, and that will keep you focus and motivated for as long as you decide. Finally, the more you learn, the better you understand the world that surrounds you and the more connections you will find between apparently unrelated things. So don't worry too much about finding the meaning of life and go learning something out there! See you in the next post."))}},1072:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meaningOfLife=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(4171);t.meaningOfLife={content:function(){return i.english},metadata:{category:a.ArticleCategory.offTopic,date:"2019-07-08",duration:4,id:l.ArticleId.meaningOfLife,languages:[r.Language.en]}}},2496:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121),u=n(8892),c=n(5922);t.english={title:"A minimalistic approach to transparently translating your application",description:"How to transparently translate your application with minimal complexity",shareSentence:"Automatically translate your application in this simple fashion",introduction:l.default.createElement("p",null,"Translating an application is not trivial but it shouldn't be complicated. Using existing tools, we can flag the text that needs to be translated and extract it into resource files. Such files will be populated, either by human translators or machine generated content, and then the translation software will transparently do the rest. ¡Vamos alla!"),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.minimalisticTranslation,alt:"Representation of multi language platform",filename:"translation-art.jpg",className:"image-600"}),l.default.createElement("p",null,"There is a set of features we will generally be interested in when setting up a translation system. Firstly we want the ",l.default.createElement("b",null,"application code")," to remain"," ",l.default.createElement("b",null,"agnostic about the translation process"),". Ideally we want to write the code in the default language (e.g. english) and let the translations be resolved during runtime, depending on the user selected language."),l.default.createElement("p",null,"Secondly we will want to minimize the overhead of extracting the translations into resource files. If we have a system in place to parse the code, detect translatable text and extract it into the resource files automatically, we can focus on writing code without having to manually maintain JSON files."),l.default.createElement("p",null,"Finally we will want the translation to be dynamic. If we are translating a client app there is no reason for the translation to require a page reload. We should be able to translate the static texts dynamically, without altering the state of the application. The only thing we need are the corresponding resources, regardless where they come from (e.g. always bundled with the static assets or lazy loaded from the server)."),l.default.createElement("p",null,"Having the requirements clear, let's first writing some code to translate a sample client app. The code will be simple and not suitable for a real life scenario, but it will help us understand which challenges need to be addressed and why it is worth using existing tools. Let's start by introducing the sample client app."),l.default.createElement(s.ArticleImage,{alt:"Screenshot of the sample app",articleId:o.ArticleId.minimalisticTranslation,className:"image-600",filename:"sample-app-untranslated.png"}),l.default.createElement(r.default,{id:"75da67be6f4edde211a735d18aa0c70a"}),l.default.createElement("p",null,"It is a trivial client app, but it has three representative types of text that need to be translated: function string parameters (e.g. the"," ",l.default.createElement(c.InlineSnippet,null,"alert")," argument), static text (e.g. the"," ",l.default.createElement(c.InlineSnippet,null,"button")," name) and text with dynamic values (e.g."," ",l.default.createElement(c.InlineSnippet,null,"Hello ","{","name","}"),"). It is written in React but the same ideas can be applied to other frameworks (e.g. Angular)."),l.default.createElement("p",null,"In order to translate the app we will first need to modify the UI to include a language selector and store the selected language as part of the application state. Storing it via ",l.default.createElement(c.InlineSnippet,null,"useState")," will take care about updating the application text every time the selected language changes. Having done that we can start with the actual translation part 💪"),l.default.createElement(s.ArticleImage,{alt:"Screenshot of the sample app including a language selector",articleId:o.ArticleId.minimalisticTranslation,className:"image-600",filename:"language-selector.png"}),l.default.createElement(r.default,{id:"894c4c82fdf59b6f7e82e027809fb7dc"}),l.default.createElement("h3",null,"Custom code: translate"),l.default.createElement("p",null,"A simple and effective approach consists in passing all the text that needs to be translated to a translation function, which receives the user selected language as the second argument. The translation function then uses the selected language and the translatable text to retrieve the corresponding translation from a"," ",l.default.createElement(c.InlineSnippet,null,"resources")," object."),l.default.createElement(r.default,{id:"905f10c961f0400e3e934c70294da09b"}),l.default.createElement("p",null,l.default.createElement("i",null,"We could use explicit keys instead of the english translatable text. For example:"," ",l.default.createElement(c.InlineSnippet,null,"{","translate('AREA_COMPONENT-DISCRIMINATOR', language)","}"),". That would give us more control over the management of translations, but it decreases the code readability, as the actual content will only be present in the resource files. Have a look at"," ",l.default.createElement(i.Anchor,{url:"https://github.com/capelski/translation-approaches/tree/main/source/translate-function/alternatives/explicit-keys"},"this alternative")," ","if you are interested.")),l.default.createElement("p",null,"The cornerstone of this approach is therefore building the resources object. We want to avoid having to do that manually so let's write a simple parser to do it for us. It must take a set of code files, locate all the calls to the"," ",l.default.createElement(c.InlineSnippet,null,"translate")," function, obtain each first argument and add them to a dictionary. We will use the actual english text as the dictionary keys. Here is a minimal TypeScript implementation of such parser:"),l.default.createElement(r.default,{id:"68e788aa153c0633af3848e9d86c7099"}),l.default.createElement("p",null,"A reliable parser must support many other scenarios, but this naive implementation (only allows single/double quote strings, with no escaped single/double quotes) is good enough for demonstration purposes. Running it (i.e."," ",l.default.createElement(c.InlineSnippet,null,"npx ts-node update-translations.ts"),") will generate the following JSON resources file, with empty values for all languages other than English."),l.default.createElement(r.default,{id:"1e1b494cfd3064aa205e66f77353b77e"}),l.default.createElement("p",null,l.default.createElement("i",null,"Note that the translation function returns the english text by default; we don't necessarily need to include the English text into the resources dictionary. Here I'm doing it for consistency.")),l.default.createElement("p",null,"We could call an external API to provide machine-generated translations but I'm not going to address that in this article. At this point, and given we only have a few translations, we can populate the file manually. Once that is done the"," ",l.default.createElement(c.InlineSnippet,null,"translate")," function has all it needs to transparently replace the english text with the corresponding selected language. Sweet! We have a first working version."),l.default.createElement(s.ArticleImage,{alt:"The sample app translated to Spanish",articleId:o.ArticleId.minimalisticTranslation,className:"image-600",filename:"sample-app-translated.png"}),l.default.createElement("p",null,l.default.createElement("i",null,"In some cases we might want to index the resources dictionaries with specific keys (e.g. using fixed length alphanumeric codes or UUIDs). It is not complicated to achieve; both the translate function and the parser will need to call an additional function to obtain the text key. Have a look at"," ",l.default.createElement(i.Anchor,{url:"https://github.com/capelski/translation-approaches/tree/main/source/translate-function/alternatives/hash-keys"},"this alternative")," ","if you are interested.")),l.default.createElement("h3",null,"Custom code: interpolation"),l.default.createElement("p",null,"You might have noticed that the string we are passing to the"," ",l.default.createElement(c.InlineSnippet,null,"alert")," function requires two separate translate calls. While it does the trick, it also breaks the resource files consistency. This happens because the position of the dynamic value within the message might be different for each language. To get around that we need to deliberately set some resources to be white space:"),l.default.createElement(r.default,{id:"c0a4b71bb1d4865f465fcc503992251a"}),l.default.createElement("p",null,"It also means including trailing whitespaces in the translations, which can easily be lost by translation tools. To resolve this problem most translation libraries allow using templates/placeholders in the translatable text. This concept is known as ",l.default.createElement("b",null,"interpolation")," and, once we have chosen a syntax to flag templates in the translatable text (e.g. ",l.default.createElement(c.InlineSnippet,null,"'Text [[template]]'"),"), it is relatively simple to implement."),l.default.createElement("p",null,"One way to do it is by adding a third parameter to the"," ",l.default.createElement(c.InlineSnippet,null,"translate")," function so it accepts a map of values. The map is expected to have a property for each template in the string parameter, and we will use the value of each property to replace the corresponding template in the string. Sounds more complicated than it actually is:"),l.default.createElement(r.default,{id:"7d31cd8f40cd30538e60ab5badaa481f"}),l.default.createElement("p",null,"Now ",l.default.createElement(c.InlineSnippet,null,"Hi! This is [[name]]'s laptop")," becomes"," ",l.default.createElement(c.InlineSnippet,null,'"Hi! This is World\'s laptop"')," (or, in Spanish,"," ",l.default.createElement(c.InlineSnippet,null,"Ey! Soy el ordenador de World"),"). This is starting to look solid 👌"),l.default.createElement("h3",null,"Custom code: declarative component"),l.default.createElement("p",null,"One last thing before moving on to using existing libraries. With the addition of the ",l.default.createElement(c.InlineSnippet,null,"translate")," function, the perfectly readable multiline text has become a long single line string. It would me more comfortable to have a ",l.default.createElement(c.InlineSnippet,null,"Translate")," component that allows for multiline text and implicitly calls the function with its children as first parameter."),l.default.createElement(r.default,{id:"60e6595586184916e1e71442f760655d"}),l.default.createElement("p",null,"Much nicer. This simple change has consequences however. On one hand, the HTML/JSX code can contain line breaks and multiple white spaces that we will not want to include in the resource files. We will need to remove such characters in the parser. And, additionally, because the resource files are indexed using the english content, we will also need to remove those characters in the Translate component (note the"," ",l.default.createElement(c.InlineSnippet,null,"parseHtml")," call)."),l.default.createElement("p",null,"On the other hand, we will need to modify the parser to extract the text inside the"," ",l.default.createElement(c.InlineSnippet,null,"Translate")," components, as well as the strings passed to the ",l.default.createElement(c.InlineSnippet,null,"translate")," function. Here things get complicated as"," ",l.default.createElement(i.Anchor,{url:"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags"},"HTML/JSX cannot really be parsed using regular expressions"),". We will modify our parser so it covers the sample app (using a multiline regular expression that matches text which doesn't contain the"," ",l.default.createElement(c.InlineSnippet,null,">")," character) but a solid approach requires building the code"," ",l.default.createElement(i.Anchor,{url:"https://en.wikipedia.org/wiki/Abstract_syntax_tree"},"abstract syntax tree"),"."),l.default.createElement(r.default,{id:"b9e34e34769dd5f1a968fd0f3c4f64ef"}),l.default.createElement("p",null,"Now that we understand the complexity of maintaining a custom solution, we are in a better position to chose from the existing libraries out there. We want a library that provides an explicit translation function, interpolation, automatic parsing of the code files and, ideally, a declarative component. Well, it's our lucky day 🍾"),l.default.createElement("h3",null,"Standard code: react-i18next"),l.default.createElement("p",null,"Why reinventing the wheel when there is an open-source, well tested and working library out there? It supports interpolation, a declarative component and a proper parser (e.g. it will not extract text that is commented out) to extract the translatable text from the code files. Say hi to your new ally:"," ",l.default.createElement(i.Anchor,{url:"https://www.npmjs.com/package/i18next"},"i18next"),"."),l.default.createElement("p",null,"Even though the documentation can be tricky, setting up"," ",l.default.createElement(c.InlineSnippet,null,"i18next")," is simple. We just need to install the package, along with the React flavour dependency (",l.default.createElement(c.InlineSnippet,null,"react-i18next"),"), and initialize it with the default language and the resources in the following fashion."),l.default.createElement(u.BlockSnippet,null,"npm install --save i18next react-i18next"),l.default.createElement("br",null),l.default.createElement(r.default,{id:"83472160301c67ad147ca14bbcba56f0"}),l.default.createElement("p",null,"Next, just like we did before for our custom translation code, we need to add a language selector to the UI. This time we don't need to store the selected language as part of the application state though, as i18next will take care of that:"),l.default.createElement(r.default,{id:"ffa2e8b63495cd4f8f85d9fbac4f40ab"}),l.default.createElement("p",null,"We are now ready to start using the i18next translation capabilities. In function components, such as our sample app, we can obtain the translation function by using the ",l.default.createElement(c.InlineSnippet,null,"useTranslation")," hook. We need to use the hook for React to re-render the component when the selected language changes. The declarative component, ",l.default.createElement(c.InlineSnippet,null,"Trans"),", is available out of the box. Putting it all together:"),l.default.createElement(r.default,{id:"3b775d42dd05bd245cea681979d9a08d"}),l.default.createElement("p",null,"Only one thing left to do: automatically extracting translatable text into resource files. We will need a parser for that. Here I'll be using"," ",l.default.createElement(c.InlineSnippet,null,"i18next-parser"),". It requires a fair bit of"," ",l.default.createElement(i.Anchor,{url:"https://github.com/i18next/i18next-parser?tab=readme-ov-file#options"},"configuration"),", but it supports Typescript without additional steps. By trial and error I got it working with the following parameters. Start here and tweak it to meet your needs:"),l.default.createElement(u.BlockSnippet,null,"npm install --save-dev i18next-parser"),l.default.createElement("br",null),l.default.createElement(r.default,{id:"3d07f33628b9a03181fec5aa2d2c2692"}),l.default.createElement("p",null,"Once you get the configuration right, running it will produce a resources file per each language, which we will need to import from the app. Note that i18next uses namespaces, expecting the resources for each language to be nested under a"," ",l.default.createElement(c.InlineSnippet,null,"translation")," property by default. To workaround that when not using namespaces we can explicitly generate an object that matches the i18next expectations:"),l.default.createElement(u.BlockSnippet,null,"npx i18next --config ./i18next-parser.config.js"),l.default.createElement("br",null),l.default.createElement(r.default,{id:"d7486cfc9687a3c77f6b8329ba84a435"}),l.default.createElement("p",null,l.default.createElement("i",null,"According to"," ",l.default.createElement(i.Anchor,{url:"https://www.i18next.com/overview/configuration-options#languages-namespaces-resources"},"the documentation")," ","it is possible to disable namespaces. I spent a good while trying to do so but I couldn't manage to.")),l.default.createElement("h3",null,"Bonus: machine generated content"),l.default.createElement("p",null,"As the application grows it won't be feasible to populate the resource files manually. Here is where a tool to manage the resource files can come in handy. There must be a bunch of tools for this purpose; I confess I haven't done any research on that. Here I'm suggesting"," ",l.default.createElement(i.Anchor,{url:"https://www.codeandweb.com/babeledit"},"BabelEdit"),", the tool we use at my current company. It requires purchasing a license but it does a good job and it comes with several useful features:"),l.default.createElement("ul",null,l.default.createElement("li",null,"Generating machine based translations."),l.default.createElement("li",null,"Filtering text that is empty for at least one language, or text that is equal to the default language."),l.default.createElement("li",null,"Managing the approval status of each text and language. This can be used to keep reflect which text has already been reviewed by human translators."),l.default.createElement("li",null,"Exporting the translations to a single CSV file containing all (or a subset of) the languages. CSV is the format that translators usually expect."),l.default.createElement("li",null,"Importing a CSV file containing the translations for several languages into the corresponding JSON files. When the translators send the CSV file back, this will update the JSON files automatically.")),l.default.createElement("p",null,"To start using it we need to create a new project (Generic JSON will do), import the JSON resource files and set the primary language. Babel saves the project in an XML file, which we will want to commit to the repository. From now on populating the resource files will be a matter of a few clicks!"),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.minimalisticTranslation,alt:"Creation of a BabelEdit project",filename:"babel-edit-new-project.png",className:"image-600"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.minimalisticTranslation,alt:"Adding languages to a BabelEdit project",filename:"babel-edit-add-languages.png",className:"image-600"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.minimalisticTranslation,alt:"Setting the primary language of a BabelEdit project",filename:"babel-edit-primary-language.png",className:"image-600"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.minimalisticTranslation,alt:"Resources view in BabelEdit (empty)",filename:"babel-edit-empty-resources.png",className:"image-600"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.minimalisticTranslation,alt:"Resources view in BabelEdit (pre-translated)",filename:"babel-edit-pretranslated-resources.png",className:"image-600"}),l.default.createElement("h3",null,"Conclusions"),l.default.createElement("p",null,"The main challenge when it comes to translating an app is detecting the text that needs to be translated and extracting it to resource files. Using a parser to automatically extract such texts makes the translation almost transparent from the developers point of view. And, if the parser is included in the continuous integration pipeline, it will make sure the resource files never go out of date."),l.default.createElement("p",null,"HTML/JSX parsers are not easy to implement and maintain however, so it's worth using existing open source libraries. Do your own research and pick the tools that better suit your needs. If you are happy to take my recommendation and go with"," ",l.default.createElement(c.InlineSnippet,null,"react-i18next"),", here is the"," ",l.default.createElement(i.Anchor,{url:"https://github.com/capelski/translation-approaches"},"sample code repository")," ","for you to start fiddling."))}},4484:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.minimalisticTranslation=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(2496);t.minimalisticTranslation={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2024-11-24",duration:10,id:l.ArticleId.minimalisticTranslation,languages:[r.Language.en],shareImage:"translation-art.jpg"}}},7408:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121),u=n(8892);t.english={title:"Create your own npm package",description:"How to create your own JavaScript library and publish it to npm",shareSentence:"Wait no more to create your own JavaScript library and publish it to npm!",introduction:l.default.createElement("p",null,"Web developers owe a great deal to npm JavaScript libraries. npm packages resolve common web problems in elegant ways, are free to use, rock solid (potentially tested by thousands of users) and save development efforts. No doubt npm makes our lives easier but... who are those anonymous open source heroes? Well, you can be the next one!"),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.npmPackagesDevelopment,alt:"Angry birds hero animation",className:"image-600",filename:"hero.gif"}),l.default.createElement("h3",null,"Why creating a Javascript library?"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,"To help yourself"),": How many times did you start implementing a feature in a project and suddenly remember about a time you did something similar in another project? Instead of copy and pasting the code from one repository to the other you can create a new repository to hold contain piece of code in a single place. It will be easier to for you to maintain it and you can add some usage examples so that next time you want to use it, you will easily remember how to do so."),l.default.createElement("li",null,l.default.createElement("b",null,"To become a better developer"),": Writing code for others is much more demanding than writing it for yourself or your team. When creating a library, you must focus on the library behavior, making the Api as simple and intuitive as possible. When turning your killer code into a library you will end up understanding better it's intention and you might be surprised to discover design flaws or unnoticed dependencies."),l.default.createElement("li",null,l.default.createElement("b",null,"To make the world a better place"),": In the same way you can reuse that brilliant utilities others might also find them useful. Aren't you grateful when you find an npm package that does exactly what you need? Then wait no more to start contributing back to the community. Plus the more people there is running your code the more your library will evolve and become better."," ",l.default.createElement(i.Anchor,{url:"https://www.npmjs.com/package/redux"},"redux")," is an excellent example of a library that was started by a single developer and is now used by millions, having received contributions from over 800 developers."),l.default.createElement("li",null,l.default.createElement("b",null,"To feed your ego"),": Last but not least! Nothing can make a developer more proud of himself than having conceived and developed a library that people use 😎 Even if the only user of the library is the developer himself (I can tell from personal experience).")),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.npmPackagesDevelopment,alt:"Macaulay culkin celebrating",className:"image-600",filename:"yes.gif"}),l.default.createElement("h3",null,"How to publish a Javascript library to npm"),l.default.createElement("p",null,"Publishing a package to npm is rather easy; you just need to"," ",l.default.createElement(i.Anchor,{url:"https://www.npmjs.com/signup"},"create an account")," and upload the package by running the following command within your project directory. In fact, you can upload any type of file inside an npm package; from your parents wedding video to a pdf version of the bible. The tricky part of publishing a package is actually to make it easy to use and understand, while keeping it small-sized, functioning and properly versioned."),l.default.createElement(u.BlockSnippet,null,"npm publish"),l.default.createElement("p",null,"Here is a checklist you want to cover in order to build a great library:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,"README.md"),": Help potential users of your library understanding what it does and how it works through this markdown introduction file. It typically contains a description of the library goal, usage examples and eventually some links to relevant content (e.g. official documentation page). npm will display the information in this file in the npm package page, just as Github does when accessing a repository (no wonder they encourage you to add a README file to all your repositories):",l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.npmPackagesDevelopment,alt:"Add readme file Github banner",filename:"github-add-readme.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"Versioning"),": both npm and users identify different releases of your library by the ",l.default.createElement("b",null,"version")," field of your package.json file. If you try to publish a new release of your package without changing the version number, npm will throw an error. Get familiar with"," ",l.default.createElement(i.Anchor,{url:"https://semver.org/"},"semantic versioning")," and make sure you properly update the version depending on the type of your release:",l.default.createElement(u.BlockSnippet,null,"npm version [major|minor|patch]")),l.default.createElement("li",null,l.default.createElement("b",null,".npmignore"),": Web developers are sensitive to libraries size so it's in your interest to keep yours small. Plus, uploading useless files to npm only consumes network bandwidth and storage space in npm servers; be a good samaritan and keep your garbage away. This file tells npm which files to exclude when publishing a package. Typical files you will want to exclude are the tests, reports and the source files if you are using a transpiler."),l.default.createElement("li",null,l.default.createElement("b",null,"Testing"),": Prevent breaking old features while developing new ones by writing tests and running them before every publish. Nothing bothers developers more than a broken feature due to a library update. Plus, users will find out about the issues hours later of your release; you will find yourself rushing to revert the changes or fix the issues and publishing a new version. Great open source libraries always come with great testing."),l.default.createElement("li",null,l.default.createElement("b",null,"Types declaration"),": Help users understanding how to use your library by providing types declaration. You do that by exporting your library types from a"," ",l.default.createElement("b",null,".d.ts")," typescript file (automatically generated by the typescript compiler when enabling the ",l.default.createElement("b",null,"declaration")," option) and referencing that file from the"," ",l.default.createElement("b",null,"types")," field of your package.json. If don't use Typescript in your library, you can manually generate the file. You will get visual studio code to display all the available properties in your components:",l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.npmPackagesDevelopment,alt:"Visual studio code intellisense dropdown",className:"image-600",filename:"intellisense.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"Transpiling:")," A common error when using transpilers (e.g. Typescript, babel, etc.) is to publish a new version of the library without transpiling the code first. Force npm to build your project before each release by adding a"," ",l.default.createElement("b",null,"prepublishOnly")," script in your package.json. Typically it will just run the build command. I also like to remove the entire distribution folder to prevent publishing old files.")),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.npmPackagesDevelopment,alt:"Man making explicit he is ready",className:"image-600",filename:"ready.gif"}),l.default.createElement("h3",null,"Some examples"),l.default.createElement("p",null,"Need some inspiration to get you started? Here are some examples which, what a coincidence, happen to be developed by me. Luckily, they will help preventing you from making the same mistakes:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement(i.Anchor,{url:"https://www.npmjs.com/package/cucumber-steps-parser"},"cucumber-steps-parser"),": Simple library I developed while working at Sage that searches for all the cucumber.js sentence definitions in a Javascript/Typescript project. The first version was not very intuitive, so the second had a slightly more descriptive api. Accepting config options in an optional argument (v2) is always more descriptive having many optional arguments (v1):",l.default.createElement(r.default,{id:"315b047c3e1209aaf03a0b330e2f913d"}),l.default.createElement(r.default,{id:"f4a511af5f858641d7dcd3c437deebe3"})),l.default.createElement("li",null,l.default.createElement(i.Anchor,{url:"https://www.npmjs.com/package/react-redux-link"},"react-redux-link"),": Monkey patching of the"," ",l.default.createElement(i.Anchor,{url:"https://www.npmjs.com/package/react-redux"},"react-redux")," ","package. I wrote the code (145 lines in total) as a part of another project and realized it was generic enough to exist on its own. The proof that there is no minimal functionality level a library must provide.",l.default.createElement("br",null),l.default.createElement("br",null),"It provides type safety when connecting the react components to the redux store, highlighting missing properties and bad types. It requires to declare the component properties interface using ",l.default.createElement("b",null,"ReduxComposedProps")," and replace the react-redux ",l.default.createElement("b",null,"connect")," with ",l.default.createElement("b",null,"link"),":",l.default.createElement(r.default,{id:"cb93ecd355a621990623169446f5ff78"}),l.default.createElement(r.default,{id:"88f20d0b0a4c1b003824789b9426b4a9"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.npmPackagesDevelopment,alt:"Man making explicit he is ready",className:"image-600",filename:"react-redux-link.png"})),l.default.createElement("li",null,l.default.createElement(i.Anchor,{url:"https://www.npmjs.com/package/modena"},"modena"),": Web server that allows exposing multiple express apps on a single domain isolated from each other. The"," ",l.default.createElement(i.Anchor,{url:"https://github.com/capelski/modena-v1"},"first version")," was meant to make the hosted apps code as light as possible, but it turned out to be a total mess.",l.default.createElement("br",null),l.default.createElement("br",null),"It imposed restrictions on the hosted apps (e.g. EJS template language, passport.js for authentication, the route of the static assets, etc.) and forced them to install modena as a dependency and use it to define the express routes (making it hard to run the app as standalone). It also included non related functionalities (such as dynamic SASS compilation) which made the library heavier for features that most times wouldn't be used.",l.default.createElement(r.default,{id:"f07609653bc05ec07f56d4953f43aa0b"}),l.default.createElement("br",null),"A library that provides features on top of other libraries must respect those libraries conventions. I had no other option to re-write the library from scratch, removing the non-related features and keeping in mind that hosted apps existed in their own. Making a library too rigid will only result in nobody using it.")),l.default.createElement("p",null,"And that's all there is! Wait no more and go publishing your brand new library 💪"))}},643:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.npmPackagesDevelopment=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(7408);t.npmPackagesDevelopment={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2020-11-04",duration:5,id:l.ArticleId.npmPackagesDevelopment,languages:[r.Language.en],shareImage:"yes.gif"}}},2e3:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectView=void 0;var l=a(n(7294));t.ObjectView=function(e){return l.default.createElement(r,{parentPrefix:"",object:e.object})};var r=function(e){var t,n=Array.isArray(e.object),a="string"==typeof e.object,i="boolean"==typeof e.object,o=void 0===e.object,s=null===e.object,u=!s&&"object"==typeof e.object;return l.default.createElement(l.default.Fragment,null,n?l.default.createElement(l.default.Fragment,null,"[",l.default.createElement("br",null)):u?l.default.createElement(l.default.Fragment,null,"{",l.default.createElement("br",null)):void 0,u?(t="".concat(e.parentPrefix,"   "),Object.keys(e.object).map((function(a){return l.default.createElement(l.default.Fragment,{key:a},t,!n&&l.default.createElement(l.default.Fragment,null,'"',a,'": '),l.default.createElement(r,{parentPrefix:t,object:e.object[a]}))}))):l.default.createElement(l.default.Fragment,null,a&&'"',i?!0===e.object?"true":"false":o?"undefined":s?"null":e.object,a&&'"',l.default.createElement("br",null)),n?l.default.createElement(l.default.Fragment,null,e.parentPrefix,"]",l.default.createElement("br",null)):u?l.default.createElement(l.default.Fragment,null,e.parentPrefix,"}",l.default.createElement("br",null)):void 0)}},6370:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121),u=n(8892),c=n(5922);t.english={title:"Supporting offline data on ever-changing database schemas",description:"How to support offline data on ever-changing database schemas",shareSentence:"This is how Trello-like apps support offline data on ever-changing database schemas",introduction:l.default.createElement("p",null,"Apps that allow users to generate data while being offline (Trello, for example) generally provide a better user experience. They must resolve a challenge however: because the database schema naturally changes as the app evolves, the server must support incoming data generated on an old schema version. How? Here is one way of doing it."),body:function(){return l.default.createElement(l.default.Fragment,null,l.default.createElement(s.ArticleImage,{alt:"Hard disk drive",articleId:o.ArticleId.otfMigrations,className:"image-600",filename:"hard-drive.jpg"}),l.default.createElement("h3",null,"The challenge"),l.default.createElement("p",null,"At ",l.default.createElement(i.Anchor,{url:"https://peekvision.org/"},"Peek Vision"),", the company I work for, we collect eye health data from patients in rural areas with little or no connectivity. This means that devices must be able to collect data while being offline. And devices stay offline for surprisingly long periods of time: usually several days, often a couple weeks and sometimes even months."),l.default.createElement("p",null,"When devices finally go online they send the data they have collected to the server. Which, like most web APIs, performs validations on it: if the incoming data doesn't have the expected format it will be rejected. Nothing unusual. But turns out that, as the app evolves and new software is released, the expected formats can change, potentially rendering invalid data collected on offline devices running on a previous software release."),l.default.createElement("p",null,"Having hundreds of active users there will hardly be any moments where all devices have synced their data. Therefore we needed a mechanism to allow data generated on a previous release to be accepted by the server running on a newer release. We called that mechanism on-the-fly migrations, or OTF migrations for short."),l.default.createElement("p",null,"The idea behind OTF migrations is quite straightforward: intercepting arriving data before validating it and applying required migrations if necessary. OTF migrations can be implemented at either global level or endpoint level. Personally, I find it cleaner to go for the endpoint level, but both approaches are equally valid:"),l.default.createElement("ul",null,l.default.createElement("li",null,"A global interceptor defines a single entry point for migrations, making endpoints migrations agnostic, but it requires checking the request method (we will only want to migrate request that have a body) and evaluating the requests' URL to decide which migrations need to run on a given payload."),l.default.createElement("li",null,"Endpoint-level interceptors split the migrations into several entry points, making endpoints migrations aware, but it produces simpler interceptors code.")),l.default.createElement("h3",null,"Hands on"),l.default.createElement("p",null,"Consider a Trello-like app that allows creating notes in offline devices. The notes contains just a text field and the server has an endpoint that receives one note at a time, to which offline notes are posted when devices go online. This is what a NestJS implementation could look like, plus a sample client call:"),l.default.createElement(r.default,{id:"989f37b845ea0ee16907b021c5413eb3"}),l.default.createElement("p",null,l.default.createElement("i",null,"The implementation will obviously vary depending on the server framework. Here I'm using NestJS but the core idea is applicable to any framework.")),l.default.createElement(u.BlockSnippet,null,"$ curl \\",l.default.createElement("br",null),' --header "Content-Type: application/json" \\',l.default.createElement("br",null)," --request POST \\",l.default.createElement("br",null),' --data "',"{",'\\"text\\": \\"Write that medium article I\'ve been postponing\\"',"}",'" \\',l.default.createElement("br",null)," http://localhost:3000/notes",l.default.createElement("br",null),l.default.createElement("br",null),"{",'"text":"Write that medium article I\'ve been postponing"',"}"),l.default.createElement("p",null,"So far so good. Now it's time to introduce some breaking changes 💣 Let's assume that, at some point, we decide the notes will have a title and a description instead of a single text field."),l.default.createElement("p",null,"We will change the database schema accordingly and write a script to migrate the existing data in the database. We will update the app as well to post the notes with a title and an optional description. Not a trivial change, but simple enough:"),l.default.createElement(r.default,{id:"e7ea8df7d127fceccd36c7bff9f56899"}),l.default.createElement(u.BlockSnippet,null,"$ curl \\",l.default.createElement("br",null),' --header "Content-Type: application/json" \\',l.default.createElement("br",null)," --request POST \\",l.default.createElement("br",null),' --data "',"{",'\\"title\\": \\"Enough excuses\\", \\"description\\": \\"Write that medium article I\'ve been postponing\\"',"}",'" \\',l.default.createElement("br",null)," http://localhost:3000/notes",l.default.createElement("br",null),l.default.createElement("br",null),"{",'"title": "Enough excuses", "description": "Write that medium article I\'ve been postponing"',"}"),l.default.createElement("p",null,"Note however that some devices might have generated offline data using the old schema (i.e. a note with a single text field), and they might not have synced the data by the time we deploy the changes to the live environment. In those cases the incoming notes will result in a validation error:"),l.default.createElement(u.BlockSnippet,null,"$ curl \\",l.default.createElement("br",null),' --header "Content-Type: application/json" \\',l.default.createElement("br",null)," --request POST \\",l.default.createElement("br",null),' --data "',"{",'\\"text\\": \\"Write that medium article I\'ve been postponing\\"',"}",'" \\',l.default.createElement("br",null)," http://localhost:3000/notes",l.default.createElement("br",null),l.default.createElement("br",null),"{",'"message":["title must be a string"],"error":"Bad Request","statusCode":400',"}"),l.default.createElement("p",null,"Here is where OTF migrations will come handy. In a nutshell, we want to manipulate the request body before the"," ",l.default.createElement(c.InlineSnippet,null,"class-validator")," logic kicks in. There are several ways to achieve this in NestJS and here I'll use interceptors."),l.default.createElement("p",null,l.default.createElement("i",null,"We could use middleware as well, but I find that slightly more obscure for this use case, as the Nest middleware must be applied to modules, whereas interceptors can be applied to specific endpoints.")),l.default.createElement("p",null,"An interceptor class must implement the"," ",l.default.createElement(c.InlineSnippet,null,"NestInterceptor")," interface, and it can then be applied to any endpoint via the ",l.default.createElement(c.InlineSnippet,null,"UseInterceptors")," ","decorator. Here is what our interceptor could look like and how to use it in the note creation endpoint:"),l.default.createElement(r.default,{id:"e3620e90cc699cb82fc6a5e89b8c76a9"}),l.default.createElement(u.BlockSnippet,null,"$ curl \\",l.default.createElement("br",null),' --header "Content-Type: application/json" \\',l.default.createElement("br",null)," --request POST \\",l.default.createElement("br",null),' --data "',"{",'\\"text\\": \\"Write that medium article I\'ve been postponing\\"',"}",'" \\',l.default.createElement("br",null)," http://localhost:3000/notes",l.default.createElement("br",null),l.default.createElement("br",null),"{",'"title":"Write that medium article I\'ve been postponing"',"}"),l.default.createElement("p",null,"Simple yet effective: the notes generated in the old schema version will now be automatically migrated and accepted by the class validators 💃"),l.default.createElement("p",null,"This implementation is not very scalable however. Chances are that we will need more OTF migrations as the app evolves, having to add more"," ",l.default.createElement(c.InlineSnippet,null,"UseInterceptors")," decorators, in the correct order, to each endpoint that requires OTF migrations."),l.default.createElement("p",null,"To prevent that we can group the different OTF migrations that must be applied to each model in a single interceptor. An elegant way of doing so is to split the interceptor from the migrations themselves, turning each migration into a simple function that will be invoked from the interceptor. Beautiful 💘"),l.default.createElement(r.default,{id:"f4cc6682e06b1f139c1f5d23d2b241f9"}),l.default.createElement("p",null,"Another challenge of this implementation is that migrations will always run, even for data generated in the current schema version. This might backfire at us. Imagine we decide to add a boolean ",l.default.createElement(c.InlineSnippet,null,"text")," ","property; the OTF migration will incorrectly replace the notes title. We need to prevent that from happening. We can determine which OTF migrations need to be applied to an incoming piece of data by:"),l.default.createElement("ul",null,l.default.createElement("li",null,"Including the current schema version to each entity generated on the app. The schema can be sent either as a separate parameter or as part of the entity itself. In this article, I'll use the latter."),l.default.createElement("li",null,"Specifying a target schema version for each migration."),l.default.createElement("li",null,"Comparing the schema version of the incoming data with the target schema of each migration.")),l.default.createElement(r.default,{id:"9b62e3a409158d3896d48fe81b704265"}),l.default.createElement("p",null,l.default.createElement("i",null,"Note that now we no longer need to check whether"," ",l.default.createElement(c.InlineSnippet,null,"body.text")," exists; the schema condition ensures the incoming data will have a text property.")),l.default.createElement("p",null,"From now on the schema property included in the data will determine which OTF migrations are executed. Once the migrations have been applied, technically, we no longer need the schema property. We can either:"),l.default.createElement("ul",null,l.default.createElement("li",null,"Delete the property, so it doesn't end up in the database. Note we need to delete the property once all the potential OTF migrations have been applied."),l.default.createElement("li",null,"Keep the property, as it might be useful to migrate existing data in the database. In this case we need each migration to set the schema property on the entity to the migration's target schema.")),l.default.createElement("p",null,"Adding the aforementioned ",l.default.createElement(c.InlineSnippet,null,"text")," property no longer messes with the incoming data:"),l.default.createElement(r.default,{id:"c4a2f69ab305139b08393313d9b6442b"}),l.default.createElement(u.BlockSnippet,null,"$ curl \\",l.default.createElement("br",null),' --header "Content-Type: application/json" \\',l.default.createElement("br",null)," --request POST \\",l.default.createElement("br",null),' --data "',"{",'\\"text\\": \\"Write that medium article I\'ve been postponing\\"',"}",'" \\',l.default.createElement("br",null)," http://localhost:3000/notes",l.default.createElement("br",null),l.default.createElement("br",null),"{",'"title":"Write that medium article I\'ve been postponing", "schema": 2, "text": true',"}"),l.default.createElement(u.BlockSnippet,null,"$ curl \\",l.default.createElement("br",null),' --header "Content-Type: application/json" \\',l.default.createElement("br",null)," --request POST \\",l.default.createElement("br",null),' --data "',"{",'\\"title\\": \\"Enough excuses\\", \\"description\\": \\"Write that medium article I\'ve been postponing\\", \\"schema\\": 1',"}",'" \\',l.default.createElement("br",null)," http://localhost:3000/notes",l.default.createElement("br",null),l.default.createElement("br",null),"{",'"title": "Enough excuses", "description": "Write that medium article I\'ve been postponing", "schema": 2, "text": true',"}"),l.default.createElement(u.BlockSnippet,null,"$ curl \\",l.default.createElement("br",null),' --header "Content-Type: application/json" \\',l.default.createElement("br",null)," --request POST \\",l.default.createElement("br",null),' --data "',"{",'\\"title\\": \\"Enough excuses\\", \\"description\\": \\"Write that medium article I\'ve been postponing\\", "text": false, \\"schema\\": 2',"}",'" \\',l.default.createElement("br",null)," http://localhost:3000/notes",l.default.createElement("br",null),l.default.createElement("br",null),"{",'"title": "Enough excuses", "description": "Write that medium article I\'ve been postponing", "text": false, "schema": 2',"}"),l.default.createElement("p",null,"Finally we can slightly improve the interceptors by automatically sorting the migrations based on the target schema and extracting the common behavior to a base class. This is not really necessary but, hey, we developers cannot help ourselves from refactoring, can we?"),l.default.createElement(r.default,{id:"8acb318477b5758996a971870465f351"}),l.default.createElement("p",null,"And that's it. A well tested OTF migrations architecture for NestJS/express servers. See this"," ",l.default.createElement(i.Anchor,{url:"https://github.com/capelski/otf-migrations"},"working demo repository")," ","for more details. Credit goes to Richard Evans, our lead developer, who will retire in September but whose contributions will remain in the company's legacy for years to come 🍻"))}}},4605:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.otfMigrations=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(6370);t.otfMigrations={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2024-08-07",duration:6,id:l.ArticleId.otfMigrations,languages:[r.Language.en],shareImage:"hard-drive.jpg"}}},3578:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(4711),i=n(7297);t.english={title:"Persuasion in pictures",description:"A graphical cheat sheet to become a better persuader",introduction:l.default.createElement("p",null,"What would I know about persuasion? Well, not that much to be honest. That's why I used this confinement time to improve my social skills through Brandon Hakim's persuasion"," ",l.default.createElement(r.Anchor,{url:"https://www.udemy.com/course/persuasion-masterclass-how-to-powerfully-influence-anyone/"},"udemy course"),". Regardless how much I learned, I do recommend the course because it made me ponder about how people communicates effectively (and it inspired me to draw the pictures below). Here is a quick summary of the course main points. Did you already know them all?"),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(i.PersuasionHeader,{description:"The following three patterns are usual in irritating conversations. They make sense from a rational point of view, but they are not effective to empathize with the other person. Try to stay away from them",image:"avoid.png",imageAlt:"Arrow avoiding object",title:"Avoid"}),l.default.createElement("div",{className:"persuasion-resources"},l.default.createElement(i.PersuasionResource,{description:"Highlighting the other person mistakes might be perceived as an attempt to make them look stupid or uninformed, even when doing it with the best of your intentions. If you think the other person is mistaking, ask for clarifications rather than refuting their points",image:"bullseye.png",imageAlt:"Weapon bullseye",title:"Make people wrong"}),l.default.createElement(i.PersuasionResource,{description:"If you just focus on getting the other person to understand you, you show yourself as an egocentric person. Just like babies do, you might end up getting what you want, but the other person might not be happy about it. You still will have a chance to explain yourself after listening to the other person",image:"pacifier.png",imageAlt:"Pacifier",title:"Explain yourself first"}),l.default.createElement(i.PersuasionResource,{description:"What works for you might not work for others. Avoid preaching your personal religion to people who might find themselves in a different situation. Your reasons might end up working for them too, but they will have to get to them on their own way",image:"preach.png",imageAlt:"Representation of god",title:"Give your reasons"})),l.default.createElement(i.PersuasionHeader,{description:"You can lead people to an answer, but you can't give it to them. The following three elements address the subconscious rather than the rational mind, so they are more likely to be accepted by the other person",image:"adopt.png",imageAlt:"Hand waiting to receive something",title:"Adopt"}),l.default.createElement("div",{className:"persuasion-resources"},l.default.createElement(i.PersuasionResource,{description:"Maybe you think you have the answer to someone's problems but giving the answer straight away meets rational resistance from the other person. Maybe you think the other person is mistaking but you are the one who got it wrong. Questions are a great way to get/provide deeper explanations and sometimes help realizing about wrong assumptions",image:"questions.png",imageAlt:"Question mark in the shape of a light bulb",title:"Questions"}),l.default.createElement(i.PersuasionResource,{description:"Stories are more objective than ideas and beliefs. By expressing your points in the form of an story, you separate your opinions from the concepts, letting the other person look at the subject through impartial lenses and understanding it according to their own beliefs",image:"stories.png",imageAlt:"Binoculars",title:"Stories"}),l.default.createElement(i.PersuasionResource,{description:"The best way to explain a concept to someone is by using the knowledge they already have, even if is not directly connected to the subject. Metaphors are a great technique to translate your ideas into another field where the person might feel more comfortable",image:"metaphors.png",imageAlt:"Translation representation",title:"Metaphors"})),l.default.createElement("h3",{className:"persuasion-header"},"Persuasion stages"),l.default.createElement("p",null,"If you think of the last time somebody convinced you to do something, they probably went through some of the following stages. Covering them all will help you showing the other person that you care about them rather than getting them thinking you are trying to manipulate them for your own selfish reasons."),l.default.createElement("p",null,"You can split the stages throughout multiple conversations or cover them all in a row if the other person is connecting with you enough. You can also skip stages if you have already been there before with the person you are trying to convince."),l.default.createElement("div",{className:"persuasion-resources"},l.default.createElement(i.PersuasionStage,{description:"Meet the other person at their emotional level. If you can't empathize with them, leave the persuasion for another moment",image:"encounter.png",title:"1) Encounter"}),l.default.createElement(i.PersuasionStage,{description:"Introduce your subject in the conversation and make sure the other person is willing to talk about it now. If they are not, persuasion is bound to fail. Again, leave it for another occasion",image:"allowance.png",title:"2) Allowance"}),l.default.createElement(i.PersuasionStage,{description:"Listen to other person emotions and point of view. Connect yourself to that emotions if possible. If you can see negative consequences from the current situation, expose them so you prove to the other person that you feel their pain",image:"understand.png",title:"3) Understand"}),l.default.createElement(i.PersuasionStage,{description:"Find out about the ideal situation the other person would like to be in. Often we chase some self imposed goals and we don't realize why we feel certain desires. Questions are the best way to go deeper and discover the real reasons of a person",image:"explore.png",title:"4) Explore"}),l.default.createElement(i.PersuasionStage,{description:"Find out the other person motivation level, how ready are them from 0 to 10 to take action in order to improve their current situation",image:"discover.png",title:"5) Discover"}),l.default.createElement(i.PersuasionStage,{description:"Introduce your purpose sincerely. Give an honest option to decline the offer, so the other person doesn't feel pressed. If possible, keep a positive aspect of your offer untold, to reveal it at the end of the persuasion",image:"offer.png",title:"6) Offer"}),l.default.createElement(i.PersuasionStage,{description:"Detect skepticism and address obstacles. If an obstacle makes the persuasion impossible, don't insist. You will have to leave it here until you come up with a way to dodge that obstacle",image:"workaround.png",title:"7) Workaround"}),l.default.createElement(i.PersuasionStage,{description:"Establish some commitment with the purpose. Set a date for the next step or require an action from the other person",image:"forge.png",title:"8) Forge"}),l.default.createElement(i.PersuasionStage,{description:"At this point, the person might feel they made a wrong decision. Thank them for making the decision and set the expectations on the next steps",image:"clarify.png",title:"9) Clarify"}),l.default.createElement(i.PersuasionStage,{description:"If you managed to kept untold a positive aspect of your suggestion, reveal it here as a bonus to make the other person feel even more comfortable for their decision making",image:"dazzle.png",title:"10) Dazzle"})),l.default.createElement("h3",{className:"persuasion-header"},"Persuasive traits development"),l.default.createElement("p",null,"Understanding the previous stages will give you some advantage next time you try to convince someone but the best way to do so is by generating trust. The following exercises will help you developing personality traits that most people appreciate, making it easier for you to reach people"),l.default.createElement("div",{className:"persuasion-resources"},l.default.createElement(i.PersuasionResource,{description:"People will listen to you almost unconditionally if they know you truly care about them. Practice demonstrating you care by searching for 3 things to appreciate in people that surrounds you",image:"care.png",imageAlt:"Band-aids",title:"Caring"}),l.default.createElement(i.PersuasionResource,{description:"You need to be the best version of yourself in order to inspire other people. Find what gets you feeling at your best and promote it in your life. Might be swimming, playing the guitar, running, reading, uploading videos to your YouTube channel, etc. Get yourself as motivated as you need to be!",image:"motivation.png",imageAlt:"Flexing biceps",title:"Motivated"}),l.default.createElement(i.PersuasionResource,{description:"We usually like to listen to people who sound convinced about what they say. Improve your confidence by putting a mirror in front of you and telling yourself how you want to behave. It might sound stupid, but it can help you understanding how convincent you sound when you speak",image:"confidence.png",imageAlt:"Raised fist",title:"Confident"}),l.default.createElement(i.PersuasionResource,{description:"Haste and jitters make you look anxious and people feel uncomfortable. Accepting the reality as is helps controlling the urge and realizing that you don't need anything from anyone. Meditate regularly to improve the inner calm. 10 minutes a day can be enough",image:"calm.png",imageAlt:"Person meditating",title:"Calmed"}),l.default.createElement(i.PersuasionResource,{description:"Persuasion happens when your emotions are transmitted in their purest form to the listener. You can be more contagious by regularly singing or dancing, at closed doors if you like. Another good exercise is to read out loud with enthusiasm for 10 minutes every day",image:"contagion.png",imageAlt:"Lightning",title:"Contagious"}),l.default.createElement(i.PersuasionResource,{description:"Your word is your value. Practice what you preach and you will generate trust. Practice being consistent by sticking to some good habit of your choice, e.g., go to bed at the same time for 15 days in a row, read half an hour everyday with no excuses, etc.",image:"consistency.png",imageAlt:"Gear",title:"Consistent"})),l.default.createElement("p",null,"And that's about it! As usual when writing about such subjective and abstract topics, I can't help feeling it all sounds like dime-store psychology. In an attempt to make it more bearable I decided to draw some visuals, but still I am not sure I did succeed. Maybe someone will now think which aspects they can apply to their interactions to become more persuasive. Maybe it will help someone realizing it is in their hands to make a better impression on other people. In the worst case, you can always make fun of my drawing skills 😃 See you in the next post!"))}},7297:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PersuasionResource=t.PersuasionStage=t.PersuasionHeader=void 0;var l=a(n(7294)),r=n(974);t.PersuasionHeader=function(e){return l.default.createElement("div",{className:"persuasion-header"},l.default.createElement("div",null,l.default.createElement("h3",null,e.title),l.default.createElement("p",null,e.description)),l.default.createElement("img",{src:"/images/blog/".concat(r.ArticleId.persuasionInPictures,"/").concat(e.image),alt:e.imageAlt}))},t.PersuasionStage=function(e){return l.default.createElement("div",{className:"persuasion-resource"},l.default.createElement("img",{className:"persuasion-resource-image",src:"/images/blog/".concat(r.ArticleId.persuasionInPictures,"/").concat(e.image),alt:"".concat(e.image.split(".")[0]," representation")}),l.default.createElement("h4",null,e.title),l.default.createElement("p",null,e.description))},t.PersuasionResource=function(e){return l.default.createElement("div",{className:"persuasion-resource"},l.default.createElement("h4",null,e.title),l.default.createElement("img",{className:"persuasion-resource-image",src:"/images/blog/".concat(r.ArticleId.persuasionInPictures,"/").concat(e.image),alt:e.imageAlt}),l.default.createElement("p",null,e.description))}},4694:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persuasionInPictures=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(3578);t.persuasionInPictures={content:function(){return i.english},metadata:{category:a.ArticleCategory.offTopic,date:"2020-06-14",duration:4,id:l.ArticleId.persuasionInPictures,languages:[r.Language.en],shareImage:"contagion.png"}}},7216:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121);t.english={title:"PWA: Make your website available offline",description:"Quick guide on how to turn a single page application into a progressive web app",introduction:l.default.createElement("p",null,"If you are visiting this website from a mobile device, you might have seen the following message at the bottom of the screen. No, I am not trying to hack you. I have made my website a"," ",l.default.createElement(i.Anchor,{url:"https://developers.google.com/web/progressive-web-apps/"},"progressive web app")," ","and, as such, it can be accessed offline and it can be installed in Android and iOS devices. Keep reading and turn your website into a PWA in less than 15 minutes!"),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.progressiveWebApps,className:"image-300",filename:"add-home.png",footer:"Add PWA to home screen prompt"}),l.default.createElement("p",null,"The magic behind the progressive web apps are the"," ",l.default.createElement(i.Anchor,{url:"https://developers.google.com/web/fundamentals/primers/service-workers/"},"service workers"),". To cut a long story short, a service worker is a script that the browser runs in the background, in a separate thread from the UI, providing additional features such as the ability to intercept and handle network requests as well as managing a cache of responses. In fact, this is the only feature we will need to make our website available offline."),l.default.createElement("p",null,"A service worker lifecycle is completely separate from the web application so, first, it must be registered through the browser ",l.default.createElement("b",null,"navigator API"),". You will want to register the service worker as soon as possible so all the application requests are intercepted and handled (including the application Javascript files themselves). For that reason, I place the service worker registration in a script tag inside the head tag of the HTML page:"),l.default.createElement(r.default,{id:"86e97f458a65a9171ec7e825438516b7"}),l.default.createElement("p",null,"The register method tells the browser to search for a service worker in the"," ",l.default.createElement("b",null,"sw.js")," file and will start the install step in the background. Thus the next thing to be done is to tell the service worker what to do during the install step which, typically, will consist in caching some static assets."),l.default.createElement("p",null,"There are multiple caching strategies to choose from when it comes to service workers and they are all very well explained in"," ",l.default.createElement(i.Anchor,{url:"https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#serving-suggestions"},"the offline cookbook"),". Take a look at them to know which patterns there are and which ones suit better your application needs (you might apply different strategies depending on the type of resource being cached and how often they get updated). I chose the"," ",l.default.createElement("b",null,"network falling back to cache")," strategy for my webpage for the following reasons:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,"Simplicity"),". There are better performing strategies (e.g."," ",l.default.createElement("b",null,"Cache then network")," or ",l.default.createElement("b",null,"Cache & network race"),") but they add more complexity to the service worker implementation. Let's keep in mind that the only goal of this exercise is to make the website available offline, not to optimize the time to content"),l.default.createElement("li",null,"I first started with ",l.default.createElement("b",null,"cache falling back to network")," for better performance but, given I frequently update the application, I was getting errors due to old versions of static assets being cached. Feel free to dedicate some time to solve those errors but, again, the purpose of this tutorial is just to make the website available offline")),l.default.createElement("p",null,"So, without further ado, let's implement the service worker. First we need to add a specific set of files to the cache during installation. If all the files are cached successfully, then the service worker becomes installed and we get those static assets available in the cache. If any of the files fail to download and cache, then the install step will fail and the service worker won't activate (not the end of the world though, it will try to install again the next time the page is loaded)."),l.default.createElement("p",null,"The shorter the list is the least chances the installation has to fail (and the rest of assets can be cached later on anyway). In my case, I am only caching the landing page of my site. The"," ",l.default.createElement(i.Anchor,{url:"https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self"},"self property")," ","is a reference to the WorkerGlobalScope (available only in service worker threads):"),l.default.createElement(r.default,{id:"2771714847be79eb7340de48988f5d5f"}),l.default.createElement("p",null,"Now let's get the work done! The most important part of our service worker is the"," ",l.default.createElement("b",null,"fetch")," listener. This handler will intercept every network request and will allow us to serve a cached version of a given resource, which, due to the"," ",l.default.createElement("b",null,"Network falling back to cache")," strategy, will happen only if the corresponding network request fails (lines 35-37). Don't forget to add the asset to the cache on a successful network response in order to keep the cache content updated (line 31). The ",l.default.createElement("b",null,"clone")," method is required because the responses can only be consumed once."),l.default.createElement("p",null,"Optionally, an ",l.default.createElement("b",null,"activate")," listener can also be defined in order to run some tasks each time the service worker is successfully installed. This feature comes handy to clear the application cache every time the service worker is updated. You don't need to do this but remember the universe tends to disorder and is our duty to keep the application clean and tidy; remove the files you are no longer going to need and make the users happier by freeing space up in their devices."),l.default.createElement("p",null,"Once the server worker is put into place the browser will start caching every network request. You can have a look at the contents of your application cache in the ",l.default.createElement("b",null,"Application")," tab of the Chrome ",l.default.createElement("b",null,"Developer Tools"),". Once all the content you need has been cached, you can also test the application offline behavior by checking the ",l.default.createElement("b",null,"Offline")," box and refreshing the page. Notice how the network requests fail and the assets are served from the service worker:"),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.progressiveWebApps,filename:"cache-content.png",footer:"Service worker cache files"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.progressiveWebApps,filename:"offline-desktop.png",footer:"Files being served from service worker cache"}),l.default.createElement("p",null,"Congratulations 🎉 Your application just turned offline friendly! You are free to go playing now... but I still have something cool to show you. See that"," ",l.default.createElement(i.Anchor,{url:"https://developers.google.com/web/fundamentals/web-app-manifest/"},"manifest.json file")," ","inside the head tag of the HTML page? It has certainly nothing to do with the service worker. That file is what will make your application ready to be installed in mobile devices for free and it only takes a few minutes to add it. It's content is self-explanatory and here are some screenshots of how professional your web will look like when installed in a mobile device:"),l.default.createElement(r.default,{id:"e545792349b5ab52acb67e0d0a65215b"}),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(s.ArticleImage,{alt:"PWA install notification",articleId:o.ArticleId.progressiveWebApps,className:"image-300",filename:"pwa-install-notification.png"}),l.default.createElement(s.ArticleImage,{alt:"PWA starting",articleId:o.ArticleId.progressiveWebApps,className:"image-300",filename:"pwa-starting.png"}),l.default.createElement(s.ArticleImage,{alt:"Offline PWA in mobile device",articleId:o.ArticleId.progressiveWebApps,className:"image-300",filename:"offline-mobile.png"})),l.default.createElement("p",null,"That's the end of it! As promised, you can turn your website into an offline available progressive web app in less than 15 minutes. Reach me at"," ",l.default.createElement("b",null,"capellas.carles@gmail.com")," if I haven't been clear enough about any aspect and see you in the next post!"))}},1338:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.progressiveWebApps=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(7216);t.progressiveWebApps={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2019-08-12",duration:6,id:l.ArticleId.progressiveWebApps,languages:[r.Language.en],shareImage:"add-home.png"}}},2267:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.catalan=void 0;var l=a(n(7294));t.catalan={title:"Provinença desconeguda",description:"Relat curt presentat al concurs de Sant Jordi de TMB de l'any 2020",introduction:l.default.createElement("p",null,"Encara és petita per trobar la resposta però, un cop s'ha formulat la pregunta, ja no ha pogut deixar de pensar-hi. L'Elisabet té vuit anys i la seva experiència amb el metro de Barcelona es limita a les parades del trajecte que fa cada dia amb el seu pare de camí a l'escola. Agafen la línia groga a la parada de Bogatell i baixen a Poblenou per arribar caminant fins a Les Acàcies."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,"Avui se li ha despertat el dubte de casualitat, perquè ella i el seu pare s'han hagut d'esperar a l'andana una mica més del que és habitual. Mentre els ulls de l'Elisabet escodrinyaven cadascun del racons de l'estació amb la mirada, s'ha adonat que els vagons de tren que circulen per les vies inclouen una discreta incògnita: són massa voluminosos per haver passat per les escales que ella puja i baixa cada matí."),l.default.createElement("p",null,"Els túnels no tenen cap misteri. Ella mateixa n'havia excavat algun de menut, un parell de cursos enrere. Els vagons de tren en canvi han aconseguit desconcertar-la. Fins i tot per a ella, és evident que els vagons els han construït persones. El que no està tan clar és com els han pogut transportar fins a dins dels túnels. Si són massa grans per travessar els passadissos i escales de les estacions, deu voler dir que els han construït directament a dins. Però... on, exactament?"),l.default.createElement("p",null,"Decideix esbrinar alguna cosa més pel seu compte abans de demanar ajuda al seu pare. El cert és que aquesta no és de la mena de preguntes que solen interessar al seu pare. Si la resposta no afecta les qüestions pràctiques del seu dia a dia, acostuma a perdre-hi l'interès ràpidament. Tanmateix, ella no aconsegueix oblidar-les tan fàcilment, les preguntes. Tan bon punt s'adona que desconeix algun aspecte que li ha passat per alt, se li desperta la inesgotable necessitat de descobrir-ne el com i el perquè."),l.default.createElement("p",null,"Durant el trajecte en metro hi rumia distretament. El seu cervell va donant forma a la idea que li sembla més plausible: una gegantina fàbrica de vagons soterrada en algun punt del subsol de Barcelona. Deuen saber on és, els ratolins que corren atrafegats pels costats de les vies? En són conscients la resta de passatgers capficats que van i venen per les andanes? Encara trigarà uns quants anys a descobrir els ets i uts de la xarxa de transports metropolitans, però avui, abans d'arribar a l'escola, l'Elisabet decideix que quan sigui gran arribarà a ser la directora de la misteriosa fàbrica de vagons de tren."))}},3351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.provinencaDesconeguda=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(2267);t.provinencaDesconeguda={content:function(){return i.catalan},metadata:{category:a.ArticleCategory.offTopic,date:"2020-04-27",duration:3,id:l.ArticleId.provinencaDesconeguda,languages:[r.Language.ca]}}},78:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121),u=n(8892);t.english={title:"Email authentication in React Native apps using Firebase",description:"How to implement user authentication in React Native apps using Firebase",shareSentence:"Building a React Native app? Use Firebase and don't waste time with Authentication!",introduction:l.default.createElement("p",null,"I choose React Native to develop mobile apps because it simplifies development so I want user authentication to be as simple as possible too. Firebase provides backend services and client side SDKs for authentication purposes and it's built by Google. That's a match! This is how to authenticate users with email and password in React Native apps using Firebase Authentication."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("h3",null,"Why Firebase Authentication?"),l.default.createElement("p",null,"User authentication has become a mandatory requirement for most applications and developers have to implement it again and again. It usually consists of the same set of core functionalities (e.g sign up, email verification, sign in, reset password, maximum number of failed attempts, etc.) and the effort it requires doesn't actually add value to app itself."),l.default.createElement("p",null,"Moreover, authentication is a critical part of the software and failing to implement it properly can lead to security vulnerabilities. You are proud of your developing skills and there is nothing you can't do, but relying on a well established authentication solution will not make you less of a web developer. With Firebase Authentication you will get top-notch security, a robust, well-tested SDK and you will save a considerable amount of time. These are some things you get out of the box:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,"Users database"),". Firebase provides the DB/network infrastructure to store users information. It defines the most common fields (e.g. account creation, last sign in, profile picture, etc.) and automatically hashes users' passwords. You can't add extra fields to the database however; you will need to store additional user information in your app database. This is what the user data looks like:",l.default.createElement(r.default,{id:"c60deeee99e1795bba21404774ce3e9e"})),l.default.createElement("li",null,l.default.createElement("b",null,"Email templates"),". Firebase email authentication comes with predefined email templates that will be sent to users upon certain authentication events (i.e. email address verification and password reset). The templates are plain text, can't be modified and support a single language. It's not a long term solution but will do the trick on the app's early stages.",l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,footer:"Firebase authentication templates dashboard",filename:"firebase-auth-templates.png"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,footer:"Email address verification received email, in Spanish",filename:"firebase-auth-email-example.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"Administration dashboard"),". A list of all the users allowing for sorting, filtering, creating new users, disabling accounts or removing them completely. It's only missing import/export functionality but that can be done through command line:",l.default.createElement(u.BlockSnippet,null,"firebase auth:export users.csv --format=csv"),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,footer:"Firebase users dashboard",filename:"firebase-auth-users-list.png"})),l.default.createElement("li",null,l.default.createElement("b",null,"Multiple authentication providers"),". Firebase Authentication is compatible with a large list of authentication providers (Facebook, Apple, Google, etc.). Adding a new authentication method is fairly simple and doesn't change the data structure at all.",l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,footer:"Firebase authentication providers",filename:"firebase-auth-providers.png"}))),l.default.createElement("p",null,"Finally, using Firebase Authentication doesn't bind you to Firebase. Obviously Firebase Authentication plays nicely with the rest of Firebase services (e.g. Realtime Database), but you can still have your backend server elsewhere and delegate just user authentication to Firebase."),l.default.createElement("h3",null,"Configuring Firebase"),l.default.createElement("p",null,"You will find the Authentication section in the left menu, under ",l.default.createElement("b",null,"Build"),". Click on ",l.default.createElement("i",null,"Get started")," and you will be directed to the list of authentication providers, all of them disabled by default. You need to enable Email/Password:"),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,alt:"Firebase authentication home page",filename:"firebase-auth-home.png"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,alt:"Firebase authentication providers",filename:"firebase-auth-providers.png"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,alt:"Email and password auth provider",filename:"firebase-auth-email-password-provider.png"}),l.default.createElement("p",null,"After enabling the first authentication provider a Web API key will be generated for the project if the project didn't have one yet. This API key must be provided to the client SDK upon initialization and it can be found in the ",l.default.createElement("b",null,"Project Settings")," ","section."),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,alt:"Firebase project settings",filename:"firebase-project-settings.png"}),l.default.createElement("p",null,"We are done configuring. Oh! The ",l.default.createElement("i",null,"Public-facing name")," will be displayed in the email templates replacing the %APP_NAME% variable. Replace it with your app's name if you don't want your emails' subject to look like"," ",l.default.createElement("i",null,'"Verify your email for project-1011404105782"'),". Doesn't it sound like spam?"),l.default.createElement("h3",null,"The SDK methods"),l.default.createElement("p",null,"Let's move into code. The JavaScript SDK has two methods to sign up and sign in users using email and password: ",l.default.createElement("i",null,"createUserWithEmailAndPassword")," and"," ",l.default.createElement("i",null,"signInWithEmailAndPassword"),". That's accurate naming. They both authenticate the user against the Firebase backend over HTTP and return a promise. Those promises are not meant to be awaited in the conventional manner however (i.e. updating the app's state upon resolution)."),l.default.createElement("p",null,"When your app launches Firebase will try to automatically authenticate the user based on the last session credentials. Most modern apps automatically sign users in when the app launches and with Firebase you get that for free 🤩 To get the user credentials upon automatic sign in you will need to subscribe to the"," ",l.default.createElement("i",null,"onAuthStateChanged")," Firebase observer."),l.default.createElement("p",null,l.default.createElement("i",null,"onAuthStateChanged")," observer watches the user's sign-in state and runs the callback parameter every time there is a change. Such changes include the automatic sign in event but also the successful resolution of"," ",l.default.createElement("i",null,"createUserWithEmailAndPassword")," and ",l.default.createElement("i",null,"signInWithEmailAndPassword")," ","promises."),l.default.createElement("p",null,"So instead of awaiting the mentioned promises and updating the app's state upon resolution, you will want to use the ",l.default.createElement("i",null,"onAuthStateChanged")," observer in the following fashion.",l.default.createElement(r.default,{id:"4fd4c973c40770b32d551f95db3ed8ec"})),l.default.createElement("ul",null,l.default.createElement("li",null,"Call ",l.default.createElement("i",null,"onAuthStateChanged")," once and only once for the entire app lifetime. If you subscribe to the authentication changes multiple times the function will run multiple times for every change on the user's sign-in state. At best you will make your application slower but you are also likely to get strange errors if you need to run some logic upon user sign in."),l.default.createElement("li",null,"You don't necessarily need to call the function inside the root component of your app. It's just convenient because it contains all the other components, it has access to the navigation object (if you are using routing/navigation), it only gets \"mounted\" once and it remains mounted for the entire app lifetime."),l.default.createElement("li",null,"Upon every change you must push the new user's sign-in state to all the components that depend on it. You can chose any method you like: pass it as props, inject it through the react context, propagate it through an event bus or use a centralized state management library. I'm a fan of the latter."),l.default.createElement("li",null,"You can skip calling the unsubscribing function. I feel unsubscribing keeps things tidier but I'm not sure it actually makes any difference at all.")),l.default.createElement("p",null,"With ",l.default.createElement("i",null,"onAuthStateChanged")," in place it's just a matter of calling the other authentication methods and handling possible errors."),l.default.createElement(r.default,{id:"bbbaa608f0c60a68dfa4f94e30359043"}),l.default.createElement("p",null,l.default.createElement("i",null,"Notice that Firebase will not automatically send a verification email after successful user sign up. You must do that yourself and doing it right after the sign up it's a good way to make sure it only gets done once.")),l.default.createElement(r.default,{id:"54e3da59693bab7aba824aa572072b4f"}),l.default.createElement("p",null,'Error objects will contain an english message (e.g. "The email address is badly formatted.") and a code (e.g. "auth/invalid-email"). You can display the message directly to the user or use the code to localize the message for other languages.'),l.default.createElement("h3",null,"Android timers"),l.default.createElement("p",null,"As soon as you start using Firebase JavaScript SDK methods you will start getting a warning message when running your app on Android. This is a known issue that occurs due to the way React Native handles timers in Android. You can read more about it in this"," ",l.default.createElement(i.Anchor,{url:"https://medium.com/r/?url=https%3A%2F%2Fgithub.com%2Ffacebook%2Freact-native%2Fissues%2F12981%23issuecomment-652745831"},"github issue comment"),"."),l.default.createElement(u.BlockSnippet,null,"Setting a timer for a long period of time, i.e. multiple minutes, is a performance and correctness issue on Android as it keeps the timer module awake, and timers can only be called when the app is in the foreground. See https://github.com/facebook/react-native/issues/12981 for more info. (Saw setTimeout with duration 111862ms)"),l.default.createElement("p",null,"Long story short the timers issue is here to stay. Fortunately it's not critical one. It only means that things might take longer than expected if the app becomes backgrounded. What some developers chose to do is disabling the warning message using LogBox (previously named YellowBox)."),l.default.createElement(r.default,{id:"bab2d44625d1570542e195929b238d09"}),l.default.createElement("h3",null,"The screens"),l.default.createElement("p",null,"Firebase provides a JavaScript drop-in auth solution that handles the UI flows called"," ",l.default.createElement(i.Anchor,{url:"https://firebase.google.com/docs/auth/web/firebaseui"},"FirebaseUI"),". These views are designed for web apps and are not compatible with React Native yet though. For now we will need to implement our own screens but it's not a big deal (just a couple forms) and allows for better customization."),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,filename:"firebase-ui-widgets.png",footer:"FirebaseUI authentication widget"}),l.default.createElement("p",null,"The screens implementation will differ largely depending on the app. A generic approach would consist of a landing page containing links to each of the authentication options, including both sign up and sign in forms. You decide how many fields the form contains but the less the better; you can always ask for more user details after users have created their account. Let's take Wikiloc for example:"),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,alt:"Wikiloc authentication screen",className:"image-300",filename:"wikiloc-auth-home.png"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,alt:"Wikiloc sign up screen",className:"image-300",filename:"wikiloc-auth-sign-up.png"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.reactNativeFirebaseAuth,alt:"Wikiloc sign in screen",className:"image-300",filename:"wikiloc-auth-sign-in.png"})),l.default.createElement("p",null,"Remember to protect the password fields setting the ",l.default.createElement("i",null,"secureTextEntry")," property on the corresponding ",l.default.createElement("i",null,"TextInput")," components, reserve some space to display possible error messages, add a screen to reset the password and there's not much left to do 💃 In case you need some inspiration, here is a simplified unstyled sign in component using typescript, redux and react-navigation. Happy coding!"),l.default.createElement(r.default,{id:"bcb503f4933b65bec619bbe4d541f5e1"}))}},2967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reactNativeFirebaseAuth=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(78);t.reactNativeFirebaseAuth={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2021-01-28",duration:7,id:l.ArticleId.reactNativeFirebaseAuth,languages:[r.Language.en],shareImage:"firebase-auth-providers.png"}}},9430:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(4711),i=n(974),o=n(1121),s=n(4856);t.english={title:"Stadia: cloud gaming",description:"A brief description of the Stadia gaming platform experience",introduction:l.default.createElement("p",null,"Looking for fresh entertainment? Google is here with a new gaming platform that delivers 4K and doesn't require a console. Give it a chance and try it for free in your computer by just signing up with your google account. You will be playing in 5 minutes and the graphics will blow your mind 🤯 Have a look at the screenshots at the end of the post if you still have any doubt!"),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia website landing page",filename:"stadia-landing-page.png"}),l.default.createElement("p",null,"First things first! ",l.default.createElement("b",null,"Stadia is not free forever"),". You can try it free of charge for a month, but you will then be billed 9.99€ on a monthly basis. I'm usually not a fan of this free trial like strategies (I rather prefer to get a limited version of the service for free and then having the chance to unlock additional features by upgrading),"," ",l.default.createElement("b",null,"but I must recognize that Stadia gaming experience is worth trialing")," even if you are resolved not to buy."),l.default.createElement("p",null,"And ",l.default.createElement("i",null,'"why is it worth trailing?"')," I can hear you asking to yourself. Leaving aside the great video game experience itself, the most interesting aspect from my point of view is the fact that you can play from your computer without installing any software. It might seem an irrelevant detail, but let's keep in mind that a very similar idea turned"," ",l.default.createElement(r.Anchor,{url:"https://en.wikipedia.org/wiki/Netflix"},"Netflix")," from an online pay-per-rent DVD rental company to one of the biggest streaming provider in the world. ",l.default.createElement("b",null,"Stadia could be the end of consoles obsolescence")," (e.g. Play Station 1, Play Station 2, Play Station 3... and the list goes on)."),l.default.createElement("p",null,"Another promising feature, which I haven't tested out personally, is that"," ",l.default.createElement("b",null,"it can be played in multiple devices such as smartphones, tablets and TVs"),". I tried playing from my low range smartphone but, even though the game managed to start, the Xiamoi Redmi 5 is not powerful enough to keep the pace. You can check whether your device is supported in Stadia's website. Also notice that for an optimal game experience they recommend using the"," ",l.default.createElement(r.Anchor,{url:"https://store.google.com/product/stadia_controller"},"Stadia controller")," ","(sold for 69€ at the time of writing), compatible with all device types and mandatory for TVs."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia website landing page",filename:"stadia-devices.png"}),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia mobile initial screen",className:"image-300",filename:"stadia-mobile-1.jpg"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia mobile development in process disclaimer",className:"image-300",filename:"stadia-mobile-2.jpg"})),l.default.createElement("p",null,"On the other hand, ",l.default.createElement("b",null,"Stadia has a couple downsides"),". First and more important:"," ",l.default.createElement("b",null,"the games still need to purchased one by one"),". You will get some for free when you sign up so you can test the platform, but if you want to play any game out of that selection you will need to pay for it separately. I didn't care much about which game to play so I tested out the four of them, being"," ",l.default.createElement(r.Anchor,{url:"https://en.wikipedia.org/wiki/Destiny_2"},"Destiny 2")," the only one I really enjoyed (and almost got addicted to). I found other interesting titles, but too expensive in my opinion. I was expecting Stadia to go for a Spotify-like approach and include all the titles in the monthly subscription. I won't argue whether there are enough available video games or not because I trust the list will grow as the time goes by, as well as the number of players in the community"),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia website landing page",filename:"stadia-game-store.png"}),l.default.createElement("p",null,"Another issue I do must point out are the ",l.default.createElement("b",null,"recurrent disconnections")," I've been suffering ",l.default.createElement("b",null,"while playing"),", most of the times getting a black screen with no error message at all. I couldn't find a way to solve it in Stadia forum and, while it just forced my to refresh the browser in a"," ",l.default.createElement(r.Anchor,{url:"https://www.laptopmag.com/reviews/laptops/dell-latitude-5480"},"dell latitude 5480")," ","laptop, it totally made impossible to play in my"," ",l.default.createElement(r.Anchor,{url:"https://www.laptopmag.com/reviews/laptops/hppavilion-x-360"},"HP Pavilion 13 x360"),". I was using a 92Mbps wired internet connection in both cases, so bandwidth was clearly not the problem here. This issue is particularly annoying because the game keeps running in Stadia servers in the meanwhile, so you can be sure you will have died by the time you reconnect."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia website landing page",filename:"stadia-glitch.jpg"}),l.default.createElement("p",null,"That being said I still believe is worth giving Stadia a chance. Maybe it won't reach Netflix success, but it can definitely shift the video games industry direction for good. No matter you are a tech enthusiast, an unconditional video game player or just a curious person, taking advantage of this free month won't hurt you (you can easily cancel the subscription when the time arrives) and it will give you a clue of what the future of the video games might look like."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia website landing page",filename:"stadia-subscription.png"}),l.default.createElement("p",null,"Last but not least, an image is supposed to be worth thousand words. Have a look at these ",l.default.createElement("b",null,"screenshots")," (you can capture them at any moment by pressing F12) from my charming experience with the incredibly well-crafted ",l.default.createElement("b",null,"Destiny 2")," and stop hesitating. Try out Stadia, enjoy your gaming session and see you in the next post 🎮"),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia website landing page",filename:"destiny-graphics-1.jpg"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia website landing page",filename:"destiny-graphics-2.jpg"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia website landing page",filename:"destiny-graphics-3.jpg"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.stadiaPlatform,alt:"Stadia website landing page",filename:"destiny-graphics-4.jpg"}),l.default.createElement(s.ArticleVideo,{articleId:i.ArticleId.stadiaPlatform,filename:"destiny-graphics-5.mp4"}))}},9291:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stadiaPlatform=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(9430);t.stadiaPlatform={content:function(){return i.english},metadata:{category:a.ArticleCategory.offTopic,date:"2020-06-20",duration:3,id:l.ArticleId.stadiaPlatform,languages:[r.Language.en],shareImage:"destiny-graphics-1.jpg"}}},2256:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121);t.english={title:"Building a subscribers list",description:"Why and how to build a subscribers list for your website",introduction:l.default.createElement("p",null,"As a content writer you owe a great deal to your readers. No matter whether you are a blogger, a writer, a coach or an author, being able to reach your audience will help you get them more engaged with your activity and provides a good way to start selling your products or services in some point in the future. In addition it will keep you motivated to keep writing. Is there anything more pleasant than knowing that someone cares about your ideas?"),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,"Most social networks provide great tools to interact with the users and they might have your needs covered. But even if all of your activity is taking place inside a social network, you might want to divorce from it in the future. Remember MySpace?. Having a simple web page doesn't hurt, will allow you to start building your own list of subscribers and can be created for free if you still don't have it, using platforms such as ",l.default.createElement(i.Anchor,{url:"https://wordpress.com/"},"Wordpress"),"."),l.default.createElement("p",null,"See that form in the bottom of this page? Bingo! This is exactly what I am talking about. A simple form where readers can provide an email address to which I will send an email every time I post new content to my web. In case you are wondering, no, I am not selling anything at the moment. You won't get annoying dick enlarger ads if you subscribe to the newsletter."),l.default.createElement("p",null,"There are a bunch of services you can use to take care of all the stuff related to the mailing list. The one I like the most and, to be fair, the only one I have tried is ",l.default.createElement(i.Anchor,{url:"https://mailchimp.com/"},"Mailchimp"),". They have a great visual editor to compose mails (see the screenshot below), they allow you to export the contacts list and is free to use under 2000 subscribers."),l.default.createElement("p",null,l.default.createElement("b",null,"Integrating it with your website is as easy as creating an embedded form and copying the generated code into your web"),". The form editor includes a preview area for you to know what the form will look like on your web. The generated code will vary depending on the options you choose but you should end up getting something similar to the code below."),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.subscribersList,alt:"Mailchimp signup form builder",filename:"signup-form.png"}),l.default.createElement(r.default,{id:"b23dea8cac1e579a1ff5622b9d4aa54d"}),l.default.createElement("p",null,"We humans are lazy creatures so I'd suggest that you require as few information as possible to maximize the number of people that subscribes. After fine tunning the form, paste the code to your site and you are ready to start collecting emails 🎉 Optionally, you can add some CSS rules to align the look and feel of the form with the rest of your website."),l.default.createElement("p",null,"Next thing you might want to do once you have collected a few email addresses is sending a newsletter mail. You can either create a new campaign or define a template to be used later when creating a campaign. In both cases Mailchimp provides a visual WYSIWYG editor to help you building the mail and you can test it at any point by sending a copy to your own address."),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.subscribersList,alt:"Mailchimp email editor",filename:"email-editor.png"}),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.subscribersList,alt:"Mailchimp campaign creator",filename:"campaign.png"}),l.default.createElement("p",null,"And that's how easy mail marketing can be! There are much more things that you can do with Mailchimp (e.g. sending welcome emails after subscriptions, segment your audience, schedule recurring emails, etc.) but don't worry about this now. Stop looking for excuses, go creating your Mailchimp account and start collecting emails from your readers 💪 See you in the next post!"))}},8241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribersList=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(2256);t.subscribersList={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2019-09-13",duration:4,id:l.ArticleId.subscribersList,languages:[r.Language.en],shareImage:"signup-form.png"}}},7101:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.catalan=void 0;var l=a(n(7294)),r=n(4711),i=n(974),o=n(1121);t.catalan={title:"Un algoritme de sudokus",description:"Tot el que necessites saber per construir un generador de sudokus",introduction:l.default.createElement("p",null,"La meva mare sempre ha estat una lectora fervent de diaris i, amb els anys, ha cultivat l'afició de completar els jocs que els diaris inclouen a les últimes pàgines. Entre aquests jocs sempre se n'hi troba un anomenat"," ",l.default.createElement(r.Anchor,{url:"https://en.wikipedia.org/wiki/Sudoku"},"sudoku"),". Dos de fet; un de dificultat raonable i un de completament malvat. Va ser mentre ella estava enfeinada resolent el primer sudoku que la vaig interrompre. No recordo que volia en aquell moment, però si que recordo que vam parlar de sudokus i que em va cridar l'atenció la diferència de dificultat entre els dos nivells."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,filename:"easy-sudoku.png",footer:"Sudoku fàcil"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,filename:"hard-sudoku.png",footer:"Sudoku difícil"})),l.default.createElement("p",null,"En el diari que la mama llegia aquell dia en concret, el sudoku fàcil tenia 28 caselles omplertes de les 81 caselles totals mentre que el sudoku difícil en tenia 29."," ",l.default.createElement("b",null,"Com podia ser que el sudoku més complicat tingués més caselles omplertes!?")," En altres paraules, no depen del número de caselles omplertes la dificultat del sudoku? Almenys, aquesta és la sensació que jo tenia. La veritat és que mai m'havia parat a pensar com es generen els sudokus. N'havia solucionat alguns és clar, però mai havia provat de generar-ne un."),l.default.createElement("p",null,"De fet, resulta que no és gens fàcil de generar-los. Una propietat important d'un sudoku ben generat és que només té una solució possible. Pot sonar obvi però, depenent de com i quantes caselles tingui omplertes, un sudoku pot tenir múltiples solucions vàlides. L'exemple més famós és el sudoku que la cadena de televisió britànica Sky TV va dibuixar en un turó oferint 5000£ de premi per la solució; va resultar que tenia"," ",l.default.createElement(r.Anchor,{url:"https://www.sudokuwiki.org/Sudoku_Creation_and_Grading.pdf"},"1905 solucions possibles"),". Aquesta anècdota va aconseguir despertar la meva curiositat."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Sky TV hillside sudoku",filename:"sky-tv-hillside.jpg"}),l.default.createElement("p",null,l.default.createElement("b",null,"Normalment hi hauria rumiat una estona"),", m'hauria adonat que és una tasca matemàticament complexa, hauria conclòs que la quantitat de temps lliure que requereix trobar una solució al problema excedeix la curiositat que em genera el tema ",l.default.createElement("b",null,"i finalment ho hauria deixat córrer"),". Tanmateix resulta que acabava de començar un any sabàtic a la feina i que, degut a les mesures preventives contra el COVID-19, es va cancelar el vol sense retorn que havia d'agafar el 31 de març per anar a viure a Austràlia. Així doncs,"," ",l.default.createElement("b",null,"com que estava sense feina, tancat a casa i amb la major quantitat de temps lliure de la que mai hagués disposat")," ","(a Espanya el confinament pel coronavirus va començar el 15 de març i havia de durar almenys un mes), vaig decidir que descobriria com generar sudokus 💪"),l.default.createElement("p",null,"El que va venir a continuació va ser un camí més llarg del que m'havia esperat. Vaig estar apunt de donar el projecte per perdut vàries vegades però, casualment, vaig mirar ",l.default.createElement(r.Anchor,{url:"https://www.imdb.com/title/tt4276820/"},"The Founder")," ","entremig, la pel·lícula que explica com Ray Kroc va transformar McDonald's en la cadena de restaurants més gran del món gràcies a la seva persistència a prova de bales, cosa que em va ajudar a resistir fins al final. Aquesta odissea va tenir quatre fases:"),l.default.createElement("p",null,l.default.createElement("b",null,"1. Resultats, resultats, resultats"),": No vaig poder resistir l'impuls de voler veure part de la feina acabada sense haver de pensar massa. Vaig assumir que el procés de generar un sudoku de 9x9 seria el mateix que el de generar-ne un de 4x4 i vaig tirar per un algoritme de consola ràpid."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,className:"image-600",alt:"Command line generated sudoku",filename:"command-line.png"}),l.default.createElement("p",null,l.default.createElement("b",null,"2. Punyeta! Necessito una eina gràfica"),": En teoria, només havia d'adaptar l'algoritme per generar sudokus de 9x9 i aquí acabaria la història. A la pràctica, resulta que els sudokus de 9x9 tenen poc a veure amb els de 4x4. No aconseguia entendre que estava fent malament només amb la informació que l'algoritme escrivia a la consola, així que no vaig tenir més remei que construir una eina gràfica."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Command line generation error",className:"image-600",filename:"command-line-error.png"}),l.default.createElement("p",null,l.default.createElement("b",null,"3. Cordons... això és complicat"),": No em va portar gaire estona crear una aplicació web per representar sudokus de 9x9. Amb la representació visual del sudoku i la capacitat de fer i desfer omplint les caselles, vaig començar a entendre què m'havia passat per alt. Les regles bàsqies del sudoku (és a dir, un número no pot anar a una casella si ja hi ha el mateix número a la fila, columna o regió de la casella) contenen un conjunt de regles derivades que no son òbvies a primer cop d'ull."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Web app first approach",className:"image-600",filename:"web-app-first-approach.png"}),l.default.createElement("p",null,l.default.createElement("b",null,"4. La llum al final del túnel"),": Després de seure i donar-hi unes quantes voltes, com hauria d'haver fet des del principi, vaig trobar unes quantes d'aquestes regles derivades, que permeten descartar números de caselles. Havent descobert aquestes petites malxinades, només era qüestió de reescriure l'algoritme per considerar-les. Em va portar la seva estona, però finalment vaig aconseguir un generador vàlid."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Web app final approach",className:"image-600",filename:"web-app-final-approach.png"}),l.default.createElement("p",null,"Mira mama, ho he fet! En el meu cas no vaig construir un enorme imperi de les hamburgueses però si aquest humil"," ",l.default.createElement(r.Anchor,{url:"/sudoku-generator"},"generador de sudokus"),". He d'admetre que a vegades arriba a carrerons sense sortida durant la generació, havent de descartar la feina i començar des de zero, però sempre acaba generant sudokus vàlids amb una única solució. En cas que t'ho estiguis preguntant, aquestes són les regles que utilitza l'algoritme per generar sudokus. De fet, és probable que siguin també les regles que fas servir tu a l'hora de resoldre'ls."),l.default.createElement("ul",null,l.default.createElement("li",null,"Si a una casella X només hi pot anar un número, aquest número ha d'anar a la casella X i no és vàlid en cap altra casella dels grups de la casella X (fila, columna i regió):",l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Sudoku box single candidate example",className:"image-600",filename:"box-only-left-candidate.png"})),l.default.createElement("li",null,"Si, per un grup determinat, un número només pot anar a la casella X, aquest número ha d'anar a la casella X i no és vàlid en cap altra casella dels grups de la casella X:",l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Sudoku group single candidate example",className:"image-600",filename:"group-single-candidate.png"})),l.default.createElement("li",null,"Si 2-3 caselles d'un grup només poden tenir els mateixos 2-3 números, aquests números no són vàlids en cap altra casella del mateix grup:",l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Sudoku owned candidates rule example",className:"image-600",filename:"owned-candidates.png"})),l.default.createElement("li",null,"Si, per una regió determinada, les úniques caselles on pot anar un número estan a la mateixa fila o columna, aquest número no és vàlid a cap altra casella de la mateixa fila o columna:",l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Sudoku region subset rule example",className:"image-600",filename:"region-subset.png"}))),l.default.createElement("p",null,"I això vindria a ser tot. Vaig haver de dedicar-hi al voltant de 75 hores per aconseguir el que en diriem un generador acceptable. El resultat és menys complet del que m'havia imaginat en un principi, però les coses no són mai com esperes que siguin. Ets lliure de fer servir el generador si vols, però hi ha dues coses que has de saber: no esta del tot adaptat per mòbils i no vaig treballar en regular la dificultat, cosa que genera sudokus refotudament complicats. Bona sort i fins al proper post!"))}},9052:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(4711),i=n(974),o=n(1121);t.english={title:"Writing a sudoku algorithm",description:"All you need to know in order to build a sudoku generator",introduction:l.default.createElement("p",null,"My mother has always been a fervent newspaper reader and, throughout the years, she developed the habit of solving the puzzles that come in the last pages. Between those puzzles you can always find a game called"," ",l.default.createElement(r.Anchor,{url:"https://en.wikipedia.org/wiki/Sudoku"},"sudoku"),". Two actually; a reasonably difficult one and an evil one. So she was in the middle of filling the first sudoku when I interrupted her. I don't remember what for but I do remember that we talked about sudoku and it was the difference between the two sudoku levels that caught my attention."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,filename:"easy-sudoku.png",footer:"Easy sudoku"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,filename:"hard-sudoku.png",footer:"Hard sudoku"})),l.default.createElement("p",null,"In the particular newspaper my mom was reading that day, the easy sudoku had 28 filled boxes out of the 81 total whereas the difficult sudoku had 29 filled boxes."," ",l.default.createElement("b",null,"How come the more difficult puzzle had more filled boxes!?")," Or, in other words, isn't the difficulty of a sudoku based on the number of filled boxes? At least, that was the feeling I had back then. The truth is that I had never taken the time to think about how sudoku are generated. I had solved a few of them sure, but I had never tried to figure out how to generate one."),l.default.createElement("p",null,"In fact, it turns out is not easy at all. An important property of a well-composed sudoku is that it has only one possible solution. It might sound obvious but, depending on how many and which boxes are filled, there can be multiple valid combinations that solve the puzzle. The most famous example is the sudoku that UK Sky TV draw in a hillside offering a £5000 prize for the solution; it turned out to have"," ",l.default.createElement(r.Anchor,{url:"https://www.sudokuwiki.org/Sudoku_Creation_and_Grading.pdf"},"1905 possible solutions"),". That anecdote aroused my curiosity."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Sky TV hillside sudoku",filename:"sky-tv-hillside.jpg"}),l.default.createElement("p",null,l.default.createElement("b",null,"Usually I would have thought about it for a while"),", realize it is a mathematically complex task, conclude that the amount of spare time required to find a solution was much bigger than the curiosity I had on the subject"," ",l.default.createElement("b",null,"and finally gave up"),". Nevertheless I had just started a sabbatical leave at my company and, due to COVID-19 prevention measures, the one way flight I was supposed to catch on March 31st to go living in Australia got cancelled."," ",l.default.createElement("b",null,"Given I found myself unemployed, locked at home and provided with the biggest amount of free hours I had ever had in my life")," ","(in Spain the coronavirus lock down started March 15th and it was meant to last at least for one month), I decided to figure out how to generate sudoku 💪"),l.default.createElement("p",null,"What followed next was a much longer journey that I had expected in the beginning. I was about to quit the project many times but, by chance, I watched"," ",l.default.createElement(r.Anchor,{url:"https://www.imdb.com/title/tt4276820/"},"The Founder")," in the meanwhile, the movie that explains how Ray Kroc turned McDonald's into the biggest restaurant business in the world thanks to his bulletproof persistence, which helped me resisting until the end. This odyssey had four stages:"),l.default.createElement("p",null,l.default.createElement("b",null,"1. Results, results, results"),": I couldn't fight the urge of wanting to see something done whithout thinking much. I assumed that the process of generating a 9x9 sudoku would be the same as generating a 4x4 one and I went for a quick command line algorithm."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Command line generated sudoku",className:"image-600",filename:"command-line.png"}),l.default.createElement("p",null,l.default.createElement("b",null,"2. Damn! I need a graphical tool"),": In theory, I just needed to adapt the algorithm to generate 9x9 sudoku and that would be the end of story. At practice, turns out that 9x9 sudokus have little to do with 4x4 sudokus. I couldn't figure out what I was doing wrong just by reading the command line output, so I was compelled to built a graphical tool."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Command line generation error",className:"image-600",filename:"command-line-error.png"}),l.default.createElement("p",null,l.default.createElement("b",null,"3. Frog... this is complicated"),": It didn't take me much time to create a web application that could display 9x9 sudoku. With the visual representation of the sudoku and the ability to fill boxes back and forth I began to understand what I was missing out. The sudoku basic rules (e.g., a number can't be placed in a box if the same number is already placed in the column, region or row of that box) contain a set of derived rules, which are not easy to see at first glance."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Web app first approach",className:"image-600",filename:"web-app-first-approach.png"}),l.default.createElement("p",null,l.default.createElement("b",null,"4. The light at the end of the tunnel"),": After sitting down and thinking about it, as I should have done from the beginning, I figured out some of those derived rules that help discarding possible numbers from boxes. Having found out about those little bastards, it was just a matter of rewriting the algorithm to consider them. It took me a number of hours, but I could finally get a working generator."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Web app final approach",className:"image-600",filename:"web-app-final-approach.png"}),l.default.createElement("p",null,"Hey look ma, I made it! In my case I didn't build a massive hamburger empire but this humble ",l.default.createElement(r.Anchor,{url:"/sudoku-generator"},"sudoku generator"),". I must admit that it sometimes reaches dead ends during generation, having to drop the work and start again from scratch, but it always ends up generating valid single solution puzzles. If you are wondering, these are the rules the algorithm uses to generate sudoku. In fact, these are probably the rules you use when you are solving those puzzles too."),l.default.createElement("ul",null,l.default.createElement("li",null,"If a box has only one possible number left, the number must be placed in that box and it's not valid in any peer box:",l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Sudoku box single candidate example",className:"image-600",filename:"box-only-left-candidate.png"})),l.default.createElement("li",null,"If a number can only be placed in one box for a given group (column, region or row), the number must be placed in that box and it's not valid in any peer box:",l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Sudoku group single candidate example",className:"image-600",filename:"group-single-candidate.png"})),l.default.createElement("li",null,"If 2-3 boxes in a group have only the same 2-3 numbers available, those numbers are not valid in the rest of boxes in the group:",l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Sudoku owned candidates rule example",className:"image-600",filename:"owned-candidates.png"})),l.default.createElement("li",null,"If the only boxes where a number is available for a given region are in the same row or column, that number is not valid in the rest of boxes of that row or column:",l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.sudokuGeneration,alt:"Sudoku region subset rule example",className:"image-600",filename:"region-subset.png"}))),l.default.createElement("p",null,"That's pretty much it. I had to work on it around 75 hours to get some kind of acceptable sudoku generator. It is finally less complete than what I wanted it to be, but things never turn out the way you expect them to. Feel free to use the generator, but there two things you must know: it isn't specially mobile friendly and I didn't work on configuring the difficulty, which makes the generated puzzles pretty hardcore. Good luck and see you in the next post!"))}},7704:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sudokuGeneration=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(7101),o=n(9052);t.sudokuGeneration={content:function(e){return e===r.Language.ca?i.catalan:o.english},metadata:{category:a.ArticleCategory.tech,date:"2020-04-29",duration:6,id:l.ArticleId.sudokuGeneration,languages:[r.Language.ca,r.Language.en],shareImage:"sky-tv-hillside.jpg"}}},4380:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var l=Object.getOwnPropertyDescriptor(t,n);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,l)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var i=r(n(7294)),o=n(974),s=n(1121),u=n(1609);t.english={title:"Trecember",description:"How a 13 months calendar would make our life easier",introduction:i.default.createElement("p",null,"At this point in your life there might be a few things you are not familiar with: wasabi, free falling or David Lynch's movies for instance. The gregorian calendar however is not one of them. You learned it in school when you were a child, got used to it and never question it again. Brace yourselves because today the questioning day has arrived. What would a calendar with thirteen months look like?"),body:function(){var e=(0,i.useState)(-1),t=e[0],n=e[1];return i.default.createElement(i.default.Fragment,null,i.default.createElement("p",null,'So you probably have already realized that the our calendar system is not perfect. "yeah, there a few things that could be improved, but... who cares?". Well, I do! When you suffer a bit of OCD (Obsessive Compulsive Disorder) as I do, there are certain types of untidiness that make you nervous. These are the main aspects of the gregorian calendar I find profoundly troubling:'),i.default.createElement("ul",{className:"numbered"},i.default.createElement("li",null,i.default.createElement("b",null,"Different number of days in every month"),". It makes the month an unreliable time unit. Who in his god damned mind creates a measurement system with non-constant units? Imagine than on odd weeks a meter would equal 100cm but on even weeks a meter would only equal 98cm. Good luck managing distances my friend!"),i.default.createElement("li",null,i.default.createElement("b",null,"Unpredictable week day for a day in a month"),'. This happens because months don\'t contain an entire number of weeks and because each month starts the week day immediately after the previous month ends. It leads to situations like: "Are you up for skiing next month 14th to 16th?", "I don\'t know. Let me check the calendar first".'),i.default.createElement("li",null,i.default.createElement("b",null,"Unpredictable week day for a day in a year"),". This happens because years don't contain an entire number of weeks and because each year starts the week day immediately after the previous year ends. It leads to public holidays taking place in a different week day every year (e.g. wasted holidays when Christmas takes place on a Sunday).")),i.default.createElement(s.ArticleImage,{articleId:o.ArticleId.trecember,alt:"Person claiming not to be crazy GIF",filename:"not-crazy.gif"}),i.default.createElement("p",null,"We could create a thousand different calendar systems that would track the time in a similar way the current system does, but adding some advantages (e.g. having 52 single-week months). The only restriction the systems must respect is that, at the long run, the year must contain the number of days the Earth takes to complete an orbit around the sun (365.26 days). Some random examples:"),i.default.createElement("ul",{className:"numbered"},i.default.createElement("li",null,"Each month could have 30 days, except December with 35"),i.default.createElement("li",null,"Odd months could have 28 days and even months 35 days, except December with 22"),i.default.createElement("li",null,"The year could have 364 days and add an extra week to December every seven years")),i.default.createElement("p",null,"No matter which system you choose the only requirement to make it work is that people around the planet accepts it. So, without further ado, here I am presenting mine in a visual manner 🚀🍾 The idea is very simple: adding a 13th month to make all of them 28 days long, except the last one that will contain 29."),i.default.createElement("div",{className:"screen-splitter"},i.default.createElement("div",null,i.default.createElement("h4",null,"Conventional year"),i.default.createElement(u.ConventionalYear,{onDayClick:n,selectedDay:t})),i.default.createElement("div",null,i.default.createElement("h4",null,"Trecember year"),i.default.createElement(u.TrecemberYear,{onDayClick:n,selectedDay:t}))),i.default.createElement("p",null,"This approach resolves the problems 1 and 2 but keeps the problem 3. A very sophisticated strategy similar to the gregorian calendar leap year would consist in make the year 364 days and add an extra week every now and then. Precisely, we would need to add 5 weeks every 28 years (in mathematical terms,",i.default.createElement("i",null,"(4·365 + 1)x = (4·364)x + 7y"),"), which makes it a bit hard to distribute."),i.default.createElement("p",null,"Instead of wrapping our heads around it, we can take the much easier approach of keeping the leap years and forcing the year to start on Monday, no matter what the previous year last day was. At practice this would mean having two mondays on a row (29th of Trecember and 1st of January) once a year, but given the second one is always a public holiday I think we will survive."),i.default.createElement("p",null,"And that is the end of it! In case you like the Trecember system and if you think the pros outweight the cons you should then start changing the memorable dates of your life's history, because your birthday will no longer be November 10th, but December 6th. See you in the next post!"))}}},1609:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},a.apply(this,arguments)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TrecemberYear=t.ConventionalYear=void 0;var r=l(n(7294)),i=function(e){return" ".repeat(e).split("").map((function(e,t){return t+1}))},o=function(e){for(var t=function(e){return e.reduce((function(e,t,n){var a=t.days.map((function(e){return{number:e,isOddMonth:n%2==0}}));return e.concat(a)}),[])}(e),n=[],a=0;a<t.length;a+=7)n.push(t.slice(a,a+7));return n},s=function(e){return r.default.createElement("div",{className:"year"},r.default.createElement("div",{className:"months"},e.months.map((function(e,t){return r.default.createElement("div",{key:t,className:"month weeks-".concat(e.weeks," ").concat(t%2==0?"odd-month":"even-month")},r.default.createElement("div",{className:"name"},e.name))}))),r.default.createElement("div",{className:"weeks"},e.weeks.map((function(t,n){return r.default.createElement("div",{key:n,className:"week"},t.map((function(t,a){var l=7*n+a;return r.default.createElement("div",{key:l,className:"day clickable ".concat(t.isOddMonth?"odd-month":"even-month").concat(e.selectedDay===l?" selected":""),onClick:function(){return e.onDayClick(l)}},t.number)})))}))))},u=[{days:i(31),name:"January",weeks:5},{days:i(28),name:"February",weeks:4},{days:i(31),name:"March",weeks:4},{days:i(30),name:"April",weeks:5},{days:i(31),name:"May",weeks:4},{days:i(30),name:"June",weeks:4},{days:i(31),name:"July",weeks:5},{days:i(31),name:"August",weeks:4},{days:i(30),name:"September",weeks:4},{days:i(31),name:"October",weeks:5},{days:i(30),name:"November",weeks:4},{days:i(31),name:"December",weeks:5}];t.ConventionalYear=function(e){return r.default.createElement(s,a({},e,{months:u,weeks:o(u)}))},t.TrecemberYear=function(e){var t=u.map((function(e){return{days:i(28),name:e.name,weeks:4}})).concat({days:i(29),name:"Trecember",weeks:5});return r.default.createElement(s,a({},e,{months:t,weeks:o(t)}))}},5794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trecember=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(4380);t.trecember={content:function(){return i.english},metadata:{category:a.ArticleCategory.offTopic,date:"2019-12-01",duration:4,id:l.ArticleId.trecember,languages:[r.Language.en]}}},6455:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(3338),o=n(9796),s=n(4711),u=n(974),c=n(1121),d=n(5922);t.english={title:"@typed-web-api: type safety for fetch requests",description:"How to use @express-typed-api to declare a type for an express API and automatically infer the corresponding network requests' return type",shareSentence:"Automatically infer network requests' return type through @express-typed-api",introduction:l.default.createElement("p",null,"Writing a web app in Typescript provides type safety in both the client and the server but, what about the communication between the two sides? The payload of network requests remains untyped by default, boycotting our attempts to keep a consistent code base. With that idea in mind I wrote ",l.default.createElement(d.InlineSnippet,null,"@typed-web-api"),", a minimalist approach to adding type safety to fetch requests. Here is how to use it."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(c.ArticleImage,{alt:"Telecommunications antenna",articleId:u.ArticleId.typedWebApi,className:"image-600",filename:"antenna.jpg"}),l.default.createElement("p",null,"typed-web-api comes in three parts. First we must create a type definition for the web API via"," ",l.default.createElement(s.Anchor,{url:"https://www.npmjs.com/package/@typed-web-api/common"},l.default.createElement(d.InlineSnippet,null,"@typed-web-api/common")),". The type definition is a description of all the endpoints, including their path, method and response type. Optionally we can specify their request payload type too."),l.default.createElement("p",null,"This is what the type declaration would look like for a sample web API with three endpoints: ",l.default.createElement(d.InlineSnippet,null,"POST /users/login"),","," ",l.default.createElement(d.InlineSnippet,null,"GET /users"),","," ",l.default.createElement(d.InlineSnippet,null,"GET /users/:userId"),"."),l.default.createElement(r.default,{id:"865f920a3af0ea5125770ff5db898940"}),l.default.createElement("ul",null,l.default.createElement("li",null,"Each endpoint must be listed using the"," ",l.default.createElement(d.InlineSnippet,null,"/path_method")," format. This opinionated format is a simple convention that allows the library for validating the payload request type depending on the method."),l.default.createElement("li",null,"Splitting the type declarations into subtypes is not necessary, but doing so will make it easier to implement the server endpoints in different controllers (a common practice on the server side).")),l.default.createElement("p",null,"Next we can start adding type safety to the client side network requests using"," ",l.default.createElement(s.Anchor,{url:"https://www.npmjs.com/package/@typed-web-api/client"},l.default.createElement(d.InlineSnippet,null,"@typed-web-api/client")),". For that we will need to obtain a typed instance of the browser-native"," ",l.default.createElement(d.InlineSnippet,null,"fetch")," function, by passing the previously created type definition to the ",l.default.createElement(d.InlineSnippet,null,"getTypedFetch")," method. Using the typed fetch function the return type of the network requests will be inferred by Typescript automatically. Using ",l.default.createElement(d.InlineSnippet,null,"@typed-web-api/client")," ","requires a few minor changes:"),l.default.createElement(r.default,{id:"894bee8b6839e70dbeca64107003d88e"}),l.default.createElement("ul",null,l.default.createElement("li",null,"We must obtain the typed fetch function by calling"," ",l.default.createElement(d.InlineSnippet,null,"getTypedFetch"),", passing the API type declaration as a type parameter. The returned function can be used everywhere in the client app."),l.default.createElement("li",null,"All calls to typed fetch must provide the method along with the path, following the ",l.default.createElement(d.InlineSnippet,null,"/path_method")," format used in the API type definition."),l.default.createElement("li",null,"Additional parameters of fetch calls must be passed to the typed fetch function via the ",l.default.createElement(d.InlineSnippet,null,"init")," parameter.",l.default.createElement(r.default,{id:"7a974fc01a979ed0fb95e835f8600799"})),l.default.createElement("li",null,"When using query string parameters (i.e."," ",l.default.createElement(d.InlineSnippet,null,"/users?limit=25"),") or URL parameters (i.e."," ",l.default.createElement(d.InlineSnippet,null,"/users/xyz"),") the values must be passed via the"," ",l.default.createElement(d.InlineSnippet,null,"queryString")," or"," ",l.default.createElement(d.InlineSnippet,null,"urlParams")," properties:",l.default.createElement(r.default,{id:"206c5fbbcff14d23a5b9ebab7ac74b0b"})),l.default.createElement("li",null,"When using typed request payloads, the typed fetch function will expect the request payload to be provided via the corresponding properties.",l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.typedWebApi,filename:"request-payload-validation.png",footer:"Typescript validation of the request payload in VSCode"}))),l.default.createElement("p",null,"Finally, the server side. Here we need to make sure that the web API implementation satisfies the type definition we have generated earlier. This will vary depending on the framework the web API is built with."," ",l.default.createElement(d.InlineSnippet,null,"@typed-web-api")," supports two popular frameworks: express and NestJS."),l.default.createElement("p",null,"Consider the following implementation of the sample endpoints described above (I'm using NestJS here but there are examples for both platforms in the"," ",l.default.createElement(s.Anchor,{url:"https://github.com/capelski/typed-web-api"},"official repository"),"). In this code the return type of each endpoint is determined by the type the returned payload happens to have."),l.default.createElement(r.default,{id:"08985890a45287f2f90a3d632cf1ca36"}),l.default.createElement("p",null,"Using"," ",l.default.createElement(s.Anchor,{url:"https://www.npmjs.com/package/@typed-web-api/nestjs"},l.default.createElement(d.InlineSnippet,null,"@typed-web-api/nestjs"))," ","we can guarantee the return types are consistent with the web API type definition just by applying a couple tweaks:"),l.default.createElement(r.default,{id:"8a247474814c16c7bf34a9697f5539a0"}),l.default.createElement("ul",null,l.default.createElement("li",null,"Make the controller implement the type definition. By using the generic"," ",l.default.createElement(d.InlineSnippet,null,"ServerEndpoints")," interface we enforce the controller to implement the endpoints passed in the type parameter, with the appropriate return type. Note that"," ",l.default.createElement(d.InlineSnippet,null,"ServerEndpoints")," requires the methods' name to contain the full pathname; controller prefixes must be removed (e.g."," ",l.default.createElement(d.InlineSnippet,null,"'/users'"),")."),l.default.createElement("li",null,"Replace the NestJS method decorators with the almighty"," ",l.default.createElement(d.InlineSnippet,null,"HttpMethod")," decorator. This decorator is a simple wrapper that calls the corresponding NestJS method decorators based on the method included in function name, passing the pathname as parameter.")),l.default.createElement("p",null,"And that's about it. This library is my second attempt at brining type safety to network requests and it benefits from my previous learnings (i.e."," ",l.default.createElement(i.NavLink,{to:o.articleRoute.path.replace(":articleId",u.ArticleId.typescriptMonorepo)},"express-web-api"),"). It is meant to be generic, framework agnostic on the client side, and impose as little changes as possible in both sides of the code. I'm pretty confident with the result but, hey, one always thinks to have done an outstanding job in their limited understanding of the world. Let me know what you think about it if you have a go."))}},106:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typedWebApi=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(6455);t.typedWebApi={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2024-06-21",duration:5,id:l.ArticleId.typedWebApi,languages:[r.Language.en],shareImage:"antenna.jpg"}}},1051:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(3338),o=n(9796),s=n(4711),u=n(974),c=n(1121),d=n(8892),p=n(4173),f=n(5922);t.english={title:"Distribution of Typescript shared code without package repositories",description:"Distributing shared Typescript code to production environments without package repositories",shareSentence:"You don't need package repositories to distribute your Typescript monorepo shared code to production environments. Here are a couple of ways to do it!",introduction:l.default.createElement("p",null,"A couple years ago I wrote a piece about"," ",l.default.createElement(i.NavLink,{to:o.articleRoute.path.replace(":articleId",u.ArticleId.typescriptMonorepo)},"sharing code in Typescript monorepos"),", focusing mainly on npm workspaces, and I left out an important aspect of the software development lifecycle: shipping the compiled files to production environments. Because that is such a fundamental part of software development, I'll be addressing it in this second piece of writing."),body:function(){return l.default.createElement(l.default.Fragment,null,l.default.createElement(c.ArticleImage,{alt:"Package distribution representation",articleId:u.ArticleId.typescriptMonorepoII,className:"image-600",filename:"distribution.jpg"}),l.default.createElement("p",null,"Having successfully extracted the duplicate code into a separate directory/npm project (covered in"," ",l.default.createElement(i.NavLink,{to:o.articleRoute.path.replace(":articleId",u.ArticleId.typescriptMonorepo)},"sharing code in Typescript monorepos"),"), the task at hand is to decide how the shared code and its external dependencies will make their way to production environments. Let's consider two different solutions: one based on ",l.default.createElement("b",null,"relative path imports")," and another based on ",l.default.createElement("b",null,"npm dependencies"),"."),l.default.createElement("p",null,l.default.createElement("i",null,"Note that the distribution issue is mostly a server side concern since client apps are usually bundled into static assets that include both external dependencies and code imported from outside the project.")),l.default.createElement("p",null,"To make the explanations more tangible, let's introduce a simple"," ",l.default.createElement(s.Anchor,{url:"https://github.com/capelski/typescript-monorepo"},"monorepo example"),". For the sake of simplicity the example code has no actual functionality, just one duplicate function (",l.default.createElement(f.InlineSnippet,null,"getId"),") that relies on one external dependency (",l.default.createElement(f.InlineSnippet,null,"nanoid"),"). Here is the monorepo structure:"),l.default.createElement(d.BlockSnippet,null,l.default.createElement(p.DirectoryView,{structure:{client:{source:{"index.html":!0,"index.tsx":!0},"package.json":!0,"tsconfig.json":!0,"webpack.config.js":!0},server:{public:{},source:{"main.ts":!0},Dockerfile:!0,"package.json":!0,"tsconfig.json":!0}}})),l.default.createElement("p",null,"The server side code:"),l.default.createElement(r.default,{id:"c1687116d228e99ffb82b4e3e3a042cb"}),l.default.createElement("p",null,"And the client side code:"),l.default.createElement(r.default,{id:"3049496ceedf7650196bdc6adaa77c31"}),l.default.createElement("h3",null,"Relative path imports"),l.default.createElement("p",null,"When importing shared code via relative path imports, Typescript will include the shared code into the project's compiled files. Distribution problem solved! But there's a caveat: importing code from outside the project directory via relative paths will impact the way Typescript compiles the files."),l.default.createElement("p",null,"Because we are now importing code from outside the project's"," ",l.default.createElement(s.Anchor,{url:"https://www.typescriptlang.org/tsconfig#rootDir"},l.default.createElement(f.InlineSnippet,null,"rootDir")),", Typescript will need to create additional directories inside the compiled files directory. In our example the directory structure will change from"),l.default.createElement(d.BlockSnippet,null,l.default.createElement(p.DirectoryView,{structure:{server:{dist:{"main.js":!0},source:{"main.ts":!0}}}})),l.default.createElement("p",null,"to:"),l.default.createElement(d.BlockSnippet,null,l.default.createElement(p.DirectoryView,{structure:{shared:{"index.ts":!0},server:{dist:{server:{source:{"main.js":!0}},shared:{"index.js":!0}},source:{"main.ts":!0}}}})),l.default.createElement("p",null,l.default.createElement("i",null,"Depending on the Typescript version you use, importing code from outside the project directory might result in the following error. To fix it, simply change the ",l.default.createElement(f.InlineSnippet,null,"rootDir")," property to the path of the directory that contains all projects (usually,"," ",l.default.createElement(f.InlineSnippet,null,'".."'),").",l.default.createElement(d.BlockSnippet,null,"source/main.ts:3:23 - error TS6059: File '/typescript-monorepo/shared/index.ts' is not under 'rootDir' '/typescript-monorepo/server/source'. 'rootDir' is expected to contain all source files.",l.default.createElement("br",null),l.default.createElement("br",null),"import ","{"," getId ","}",' from "../../shared";'))),l.default.createElement("p",null,"This consequence comes from the fact that Typescript doesn't change import paths during compilation. Therefore the only way to guarantee the paths are still correct after compilation is to replicate the same directory structure. The new directory structure is not necessarily a deal breaker, but it could be when using non-import relative paths (e.g."," ",l.default.createElement(f.InlineSnippet,null,'resolve(__dirname, "..", "public")'),")."),l.default.createElement("p",null,"A simple solution is to make the non-imports paths relative to the distribution directory. In our example:"," ",l.default.createElement(f.InlineSnippet,null,'resolve(__dirname, "..", "..", "..", "public")'),". Another solution, for cases where development tools are used to run the project without compiling (i.e. ",l.default.createElement(f.InlineSnippet,null,"ts-node"),"), would be to set those paths depending on the execution mode."),l.default.createElement("p",null,"And what about the external dependencies of the shared code? Well, since the shared code is not an npm project, it can't manage its own dependencies. Each project that imports from it is responsible for installing any dependencies the shared code might need. It means having the same dependencies declared across different ",l.default.createElement(f.InlineSnippet,null,"package.json")," files but, hey, they were already there before the code extraction, so it's not a big deal. If you want to manage the external dependencies of the shared code from a single source, then the ",l.default.createElement("b",null,"npm dependencies")," approach will work better for you."),l.default.createElement("p",null,"Summary:"),l.default.createElement("ul",null,l.default.createElement("li",null,"👍 The compiled files include the shared code."),l.default.createElement("li",null,"👎 Might break non-import relative paths."),l.default.createElement("li",null,"👎 Duplicate dependencies across different package.json files.")),l.default.createElement("p",null,"Changes:"," ",l.default.createElement(s.Anchor,{url:"https://github.com/capelski/typescript-monorepo/compare/main...relative-path-imports"},"https://github.com/capelski/typescript-monorepo/compare/main...relative-path-imports")),l.default.createElement(r.default,{id:"f29477fe4c52e48b917e23d053a83197"}),l.default.createElement(r.default,{id:"68d8ed0f32ead27c7a082d477b715abe"}),l.default.createElement("h3",null,"npm dependencies"),l.default.createElement("p",null,"When importing shared code via npm dependencies (local or public), the shared code becomes an independent npm project, so it can manage its own dependencies. One problem solved! Now, what about the distribution of the compiled files?"),l.default.createElement("p",null,"When opting for public dependencies, the shared code will be provisioned via the dependencies installation step (executed either directly on the production environments or via Docker image). Note however that public dependencies involve additional overhead (e.g. publishing the dependency to a package repository). For the sake of simplicity, let's consider local dependencies this time."),l.default.createElement("p",null,"When opting for local dependencies, the shared code will no longer be provisioned via the dependencies installation step. This happens because local dependencies are just a symbolic link inside the"," ",l.default.createElement(f.InlineSnippet,null,"node_modules")," directory, which rely on the shared code being present in the workspace. Because the shared code will not be present by default in the production environment, we will need to provide it separately."),l.default.createElement("p",null,"This is what happens in our example when we try to run the Dockerized application after having extracted the duplicate code into an npm local dependency:"),l.default.createElement(d.BlockSnippet,null,">"," docker run -p 3000:3000 server",l.default.createElement("br",null),l.default.createElement("br",null),l.default.createElement("br",null),">"," server@1.0.0 start",l.default.createElement("br",null),">"," node dist/main.js",l.default.createElement("br",null),l.default.createElement("br",null),"node:internal/modules/cjs/loader:1042",l.default.createElement("br",null)," throw err;",l.default.createElement("br",null)," ^",l.default.createElement("br",null),l.default.createElement("br",null),"Error: Cannot find module 'shared'",l.default.createElement("br",null),"Require stack:",l.default.createElement("br",null),"- /usr/src/app/dist/main.js",l.default.createElement("br",null),"  at Module._resolveFilename (node:internal/modules/cjs/loader:1039:15)",l.default.createElement("br",null),"  at Module._load (node:internal/modules/cjs/loader:885:27)",l.default.createElement("br",null),"  at Module.require (node:internal/modules/cjs/loader:1105:19)",l.default.createElement("br",null),"  at require (node:internal/modules/cjs/helpers:103:18)",l.default.createElement("br",null),"  at Object.","<","anonymous",">"," (/usr/src/app/dist/main.js:8:18)",l.default.createElement("br",null),"  at Module._compile (node:internal/modules/cjs/loader:1218:14)",l.default.createElement("br",null),"  at Module._extensions..js (node:internal/modules/cjs/loader:1272:10)",l.default.createElement("br",null),"  at Module.load (node:internal/modules/cjs/loader:1081:32)",l.default.createElement("br",null),"  at Module._load (node:internal/modules/cjs/loader:922:12)",l.default.createElement("br",null),"  at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12) ","{",l.default.createElement("br",null)," code: 'MODULE_NOT_FOUND',",l.default.createElement("br",null)," requireStack: [ '/usr/src/app/dist/main.js' ]",l.default.createElement("br",null),"}"),l.default.createElement("p",null,"To fix this problem we will need to explicitly provision the shared code npm project, independently from the external dependencies installation. For Dockerizied apps, one way to do so consists in including the npm project in the Docker image of the projects that import it, using the same relative path."),l.default.createElement("p",null,"In our example, this means changing the Docker build command to start from the parent directory (as it will now need access to both the server and shared projects' directory) and turning the Dockerfile (simplified) from"),l.default.createElement(d.BlockSnippet,null,"FROM node:18.13.0-alpine",l.default.createElement("br",null),l.default.createElement("br",null),"WORKDIR /usr/src/app",l.default.createElement("br",null),"COPY . .",l.default.createElement("br",null),"RUN npm ci --omit=dev",l.default.createElement("br",null),l.default.createElement("br",null),"EXPOSE 3000",l.default.createElement("br",null),"CMD npm start",l.default.createElement("br",null)),"to",l.default.createElement(d.BlockSnippet,null,"FROM node:18.13.0-alpine",l.default.createElement("br",null),l.default.createElement("br",null),"# Copy shared code and install its dependencies",l.default.createElement("br",null),"WORKDIR /usr/src/shared",l.default.createElement("br",null),"COPY ./shared .",l.default.createElement("br",null),"RUN npm ci --omit=dev",l.default.createElement("br",null),l.default.createElement("br",null),"WORKDIR /usr/src/app",l.default.createElement("br",null),"COPY ./server . # The path must now be relative to the parent directory",l.default.createElement("br",null),"RUN npm ci --omit=dev",l.default.createElement("br",null),l.default.createElement("br",null),"EXPOSE 3000",l.default.createElement("br",null),"CMD npm start",l.default.createElement("br",null)),l.default.createElement("p",null,"Summary:"),l.default.createElement("ul",null,l.default.createElement("li",null,"👍 The shared code dependencies are managed in a single package.json file."),l.default.createElement("li",null,"👎 Additional effort required to distribute the shared code.")),l.default.createElement("p",null,"Changes:"," ",l.default.createElement(s.Anchor,{url:"https://github.com/capelski/typescript-monorepo/compare/main...npm-dependencies"},"https://github.com/capelski/typescript-monorepo/compare/main...npm-dependencies")),l.default.createElement(r.default,{id:"92a4a8fa35cdca982458385a8ec87986"}),l.default.createElement(r.default,{id:"7252ebbb9c5885506bcf51191fe33ae5"}))}}},1490:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typescriptMonorepoII=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(1051);t.typescriptMonorepoII={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2024-06-07",duration:5,id:l.ArticleId.typescriptMonorepoII,languages:[r.Language.en],shareImage:"distribution.jpg"}}},6956:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(3338),i=n(9796),o=n(4711),s=n(974),u=n(1121),c=n(8892),d=n(4173),p=n(5922),f=n(2e3);t.english={title:"Client/Server code sharing in Typescript monorepos",description:"How to share code between client and server in Typescript monorepos",shareSentence:"Time to get rid of the duplicated code in your Typescript monorepo!",introduction:l.default.createElement("p",null,"Writing a web server on node.js means using the same programming languages on both sides of a web app. Which should allow for sharing a good amount of code between the client and the server apps. Which should be easy when both apps are part of the same monorepo. Then, why do things get complicated when we add Typescript to the mix?"),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("h3",null,'The "replication" problem'),l.default.createElement("p",null,"In Javascript monorepos, node.js runs the very same files where the source code is written. Therefore, we can we can easily extract the duplicated code to shared files and require them using relative paths 👍 We will need to decide how we ship the shared files to production environments but that's a"," ",l.default.createElement(r.NavLink,{to:i.articleRoute.path.replace(":articleId",s.ArticleId.typescriptMonorepoII)},"separate story"),"."),l.default.createElement("p",null,"In Typescript monorepos however, node.js runs a set of transpiled files, which are usually in a different location from the source code files (e.g. a"," ",l.default.createElement(p.InlineSnippet,null,"lib")," or ",l.default.createElement(p.InlineSnippet,null,"dist")," folder). This set of transpiled files is generated by turning the Typescript files in the source folder into Javascript files in the distribution folder, replicating the same folder structure. For example:"),l.default.createElement(c.BlockSnippet,null,l.default.createElement(d.DirectoryView,{structure:{public:{},src:{utils:{"arrays.ts":!0},"main.ts        # import a from './utils/array';":!0,"express.ts     # express.static(path.join(__dirname, '..', 'public'));":!0},dist:{utils:{"arrays.js":!0},"main.js        # const a = require('./utils/array'); ✅":!0,"express.js     # express.static(path.join(__dirname, '..', 'public')); ✅":!0},'package.json      # "npm run start": "node dist/main.js" ✅':!0,"tsconfig.json":!0}})),l.default.createElement("p",null,l.default.createElement("i",null,"It is possible to keep the transpiled files in the same relative location as the source files, but we usually compile them to a separate location for easier manipulation of the distribution files.")),l.default.createElement("p",null,'This "replication" strategy is meant so that Typescript can guarantee, for each relative import/require statement, that the corresponding file will be available at the same relative path. Note that the "replication" strategy hereby defines an important property of Typescript: import/require paths are never modified during transpilation.'),l.default.createElement("p",null,"In the example above, the"," ",l.default.createElement(p.InlineSnippet,null,"import a from './utils/array';")," import statement in"," ",l.default.createElement(p.InlineSnippet,null,"main.ts")," will be transpiled into"," ",l.default.createElement(p.InlineSnippet,null,"const a = require('./utils/array');")," in"," ",l.default.createElement(p.InlineSnippet,null,"main.js"),". Because the folder structure is the same in both cases, the relative paths are correct for both Typescript and node.js. So far so good."),l.default.createElement("p",null,'The "replication" strategy however has unexpected side effects when importing code, via relative paths, from outside the Typescript project'," ",l.default.createElement(o.Anchor,{url:"https://www.typescriptlang.org/tsconfig#rootDir"},"root folder")," ","(usually the folder where ",l.default.createElement(p.InlineSnippet,null,"tsconfig.json")," is located). In those cases, the only way to guarantee the relative paths after transpiling is to include the folders outside the project in the structure of the distribution folder. For example:"),l.default.createElement(c.BlockSnippet,null,l.default.createElement(d.DirectoryView,{structure:{utils:{src:{"arrays.ts":!0}},server:{public:{},src:{"main.ts              # import a from '../../utils/src/arrays';":!0,"express.ts           # express.static(path.join(__dirname, '..', 'public'));":!0},dist:{utils:{src:{"arrays.js":!0}},server:{src:{"main.js        # const a = require('../../utils/src/arrays'); ✅":!0,"express.js     # express.static(path.join(__dirname, '..', 'public')); ❌":!0}}},'package.json            # "npm run start": "node dist/main.js" ❌':!0,"tsconfig.json":!0}}})),l.default.createElement("p",null,"So, in this second example, the import statement"," ",l.default.createElement(p.InlineSnippet,null,"import a from '../../utils/src/arrays';")," in"," ",l.default.createElement(p.InlineSnippet,null,"main.ts")," becomes"," ",l.default.createElement(p.InlineSnippet,null,"const a = require('../../utils/src/arrays');")," in"," ",l.default.createElement(p.InlineSnippet,null,"main.js"),". Still correct for both Typescript and node.js, because the structure of the distribution folder has been specifically generated to support the import relative paths."),l.default.createElement("p",null,"However paths that fall outside Typescript's scope (the start script in the"," ",l.default.createElement(p.InlineSnippet,null,"package.json")," and the path to the"," ",l.default.createElement(p.InlineSnippet,null,"public")," folder where the static assets are stored) are not aware of the change in the folder structure and will lead into runtime errors due to files not existing at the expected locations. That's not good. And that's exactly what I call the \"replication\" problem."),l.default.createElement("p",null,l.default.createElement("i",null,'Note that Typescript\'s "replication" strategy also applies to client side projects. It usually doesn\'t introduce problems however, because usually the client side files are bundled together in a single file. That single "bundle" file contains all the code, so it doesn\'t need to import/require any other file via relative paths.')),l.default.createElement("h3",null,"A sample app"),l.default.createElement("p",null,'Before looking at different ways to solve the "replication" problem, let\'s create a sample Typescript web app to better illustrate each different approach that we can use. I will call such web app'," ",l.default.createElement(o.Anchor,{url:"https://github.com/capelski/weather-monorepo"},l.default.createElement("b",null,"Weather Now")),":"),l.default.createElement("ul",null,l.default.createElement("li",null,"On one side we have a React UI (i.e."," ",l.default.createElement(p.InlineSnippet,null,"weather-client"),") that fetches weather data for a given city from a web API and displays it in a simple layout."),l.default.createElement("li",null,"On the other side we have an ",l.default.createElement("b",null,"Express web API")," (i.e."," ",l.default.createElement(p.InlineSnippet,null,"wether-server"),") with a single endpoint that returns weather data (i.e. ",l.default.createElement(p.InlineSnippet,null,"/api/weather"),"). It also serves the static UI files in the root url.")),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"weather-now-ui.png",footer:"Weather Now UI"}),l.default.createElement("p",null,"And just like most modern web applications it contains two types of duplicate code:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,"Validation logic"),". ",l.default.createElement(p.InlineSnippet,null,"validateCityName")," is a function which validates that a city name has been provided. It's executed on both the client side, to improve the error detection user experience, and on the server side, to protect ourselves from API faulty calls."),l.default.createElement("li",null,l.default.createElement("b",null,"Data models"),". The same ",l.default.createElement(p.InlineSnippet,null,"Validation"),","," ",l.default.createElement(p.InlineSnippet,null,"Weather")," and"," ",l.default.createElement(p.InlineSnippet,null,"WeatherIcons")," types are used in both client and server side. Since we deal with the same data types on both ends, it's only logic to define symmetric data models.")),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"duplicated-code.png",footer:"Sample duplicated code in Weather Now"}),l.default.createElement("p",null,'Now let\'s introduce the "replication" problem. By extracting that duplicated code into a common folder (e.g. ',l.default.createElement(p.InlineSnippet,null,"weather-common"),") and requiring it through relative path imports, we can observer how the structure of distribution folder changes after transpiling the code (see"," ",l.default.createElement(o.Anchor,{url:"https://github.com/capelski/weather-monorepo/tree/base-code-extraction"},"base-code-extraction")," ","branch)."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"base-code-extraction.png",footer:"Extraction of duplicated code to common folder"}),l.default.createElement("p",null,"The code extraction leads to the npm start script failing and, if we run the transpiled file in the new file path (i.e."," ",l.default.createElement(p.InlineSnippet,null,"node weather-server/distribution/weather-server/source/index.js"),'), the express server fails to serve the static assets. Great, we have introduced the "replication" problem. Now let\'s fix it using different solutions 🛠️'),l.default.createElement("h3",{id:"relative-path-fixes"},"Solution 1. Relative paths fixes"),l.default.createElement("p",null,"The quick and dirty approach to get things working again. We just need to adapt all paths and references outside Typescript import statements to match the changes in the distribution folder. Doable, but can be challenging on large projects, specially because some errors will only appear on runtime."),l.default.createElement("p",null,"Branch:"," ",l.default.createElement(o.Anchor,{url:"https://github.com/capelski/weather-monorepo/tree/1-path-fixes"},"1-path-fixes"),"."),l.default.createElement("p",null,"Implementation:"),l.default.createElement("ul",null,l.default.createElement("li",null,"Change the references to compiled files in"," ",l.default.createElement(p.InlineSnippet,null,"package.json"),": the"," ",l.default.createElement(p.InlineSnippet,null,"main")," property and the"," ",l.default.createElement(p.InlineSnippet,null,"start")," npm script."),l.default.createElement("li",null,'Change the path to the static assets folder. Because we want to keep the ability to run the code without compiling we will need to define this path based on the "execution mode". This means, for example, introducing an environment variable (e.g. ',l.default.createElement(p.InlineSnippet,null,"process.env.NODEMON"),") to distinguish between node and nodemon/ts-node executions.")),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"relative-path-fixes.png",footer:"Adaptations for the structure of the distribution folder"}),l.default.createElement("h3",{id:"common-npm-project"},"Solution 2. Common npm project"),l.default.createElement("p",null,"By turning the common folder into an npm project itself, Typescript assumes that the compiled files will exist in the relative paths and it will stop including the outside folders in the distribution folder 💪 Note that as a result of turning the common folder into a separate npm project:"),l.default.createElement("ul",null,l.default.createElement("li",null,'We are introducing a "build dependency". We will need to compile the common project separately before compiling the projects that depend on it.'),l.default.createElement("li",null,l.default.createElement("p",null,"Typescript looses access to the types definitions. We will need to generate type declaration files for the common project (i.e. setting the"," ",l.default.createElement(p.InlineSnippet,null,"declaration")," property to true in"," ",l.default.createElement(p.InlineSnippet,null,"tsconfig.json"),") and let Typescript know where to locate those files (i.e. setting the ",l.default.createElement(p.InlineSnippet,null,"types")," ","property in the common ",l.default.createElement(p.InlineSnippet,null,"package.json"),") in order to compile the dependent projects."),l.default.createElement("p",null,"Note that, at least in VSCode, the type definitions will cause the IDE symbols navigation to resolve to the declaration files instead of the source code. Unfortunately we can't fix this issue when using relative path imports."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"common-npm-project-types-resolution.png",footer:"VSCode types definition resolution through declaration files"})),l.default.createElement("li",null,"Hot reloading will no longer detect changes happening outside the project source folder. We will need to compile the common project in watch mode as well as using nodemon (or a similar tool) to watch for changes in the common project's source folder.")),l.default.createElement("p",null,"Branch:"," ",l.default.createElement(o.Anchor,{url:"https://github.com/capelski/weather-monorepo/tree/2-npm-project"},"2-npm-project"),"."),l.default.createElement("p",null,"Implementation:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("p",null,"Move the duplicate code to a source subfolder in the common folder and add a"," ",l.default.createElement(p.InlineSnippet,null,"tsconfig.json")," file to set up the Typescript compilation. Set the ",l.default.createElement(p.InlineSnippet,null,"declaration")," property to true, in order to generate type declaration files."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"common-npm-project.png",footer:"Extraction of duplicated code to common npm project"})),l.default.createElement("li",null,l.default.createElement("p",null,"Add a ",l.default.createElement(p.InlineSnippet,null,"package.json")," file to the common folder. Define an npm script to compile the Typescript code (e.g."," ",l.default.createElement(p.InlineSnippet,null,"build"),"). Set the"," ",l.default.createElement(p.InlineSnippet,null,"types")," property, so that Typescript knows where to locate the type declaration files.")),l.default.createElement("li",null,l.default.createElement("p",null,"Change the compilation npm scripts in dependant projects to compile the common project as well."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"common-npm-project-build-dependency.png",footer:"Modifications to build npm script to compile common project"})),l.default.createElement("li",null,l.default.createElement("p",null,"To maintain the hot reloading in dependent projects, change the development npm scripts to compile the common project in watch mode and set nodemon to watch for changes in the common project's source folder, via"," ",l.default.createElement(p.InlineSnippet,null,"nodemon.json"),"."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"common-npm-project-nodemon.png",footer:"Hot reloading necessary changes after extracting duplicated code"}))),l.default.createElement("h3",{id:"local-dependencies"},"Solution 3. Local dependencies"),l.default.createElement("p",null,'Building on top of the "Common npm project" approach we can use npm local dependencies (natively supported since npm 2.0) to install the common project as a dependency of other npm projects that import code from it, letting node find the common code via ',l.default.createElement(p.InlineSnippet,null,"node_modules"),". When using local dependencies:"),l.default.createElement("ul",null,l.default.createElement("li",null,"npm creates a symbolic link to the local dependency project inside each dependent project's ",l.default.createElement(p.InlineSnippet,null,"node_modules")," folder."),l.default.createElement("li",null,l.default.createElement("p",null,"We no longer need relative paths to import code from outside the project; we can use the common project name instead. We have greater freedom to refactor the common project, without having to reflect the changes in any of the import statements of the dependent projects."),l.default.createElement("p",null,"Importing via project name also allows us to restore the IDE symbols navigation (at least, in VSCode) that we lost when extracting the code into a separate npm project. It is done via the"," ",l.default.createElement(o.Anchor,{url:"https://www.typescriptlang.org/tsconfig#paths"},"paths")," ","property in ",l.default.createElement(p.InlineSnippet,null,"tsconfig.json"),".")),l.default.createElement("li",null,l.default.createElement("p",null,"We introduce a potential drawback: not being able to install public packages with the same name as the local dependencies. For example, naming a project"," ",l.default.createElement(p.InlineSnippet,null,"common")," would prevent us from installing the"," ",l.default.createElement(o.Anchor,{url:"https://www.npmjs.com/package/common"},"common")," package from the npm registry."),l.default.createElement("p",null,"A convenient way of working around these conflicts is to ",l.default.createElement("b",null,"namespace")," ","the packages. In fact, you might have noticed that some popular packages use the ",l.default.createElement(p.InlineSnippet,null,"@organization/package")," format on their names: ",l.default.createElement(p.InlineSnippet,null,"@types/node"),","," ",l.default.createElement(p.InlineSnippet,null,"@react-native-community/slider"),","," ",l.default.createElement(p.InlineSnippet,null,"@angular/core"),", etc. By using that convention is easier to avoid name conflicts, since your local dependencies will have very specific names."))),l.default.createElement("p",null,"Branch:"," ",l.default.createElement(o.Anchor,{url:"https://github.com/capelski/weather-monorepo/tree/3-local-dependency"},"3-local-dependency")," ","(or"," ",l.default.createElement(o.Anchor,{url:"https://github.com/capelski/weather-monorepo/tree/3-local-dependency-namespace"},"3-local-dependency-namespace")," ","for namespaced projects)."),l.default.createElement("p",null,"Implementation:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("p",null,"Install the common project as a local dependency in all the projects that are importing code from it, using the common project relative path:"),l.default.createElement(c.BlockSnippet,null,"cd weather-client",l.default.createElement("br",null),"npm install --save ../weather-common",l.default.createElement("br",null),"cd ../weather-server",l.default.createElement("br",null),"npm install --save ../weather-common"),l.default.createElement("p",null,"This will register the local dependency in both"," ",l.default.createElement(p.InlineSnippet,null,"package.json")," and"," ",l.default.createElement(p.InlineSnippet,null,"package-lock.json")," in the dependent projects."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"local-dependency-symbolic-links.png",footer:"node.js generated symbolic links"})),l.default.createElement("li",null,l.default.createElement("p",null,"Replace all the relative path imports with external dependency imports, using the name of the common project."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"local-dependency-import.png",footer:"npm local dependency import"})),l.default.createElement("li",null,l.default.createElement("p",null,"To restore the IDE symbols navigation, set the Typescript"," ",l.default.createElement(o.Anchor,{url:"https://www.typescriptlang.org/tsconfig#paths"},"paths")," ","property:"),l.default.createElement(c.BlockSnippet,null,l.default.createElement(f.ObjectView,{object:{compilerOptions:{paths:{"weather-common":["./weather-common/source"]}},extends:"./tsconfig.base.json"}})),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"local-dependency-types-resolution.png",footer:"VSCode types definition resolution through Typescript paths"}),l.default.createElement("p",null,l.default.createElement("i",null,"Note that using Typescript paths to resolve the relative path imports without registering the local npm dependencies will result in runtime errors since, as previously mentioned, Typescript does not modify the imports path on compilation.")),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"wrong-ts-paths-resolution.png",footer:"Wrong usage of Typescript paths"}))),l.default.createElement("h3",{id:"workspaces"},"Solution 4. Workspaces"),l.default.createElement("p",null,'Building on top of the "Common npm project" approach we can use'," ",l.default.createElement(o.Anchor,{url:"https://docs.npmjs.com/cli/v7/using-npm/workspaces"},"npm workspaces")," ","(introduced in npm 7.0) to simplify the management of the different projects in the monorepo. When using workspaces:"),l.default.createElement("ul",null,l.default.createElement("li",null,"All dependencies are installed in the root folder's"," ",l.default.createElement(p.InlineSnippet,null,"node_modules"),", removing the need for each project folder to install its own dependencies. As a result, no"," ",l.default.createElement(p.InlineSnippet,null,"package-lock.json")," files are needed in the project folders."),l.default.createElement("li",null,'Just like in the "Local dependencies" approach, we can use npm local dependencies to install the common project as a dependency of other npm projects that import code from it. Note that this time'," ",l.default.createElement("b",null,"the local dependency is managed from the root repository"),", so relatives paths and symbolic links change slightly, but the rest of benefits from local dependencies are kept just the same."),l.default.createElement("li",null,l.default.createElement("p",null,"npm scripts defined in nested projects can be run from the root folder, using the ",l.default.createElement(p.InlineSnippet,null,"-w")," or"," ",l.default.createElement(p.InlineSnippet,null,"-ws"),' arguments, which allows removing "soft link" npm scripts.'),l.default.createElement("p",null,l.default.createElement("i",null,'Because, without workspaces, npm doesn\'t detect scripts defined in nested projects, a common way to run nested scripts from the root folder is to create additional scripts in the root package.json which change the folder (thus the "soft link" term) and then run the corresponding npm script from a nested package.json.')))),l.default.createElement("p",null,"Branch:"," ",l.default.createElement(o.Anchor,{url:"https://github.com/capelski/weather-monorepo/tree/4-npm-workspaces"},"4-npm-workspaces")," ","(or"," ",l.default.createElement(o.Anchor,{url:"https://github.com/capelski/weather-monorepo/tree/4-npm-workspaces-namespace"},"4-npm-workspaces-namespace")," ","for namespaced projects)."),l.default.createElement("p",null,"Implementation:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("p",null,"Move the different projects into a specific folder (e.g."," ",l.default.createElement(p.InlineSnippet,null,"projects"),") and specify that folder through the"," ",l.default.createElement(p.InlineSnippet,null,"workspaces")," property in the root"," ",l.default.createElement(p.InlineSnippet,null,"package.json")," (e.g."," ",l.default.createElement(p.InlineSnippet,null,'["./projects/*"]'),")."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"npm-workspaces.png",footer:"Enabling npm workspaces in package.json"})),l.default.createElement("li",null,"Remove the ",l.default.createElement(p.InlineSnippet,null,"package-lock.json")," file and the"," ",l.default.createElement(p.InlineSnippet,null,"node_modules")," folder in each project."),l.default.createElement("li",null,l.default.createElement("p",null,"If you have installed local dependencies in any of your projects, you will need to remove them for now, as the relative paths will change when using workspaces. You can later re-install them using the"," ",l.default.createElement(p.InlineSnippet,null,"-w")," argument (see below). Failing to do so can lead to the following error:"),l.default.createElement(c.BlockSnippet,null,"npm ERR! Cannot set properties of null (setting 'dev')",l.default.createElement("br",null),l.default.createElement("br",null),"npm ERR! A complete log of this run can be found in:",l.default.createElement("br",null),"npm ERR      /.../.npm/_logs/2022-05-30T05_57_51_827Z-debug.log",l.default.createElement("br",null))),l.default.createElement("li",null,"Remove the ",l.default.createElement(p.InlineSnippet,null,"node_modules")," folder in the root folder and re-install npm dependencies from the root folder. This will update the"," ",l.default.createElement(p.InlineSnippet,null,"package-lock.json")," as well, since npm workspaces come with an additional set of dependencies (e.g."," ",l.default.createElement(p.InlineSnippet,null,"@nodelib/fs.scandir"),")."),l.default.createElement("li",null,l.default.createElement("p",null,"Install the common project as a local dependency in all the projects that import code from it, using the common project relative path and the"," ",l.default.createElement(p.InlineSnippet,null,"-w")," (or"," ",l.default.createElement(p.InlineSnippet,null,"--workspace"),") argument to specify the target project:"),l.default.createElement(c.BlockSnippet,null,"npm install --save ./projects/weather-common -w weather-client",l.default.createElement("br",null),"npm install --save ./projects/weather-common -w weather-server"),l.default.createElement("p",null,"This will register the local dependency in the root"," ",l.default.createElement(p.InlineSnippet,null,"package.json")," and"," ",l.default.createElement(p.InlineSnippet,null,"package-lock.json"),", as well as in the corresponding project's ",l.default.createElement(p.InlineSnippet,null,"package.json"),"."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"npm-workspaces-symbolic-links.png",footer:"node.js generated symbolic links, through workspaces"})),l.default.createElement("li",null,l.default.createElement("p",null,"Replace all the relative path imports with external dependency imports, using the name of the common project."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"npm-workspaces-import.png",footer:"npm local dependency import, through workspaces"})),l.default.createElement("li",null,l.default.createElement("p",null,"To restore the IDE symbols navigation, set the Typescript"," ",l.default.createElement(o.Anchor,{url:"https://www.typescriptlang.org/tsconfig#paths"},"paths")," ","property:"),l.default.createElement(c.BlockSnippet,null,l.default.createElement(f.ObjectView,{object:{compilerOptions:{paths:{"weather-common":["./projects/weather-common/source"]}},extends:"./tsconfig.base.json"}})),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"npm-workspaces-types-resolution.png",footer:"VSCode types definition resolution through Typescript paths"})),l.default.createElement("li",null,l.default.createElement("p",null,'To remove "soft link" npm scripts, replace the'," ",l.default.createElement(p.InlineSnippet,null,"cd")," instructions in the root"," ",l.default.createElement(p.InlineSnippet,null,"package.json")," npm scripts with the corresponding ",l.default.createElement(p.InlineSnippet,null,"-w")," or"," ",l.default.createElement(p.InlineSnippet,null,"-ws")," argument."),l.default.createElement(u.ArticleImage,{articleId:s.ArticleId.typescriptMonorepo,filename:"npm-workspaces-scripts.png",footer:"Simplification of root folder npm scripts through npm workspaces"}))),l.default.createElement("h3",null,"Conclusions"),l.default.createElement("p",null,'We have described the "replication" problem that can occur in Typescript monorepos when sharing code between different projects. We have seen how the structure of the distribution folder changes when not adapting Typescript to support such code sharing, and how that can break some relative paths within the application.'),l.default.createElement("p",null,'We have also seen different approaches to resolve the "replication" problem, each providing additional advantages for increasing amounts of implementation effort. Quoting the popular reference to feline taxidermy, "there is more than one way to skin a cat". Give them a try and decide which one works better for you. Happy coding!'))}},3195:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typescriptMonorepo=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(6956);t.typescriptMonorepo={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2022-06-25",duration:11,id:l.ArticleId.typescriptMonorepo,languages:[r.Language.en],shareImage:"weather-now-ui.png"}}},9022:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121),u=n(8892),c=n(5922);t.english={title:"Gradual replacement of legacy web APIs using 404 responses and http-proxy",description:"How to gradually replace a legacy web API with 404 responses and http-proxy",shareSentence:"Start migrating your legacy web API today! 404 responses and http-proxy will let you do it gradually",introduction:l.default.createElement("p",null,"Re-writing a legacy web API takes time and the exercise will probably span across several releases. We will most likely be facing a scenario were both APIs run in parallel, having the old system servicing endpoints that haven't been migrated yet. But it turns out such an scenario can be achieved painlessly by using the good old http-proxy library and 404 responses! Here is how."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(s.ArticleImage,{alt:"Abstract representation of a web proxy",articleId:o.ArticleId.webApiProxyMigration,className:"image-600",filename:"web-proxy.png"}),l.default.createElement("h3",null,"Personal statement"),l.default.createElement("p",null,"Legacy web APIs can feel excessively complex, are often built on top of discontinued technologies and are sometimes based on design principles that are not aligned with the evolution of the underlying programming language (e.g. callback hell vs promises). We developers dream of re-building such web APIs from scratch, using modern frameworks, with simplicity in mind and addressing all the blind spots that previous software engineers failed to perceive back in day. Oh boy, what a brilliant job we would do!"),l.default.createElement("p",null,"And, if we stick to a company for long enough, if we mention in the appropriate meetings how concerned we are for the security risks of relying on a discontinued framework, if we are lucky, we might witness a rare miracle: management giving the green light for a platform re-write."),l.default.createElement("p",null,"Wonderful news! Let's assemble the engineers, pick the latest and most promising web framework, start drawing architecture diagrams, set overconfident time estimates and maybe even hire a new person or two. This re-write will be finalized in a matter of months 👏"),l.default.createElement("p",null,"But then, even if we could re-write the system that fast, would we dare to execute a full transition to the new infrastructure? The legacy system might have its flaws but it works and it's well tested. It has matured over the years. Can we guarantee that the new platform dots all the i's and crosses all the t's?"),l.default.createElement("p",null,"Let's be cautious for once. Finding a way to integrate the new platform with the old one would allow us to transition to the new platform gradually, validating the new software progressively and not losing any features along the way. Here is a transparent way of introducing a new server to the equation while keeping the old server fully functional."),l.default.createElement("h3",null,"The meat on the bone"),l.default.createElement("p",null,"Let's take the following sample Express web API. For the sake of simplicity it only has two endpoints; a POST endpoint that consumes a JSON body and a GET endpoint that can return 404."),l.default.createElement(r.default,{id:"87c4858cb7c46ac3a6db8407884f2744"}),l.default.createElement("p",null,"Let's now assume the time has arrived to migrate the server to a newer platform 💃 Express is a perfectly solid framework but there are other frameworks out there which add other functionality on top of it and which happen to support Typescript out of the box. Frameworks such as ",l.default.createElement(i.Anchor,{url:"https://nestjs.com/"},"NestJS"),". Here is what an empty NestJS server would look like."),l.default.createElement(r.default,{id:"39fb1b2f7baa6ab09959046f34036ab6"}),l.default.createElement("p",null,"From now on the NestJS server will be the new front door and it will forward requests to endpoints that haven't been migrated yet to the express server. Let's use docker-compose to launch the new infrastructure and then fire a sample request via curl:"),l.default.createElement(r.default,{id:"6f95b7fe0012f86f8349de0e08e718df"}),l.default.createElement(u.BlockSnippet,null,"curl http://localhost:3000/get-endpoint/valid-id",l.default.createElement("br",null),l.default.createElement("br",null),"{",'"message":"Cannot GET /get-endpoint/id","error":"Not Found","statusCode":404',"}"),l.default.createElement("p",null,"At this point all requests result in 404. What we need to do next is implementing the forwarding to the express server on the NestJS server. We can do so using a NestJS mechanism called Filter (to intercept NotFoundException errors) and the"," ",l.default.createElement(c.InlineSnippet,null,"http-proxy")," library (to forward the corresponding requests to the express server):"),l.default.createElement(u.BlockSnippet,null,"npm install --save http-proxy"),l.default.createElement("br",null),l.default.createElement(r.default,{id:"9075c1a675366cf20690e47efe51b0f4"}),l.default.createElement(u.BlockSnippet,null,"curl http://localhost:3000/get-endpoint/valid-id",l.default.createElement("br",null),l.default.createElement("br",null),"Hello world"),l.default.createElement("p",null,"Before moving on pay attention to the change in the creation of the Nest application; we need to explicitly disable the parsing of the requests body (i.e."," ",l.default.createElement(c.InlineSnippet,null,"{"," bodyParser: false ","}"),"). This is necessary because we need the original raw body when forwarding requests to the express server; otherwise express will error out when trying to parse it again. We will need to remember this when adding endpoints that need to parse the body, and add explicit parsing for each endpoint/controller."),l.default.createElement(u.BlockSnippet,null,"curl -X POST -H 'content-type:application/json' -d '","{",' "property": "value" ',"}","' http://localhost:3000/post-endpoint",l.default.createElement("br",null),l.default.createElement("br",null),"Something broke"),l.default.createElement("p",null,"Ok then! We have a new server in place that forwards requests to the already existing server. This can safely be deployed to production and all web API calls should continue to work correctly (ignoring SSL and IP addresses configurations here). From this point onwards it's all about gradually migrating the old endpoints to the new platform."),l.default.createElement("p",null,"Let's start by migrating the POST endpoint. Should be simple enough. Remember we disabled the default body parsing earlier so the requests' body will be empty by default. We will need to install the ",l.default.createElement(c.InlineSnippet,null,"body-parser")," ","library and configure the corresponding Nest module to use it:"),l.default.createElement(u.BlockSnippet,null,"npm install --save body-parser"),l.default.createElement("br",null),l.default.createElement(r.default,{id:"7efae40b439e8d502c22c2a796aecb61"}),l.default.createElement(u.BlockSnippet,null,"curl -X POST -H 'content-type:application/json' -d '","{",' "property": "value" ',"}","' http://localhost:3000/post-endpoint",l.default.createElement("br",null),l.default.createElement("br",null),"Hello world. ","{",'"property":"value"',"}"),l.default.createElement("p",null,"And let's finally migrate the GET endpoint. It is a simple endpoint too and it can implemented in a variety of ways:"),l.default.createElement(r.default,{id:"89d9e6ec99832f9bbf05c23116989a23"}),l.default.createElement(u.BlockSnippet,null,"curl http://localhost:3000/get-endpoint/valid-id",l.default.createElement("br",null),l.default.createElement("br",null),"Hello world"),l.default.createElement(u.BlockSnippet,null,"curl http://localhost:3000/get-endpoint/invalid-id",l.default.createElement("br",null),l.default.createElement("br",null),"{",'"statusCode":404,"message":"Not Found"',"}"),l.default.createElement("p",null,"Another common way of implementing the endpoint in NestJS would be to use the"," ",l.default.createElement(c.InlineSnippet,null,"NotFoundException"),". Note however that using such class would have an unintended consequence. Because the"," ",l.default.createElement(c.InlineSnippet,null,"NotFoundFilter")," we implemented earlier catches NotFoundException and proxies them to the express server, the 404 returned by the NestJS endpoint would be treated as a not implemented endpoint. This would make the request slower and increase the CPU usage for no good reason."),l.default.createElement(r.default,{id:"5a8c4ea64c5508149f1a9f8cd046b7cd"}),l.default.createElement(u.BlockSnippet,null,"curl http://localhost:3000/get-endpoint/invalid-id",l.default.createElement("br",null),l.default.createElement("br",null),"Not Found"),l.default.createElement(u.BlockSnippet,null,"nestjs-server-1 | [Nest] 22 - 11/05/2024, 11:00:57 PM LOG [NotFoundException] Proxying GET /get-endpoint/invalid-id..."),l.default.createElement("p",null,"Fantastic! We have completed the migration and the express server can now be safely decommissioned 🎉 I wish all web API migrations were this simple. Before you go here is a"," ",l.default.createElement(i.Anchor,{url:"https://github.com/capelski/web-api-proxy-migration"},"Git repository")," ","with the code above and one suggestion learned from experience; adding a custom response header on each server will help you identifying which server is servicing each request."))}},6691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webApiProxyMigration=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(9022);t.webApiProxyMigration={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2024-11-06",duration:8,id:l.ArticleId.webApiProxyMigration,languages:[r.Language.en],shareImage:"web-proxy.png"}}},351:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(4711),i=n(974),o=n(1121);t.english={title:"Web development bad decisions",description:"Bad decisions I made while developing my old website and how to prevent them",shareSentence:"Check out some bad decisions I made while developing my website and learn how you can avoid them in the future",introduction:l.default.createElement("p",null,"When building a web on my own I generally face two challenges: what to put in it and how to put it. Usually the urge of getting the job done pushes me to start developing after visualizing the global picture, and I don't spend enough time trying to solve those challenges properly. As a consequence of this haste, I sometimes feel my web sites are lacking something... but what exactly? Here are the bad decisions I made while developing my"," ",l.default.createElement(r.Anchor,{url:"".concat("https://capelski.github.io","/vue-personal-page")},"old website")," ","and how I approached them on"," ",l.default.createElement(r.Anchor,{url:"https://capelski.github.io"},"this new version")," of my web page."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("h3",null,"Web format"),l.default.createElement("p",null,"I created my web page because I wanted to have a stronger online presence. Given that web was about to become the official public online version of me, I built it as a descriptive website, a formal presentation on how I'd like to be introduced. It was more or less aesthetic, but it was designed for the general public; it provided information in a reasonably nice user interface."),l.default.createElement("p",null,"My audience are not recruiters or fans though. No one visits my website to check out my CV neither to see the list of places I've travelled to. When it comes to building software, the main point is always the same. Who are the users of the app? My audience are friends, family and co-workers: they visit my website out of curiosity. Is not the information they can find there but the user experience that they will remember."),l.default.createElement("p",null,"Having understood what my visitors expect to find in my website I designed this new version of the page to have less information and to be more enjoyable; although there are no page loads between sections navigation, I still animated the transitions."),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,filename:"page-animations-vue.gif",footer:"Old website transitions"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,filename:"page-animations-react.gif",footer:"New website transitions"})),l.default.createElement("h3",null,"Information indigestion"),l.default.createElement("p",null,"I am proud of the websites I've developed and I could spend hours talking about why I built them and how I did it. There is a purpose behind each of them and I lived the whole ideation and development history. The visitors of my web don't share this enthusiasm though. Not only they don't know about the projects' context; they are not even aware about their existence. Why would they waste their time reading about something they can't relate to?"),l.default.createElement("p",null,"In my old website I tackled this issue by adding a link to the actual websites, so visitors could access them. I later learned this is too much to ask for; visitors need a preview of what they will find there in order to click the links. I did keep the links in the new version of the page, but I also added an image of each website and I cut down the descriptions."),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,filename:"portfolio-vue.png",footer:"Old website portfolio"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,filename:"portfolio-react.png",footer:"New website portfolio"})),l.default.createElement("h3",null,"Perfectionism"),l.default.createElement("p",null,"Being a software developer makes me want to write about code on my blog and sometimes I like to provide code snippets to help illustrating concepts. The most popular solution when it comes to displaying code snippets on a website are"," ",l.default.createElement(r.Anchor,{url:"https://en.wikipedia.org/wiki/Pastebin"},"pastebin")," services (i.e. ",l.default.createElement(r.Anchor,{url:"https://medium.com/"},"medium")," uses Gist, the Github pastebin service)."),l.default.createElement("p",null,"Gist code snippets have a minor drawback however; they are meant to be inserted during page loads. Given my website doesn't reload the page when navigating across sections, the code snippets fail to calculate the appropriate height. It's not a critical issue because the snippets will have a scrollbar to move the content, but when I was building my old website I wanted the snippets to have the proper height."),l.default.createElement("p",null,"Instead of abiding the pastebin solution, I chose to integrate"," ",l.default.createElement(r.Anchor,{url:"https://microsoft.github.io/monaco-editor/"},"Monaco")," editor to my page, a text editor with a bunch of features specially designed for coding. Because it's written in JavaScript, it can be easily integrated in a web page, resulting in nicely colored code snippets. It's not only more customizable but it gives code snippets the proper height 🤩"),l.default.createElement("p",null,"While I think it's admirable not to settle with the standard solution and go for higher standards, I must admit that in this case I went too far. Monaco editor is a complex library; it's meant to write code, not to display code snippets. It can be used for that purpose but it heavily increases the website load time for very little gain. In the new version of the website I lowered my perfectionist demands, accepted the Gist limitations and achieved a similar solution to the problem while keeping the web light."),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,filename:"code-snippet-monaco.png",footer:"Old website code snippet"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,filename:"code-snippet-gist.png",footer:"New website code snippet"})),l.default.createElement("h3",null,"Worsening features"),l.default.createElement("p",null,"After having written a number of blog posts I thought it would be cool to have a calendar view of the blog entries, so I could check how often I was posting on my blog. I quickly found a compatible library, managed to display a calendar highlighting the dates in which I posted to the blog and rearranged the blog layout to include the calendar view. Because the calendar took too much space to always be visible, I created a collapsible section, moved the blog filters in it and proudly deployed my latest feature."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,className:"image-600",filename:"blog-filters-vue.png",footer:"Blog filters before the calendar view"}),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,filename:"blog-calendar-view-collapsed.png",footer:"Blog filters after the calendar view (collapsed)"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,filename:"blog-calendar-view.png",footer:"Blog filters after the calendar view (visible)"})),l.default.createElement("p",null,"What I unfortunately ended up doing though was making the blog page less intuitive, as I made the blog filters less accessible while adding little value with the calendar view itself 😔 Yes, I could have solved this issues by changing the way to access the calendar view while keeping the blog filters always visible. My point here is that sometimes it's better not to have a feature than to force the web to accommodate it. In my new web page I decided to omit the calendar view, both for better filters access and because I felt it wasn't worth spending time on integrating it given the minor improvement it adds to the web."),l.default.createElement("h3",null,"Opinionated categories"),l.default.createElement("p",null,"I enjoying writing my blog because I write about any topic I feel like writing in a given moment. As a result the blog is a mix of entries; from articles on the meaning of life to technical descriptions on how to turn your website into a progressive web app. Knowing those topics are too diverse to target a single audience I decided to segment the blog into different categories, so web visitors could filter the blog entries based on their interests."),l.default.createElement("p",null,"The segmentation system I came up with was simple: labels. Each of the blog entries has a category label and visitors of the blog can select the labels they want to read about. So far so good. What I missed in this approach was defining upfront standard labels that could be easily understood by the visitors of the site: not everyone will expect to find the same thing in a category named 'Dissemination'."),l.default.createElement("p",null,"In the new version of the page I solved this issue by reducing the number of categories to two. It's a less refined system but it's easier to understand. Hopefully, it will also force me to select more relevant topics in future blog entries 🤞"),l.default.createElement("div",{className:"screen-splitter"},l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,filename:"blog-filters-vue.png",footer:"Old website blog filters"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.webBadDecisions,filename:"blog-filters-react.png",footer:"New website blog filters"})),l.default.createElement("h3",null,"Conclusions"),l.default.createElement("p",null,"Did I really need to make a new version of the page to fix the issues I mentioned? Probably not. But don't forget that I'm a developer! We take every opportunity we can to rebuild a project from scratch using a whole different bunch of technologies (in this case I was tired of Vue.js and I wanted to play around with React transitions and add type safety to the equation)."),l.default.createElement("p",null,"It's your turn now! Can you identify any of the issues above in your web page? It can be hard to understand that this awesome website you are so proud of is being perceived in a different manner by your visitors. Best test? Watch your mother browsing the page without explaining her how it works. See you in the next post!"))}},7580:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webBadDecisions=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(351);t.webBadDecisions={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2020-07-29",duration:3,id:l.ArticleId.webBadDecisions,languages:[r.Language.en],shareImage:"blog-filters-vue.png"}}},1400:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(4711),o=n(974),s=n(1121),u=n(8892);t.english={title:"Web development on steroids: Vol. 1",description:"Some techniques to make web development more efficient and how to put them into practice",introduction:l.default.createElement("p",null,"Perhaps steroids is too much saying, but you can definitely get more out of web development. In this post I will explain some of the techniques we use at Sage to develop our web platforms, both front end and back end, which I've later on exported to my personal projects too. Keep reading to streamline your own development experience!"),body:l.default.createElement(l.default.Fragment,null,l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.webDevOnSteroidsI,alt:"Enthusiastic men shouting",filename:"lets-go.gif"}),l.default.createElement("p",null,"If you are reading this I will understand that you have made your homework and you already have a Git based version control solution, a dependency manager and a module bundler in place. Having the basics covered we can move into more challenging stuff. Be aware that I am using ",l.default.createElement("b",null,"Visual Studio Code"),", so the solutions I provide are based on that particular IDE. If you prefer other choices, you will have to investigate the available tools out there, but the concepts are still applicable. That being said, let's rock and roll 🤩"),l.default.createElement("h3",null,"Type safety"),l.default.createElement("p",null,"JavaScript was designed in 10 days. There are some things that make it a great language but it also has some flaws: e.g. not being able to detect certain common errors before runtime. Given that you already have to transpile your code, adding a build process to your development pipeline, why not investing a bit more effort and enjoy the safeness only a statically typed language can provide?"),l.default.createElement("p",null,"Regardless your project size and complexity, having meta data about your code will help it being more descriptive and will allow you to run some compilation checks, using awesome libraries such as"," ",l.default.createElement(i.Anchor,{url:"https://palantir.github.io/tslint/"},"Typescript"),". A very cool aspect of using Typescript with an appropriate IDE is that you get a list of all the attributes and methods available in an object when you type, a feature also known as Intellisense. Once you try it, you will never be able to develop without it again!"),l.default.createElement(s.ArticleImage,{articleId:o.ArticleId.webDevOnSteroidsI,alt:"Typescript autocomplete example",className:"image-600",filename:"intellisense.png"}),l.default.createElement("h5",null,"Steps"),l.default.createElement("ul",null,l.default.createElement("li",null,"Install typescript and a module loader as development dependencies",l.default.createElement(u.BlockSnippet,null,"npm install --save-dev typescript awesome-typescript-loader")),l.default.createElement("li",null,"Add a ",l.default.createElement("b",null,"tsconfig.json")," configuration file. If you are migrating an existing project to typescript, you will probably want to use the ",l.default.createElement("b",null,"allowJs")," option to make the transition gradually, as well as waiting until the transition is complete to enable ",l.default.createElement("b",null,"noImplicitAny"),", ",l.default.createElement("b",null,"strictNullChecks"),", etc.",l.default.createElement(r.default,{id:"40a0c73d4ae63b73596c381b293ed580"})),l.default.createElement("li",null,"Configure your module bundler to resolve typescript files. In my case I use webpack, so this is how the story goes ",l.default.createElement("b",null,"(webpack.config.js)"),":",l.default.createElement(r.default,{id:"dba8ea564d3baf06e325d4317a0d8163"})),l.default.createElement("li",null,"Rename at least your entry point file from ",l.default.createElement("b",null,"*.js to *.ts")," and surrender to typescript awesomeness")),l.default.createElement("h3",null,"Formatting"),l.default.createElement("p",null,"Don't lose a single minute more writing semicolons, replacing double quotes with single quotes or arguing with your colleagues about how to format ternary expressions and lines maximum length. Put a formatter that integrates with your IDE in place and it will save you priceless amounts of time while enforcing a standard code guideline."),l.default.createElement("p",null,l.default.createElement(i.Anchor,{url:"https://prettier.io/"},"Prettier")," is a popular opinionated code formatter that will take care of formatting for you. It allows you to configure a few parameters (e.g. maximum line length) but, as it is opinionated, cannot be very customized (which will save you stupid discussion with your teammates). You can either run it from the command line or use the VSCode extension to automatically format every file each time the file is saved."),l.default.createElement("h5",null,"Steps"),l.default.createElement("ul",null,l.default.createElement("li",null,"Install prettier as a development dependency",l.default.createElement(u.BlockSnippet,null,"npm install --save-dev prettier")),l.default.createElement("li",null,"Add a ",l.default.createElement("b",null,"prettier.rc")," json configuration file with your favorite settings or skip this step if you are fine with prettier default settings",l.default.createElement(r.default,{id:"ed3455ba86ac1124e4bf512154c70da8"})),l.default.createElement("li",null,"Add npm scripts to run prettier",l.default.createElement(r.default,{id:"ab7ebecc7f7d52499aa8132630c5d3c5"})),l.default.createElement("li",null,"Install the VSCode prettier extension ",l.default.createElement("b",null,"(esbenp.prettier-vscode)")," and add it to ",l.default.createElement("b",null,".vscode/extensions.json"),l.default.createElement(r.default,{id:"e2cf90b97c66464a5f93084855d59193"})),l.default.createElement("li",null,"Configure VSCode to enable the ",l.default.createElement("b",null,"Format On Save")," option by adding the following property to ",l.default.createElement("b",null,".vscode/settings.json"),". I also recommend you to set the prettier ",l.default.createElement("b",null,"Require Config")," property to true so prettier formatting will only be applied to projects that contain a prettier configuration file",l.default.createElement(r.default,{id:"03d288d753e5fc55e547edff9097c85f"}))),l.default.createElement("h3",null,"Linting"),l.default.createElement("p",null,"Static code analysis that will catch suspicious code (e.g. floating promises) and will enforce the best practices (e.g. functions maximum number of lines)."," ",l.default.createElement(i.Anchor,{url:"https://eslint.org/"},"eslint")," is a great linting tool, which can be highly customized and manages to automatically fix certain types of issues. With a bit of additional configuration it also supports Typescript language, which makes it an ideal candidate to replace the deprecated"," ",l.default.createElement(i.Anchor,{url:"https://palantir.github.io/tslint/"},"tslint"),"."),l.default.createElement("h5",null,"Steps"),l.default.createElement("ul",null,l.default.createElement("li",null,"Install eslint as a development dependency",l.default.createElement(u.BlockSnippet,null,"npm install --save-dev eslint")),l.default.createElement("li",null,"Create a .eslintrc.js configuration file. You can either copy an existing one (remember to install the required dependencies) or create a new one with the eslint command line utility",l.default.createElement(u.BlockSnippet,null,"npx eslint --init")),l.default.createElement("li",null,"Add npm scripts to run eslint",l.default.createElement(r.default,{id:"bfbfbae07b49b1d0dcc5d2090633c998"})),l.default.createElement("li",null,"If you are using or want to use prettier, you will need to configure eslint to respect prettier rules",l.default.createElement(u.BlockSnippet,null,"npm install --save-dev eslint-config-prettier eslint-plugin-prettier"),l.default.createElement(r.default,{id:"eaa383ca7b2ddcb07f9a404324535711"})),l.default.createElement("li",null,"Install the VSCode eslint extension ",l.default.createElement("b",null,"(dbaeumer.vscode-eslint)")," and add it to ",l.default.createElement("b",null,".vscode/extensions.json"),l.default.createElement(r.default,{id:"8e060f2d34c0963248882ff918177e21"})),l.default.createElement("li",null,"Configure VSCode to enable the ",l.default.createElement("b",null,"Format On Save")," option as well as the"," ",l.default.createElement("b",null,"Format: Enable")," eslint option by adding the following properties to"," ",l.default.createElement("b",null,".vscode/settings.json"),l.default.createElement(r.default,{id:"a907011d3708c3bd582ba3e89d79b450"})),l.default.createElement("li",null,"Optionally some more plugins can be installed on top of eslint. For example, I like to enforce the import statements to be alphabetically sorted. We can use"," ",l.default.createElement("b",null,"eslint-plugin-import")," for such purpose",l.default.createElement(u.BlockSnippet,null,"npm install --save-dev eslint-plugin-import"),l.default.createElement(r.default,{id:"5540afca4d6afce91e00c48b97e5724c"})),l.default.createElement("li",null,"Finally, you might need to ",l.default.createElement("b",null,"tweak .eslintrc.js")," file to meet your needs, specially if you are using Typescript and/or React")),l.default.createElement("h3",null,"Spell checking"),l.default.createElement("p",null,"So far, words are the most useful concept when it comes to communication between humans. If you want your code to be descriptive, you must avoid variable names such as",l.default.createElement("i",null,"el"),",",l.default.createElement("i",null,"doc"),",",l.default.createElement("i",null,"i")," and use words with actual meaning:",l.default.createElement("i",null,"element"),",",l.default.createElement("i",null,"document"),",",l.default.createElement("i",null,"index"),". And in case you are already paying extreme attention to variable names, even the most literate software engineer introduce typos when they code."),l.default.createElement("p",null,"To help us being consistent in the practice of typing meaningful names, we have the amazing ",l.default.createElement("b",null,"Code Spell Checker")," tool. It will point out invalid words and typos, and it also recognizes the camel case convention so it will understand",l.default.createElement("i",null,"aNameLikeThis"),". In addition, it allows defining a white list of words that will not be considered in ",l.default.createElement("b",null,".vscode/settings.json"),", for specific software/project words that cannot be found in an english dictionary."),l.default.createElement("h5",null,"Steps"),l.default.createElement("ul",null,l.default.createElement("li",null,"Install the VSCode Code Spell Check extension"," ",l.default.createElement("b",null,"(streetsidesoftware.code-spell-checker)")," and add it to"," ",l.default.createElement("b",null,".vscode/extensions.json"),l.default.createElement(r.default,{id:"c20cfb8668421c3aedc7722dc5fbdb4e"}))),l.default.createElement("h3",null,"Conclusions"),l.default.createElement("p",null,"That's it for now! The concepts are not rocket science, but they greatly help me feeling comfortable when working on a project. Bring them in and forget about styling code, writing typos, and searching in the docs for the available members in objects. Discover how to make your development experience even better in the second chapter of this series 🍾🚀 (coming soon to the best theatres). See you in the next post!"))}},8794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webDevOnSteroidsI=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(1400);t.webDevOnSteroidsI={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2020-02-20",duration:5,id:l.ArticleId.webDevOnSteroidsI,languages:[r.Language.en],shareImage:"intellisense.png"}}},2326:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(3338),o=n(9796),s=n(4711),u=n(974),c=n(1121),d=n(8892);t.english={title:"Web development on steroids: Vol. 2",description:"Some techniques to make web development more efficient and how to put them into practice",introduction:l.default.createElement("p",null,"Despite I do not work at Sage anymore, some of the tools I discovered there still are a very wise choice when it comes to web development. Since they did not fit in the"," ",l.default.createElement(i.NavLink,{to:o.articleRoute.path.replace(":articleId",u.ArticleId.webDevOnSteroidsI)},"first post")," ","of this series, I'll briefly describe them in this second one. Don't worry: I promise not to write a third part."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,"After having landed type safeness, code auto formatting, static analysis and spell checking to our project, we can forget about the more technical aspects of development. This second part is dedicated to ensuring code quality and repository integrity. Before you walk away, remember what somebody once said:"," ",l.default.createElement("i",null,'"Quality is free, but only to those who are willing to pay heavily for it"'),"."),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.webDevOnSteroidsII,alt:"Homer Simpson messing up",filename:"quality-work.gif"}),l.default.createElement("h3",null,"Natural language tests"),l.default.createElement("p",null,"The goal of natural language tests is both to have easily understandable tests and to provide a friendly description of the software (which might be used as documentation too). It requires some effort to setup and get used to it, but it helps making the software more scalable and easier to maintain."),l.default.createElement("p",null,"Before giving it a try, it sounds unnecessarily complicated:"," ",l.default.createElement("i",null,'"It will take much more to develop a new feature"'),","," ",l.default.createElement("i",null,'"It will increase the complexity of development"'),","," ",l.default.createElement("i",null,'"The benefits are not that clear"')," and"," ",l.default.createElement("i",null,'"I am already familiar with Mocha/Jest"'),". Yeap, all those sentences have a point. The transition to natural language testing doesn't happen overnight. However, let's recap for a second about the goal of having tests."),l.default.createElement("p",null,"All we want when it comes to unit tests is having"," ",l.default.createElement("b",null,"a set of scripts that run our code and ensure the software behaves in the way we expect"),". As long as we fulfill the objective, any way of implement those scripts will be valid. From here on choosing a test runner or another seems merely a matter of personal preference."),l.default.createElement("p",null,"And, in fact, if you are aware of the importance of the tests and you are already caring about them like they were your beloved child, there is nothing wrong in sticking to Mocha, Jest or whichever test runner you are currently using. Nevertheless, let's have a look at a simple ",l.default.createElement("i",null,"React + Jest + Enzyme")," example test:"),l.default.createElement(r.default,{id:"c9cf56fdfd650b12268eb227dec5c77a"}),l.default.createElement("p",null,"This kind of test structure is mixing the what (the behavior we want to test) with the how (the test implementation itself). Now, I must make clear than"," ",l.default.createElement("b",null,"the test implementation is essential"),". No magical framework will avoid us having to declare and initialize the component properties, rendering the component and writing an expression to verify the component behaves in the expected way."),l.default.createElement("p",null,"The advantage of using natural language is that tests will focus on describing the software behavior, leaving the implementation as a secondary aspect, that will only need to be accessed when having to fix a failing test or when extending the product functionalities. This is what a natural language version of the previous test could look like (e.g. ",l.default.createElement("i",null,"text-component.feature"),"):"),l.default.createElement(r.default,{id:"b9625c38c251ceecf54558e23201d6e1"}),l.default.createElement("p",null,"Under the hood, the implementation of the test would be very similar to the one depicted above. The only tricky part of it is that the test code needs to me mapped to the natural sentences."," ",l.default.createElement(s.Anchor,{url:"https://www.npmjs.com/package/cucumber"},"Cucumber.js")," is a popular gherkin library that helps us doing so. This is how the previous sentences can be defined through cucumber (e.g. ",l.default.createElement("i",null,"text-component.step.tsx"),"):"),l.default.createElement(r.default,{id:"c1360518bea4b69647713f91c174f648"}),l.default.createElement("p",null,"As you can see, the test logic remains the same, but wrapped inside natural language sentences that summarize their intention and which can later be used in any number of test cases. It requires some practice to learn how to split a test case into multiple sentences and how to make those sentences as reusable as possible but, once you get used to it, you will not want to test in any other way 💘"),l.default.createElement("h5",null,"Steps"),l.default.createElement("ul",null,l.default.createElement("li",null,"Install cucumber",l.default.createElement(d.BlockSnippet,null,"npm install --save-dev cucumber")),l.default.createElement("li",null,"Create a ",l.default.createElement("b",null,"cucumber.js")," file in the root of the project with the following content:",l.default.createElement(r.default,{id:"95f28bda24e74bc2687c2f4463946777"})),l.default.createElement("li",null,"If the project is meant to run in the browser, we will need to mock the document. We can do that with ",l.default.createElement("b",null,"jsdom")," and a similar initialization code that we will require from the test npm script (e.g."," ",l.default.createElement("i",null,"cucumber-environment.ts"),"):",l.default.createElement(d.BlockSnippet,null,"npm install --save-dev jsdom"),l.default.createElement(r.default,{id:"6bb293f5604147cd8647e052bc6bd98b"})),l.default.createElement("li",null,"Finally, add a test npm script to package.json that will run cucumber, requiring the jsdom initialization file, the ",l.default.createElement("b",null,"step definition")," files and the"," ",l.default.createElement("b",null,"feature")," files. You might want to modify the require globs according to your project structure:",l.default.createElement(r.default,{id:"0a27dc1755407a2845e4e6ac3cdb6b4e"})),l.default.createElement("li",null,"If using typescript, install the corresponding types and ts-node, and adapt the test npm script to require ts-node too:",l.default.createElement(d.BlockSnippet,null,"npm install --save-dev @types/cucumber @types/jsdom ts-node"),l.default.createElement(r.default,{id:"675c54f581ccd7ecafa7d5951c0963a6"}))),l.default.createElement("h3",null,"Code coverage"),l.default.createElement("p",null,"Next natural step after adding tests to your code is making sure that you test all the parts that need to be tested. I don't advice to cover 100% of the lines, but you definitely need to address the business critical logic that might turn in production critical bugs. There is a variety of test coverage tools that will instrument your code before running the tests and will keep track of the lines that are being addressed during the tests execution."),l.default.createElement("p",null,"Personally, I have only worked with"," ",l.default.createElement(s.Anchor,{url:"https://istanbul.js.org/"},"istanbul.js"),". It is easy to run (you only need to add a new npm script) and provides helpful Html reports, highlighting the lines that are going unnoticed in the code files. Feel free to explore alternatives, but this is the horse I am betting on."),l.default.createElement(c.ArticleImage,{articleId:u.ArticleId.webDevOnSteroidsII,alt:"istanbul.js coverage report",className:"image-600",filename:"coverage-report.png"}),l.default.createElement("h5",null,"Steps"),l.default.createElement("ul",null,l.default.createElement("li",null,"Install istanbul (for some reason, they named the npm package ",l.default.createElement("b",null,"nyc"),"):",l.default.createElement(d.BlockSnippet,null,"npm install --save-dev nyc")),l.default.createElement("li",null,"Create a ",l.default.createElement("b",null,".nycrc")," istanbul configuration file with the following contents (you might need to adapt the configuration to your needs):",l.default.createElement(r.default,{id:"c44ff3d0f336f59f77a7ea1f20e9cc11"})),l.default.createElement("li",null,"Add a ",l.default.createElement("b",null,"coverage")," npm script (that will run your already existing"," ",l.default.createElement("b",null,"test")," npm script):",l.default.createElement(r.default,{id:"8416bd5a1148446292e30b216c1f892f"})),l.default.createElement("li",null,"Add ",l.default.createElement("b",null,".nyc_output/")," and ",l.default.createElement("b",null,"coverage/")," folders to your ",l.default.createElement("b",null,".gitignore"))),l.default.createElement("h3",null,"Repository integrity"),l.default.createElement("p",null,"The last thing you want to happen after having defined a quality assurance pipeline (e.g. linting, formatting, testing, etc.) is to forget about it as the time goes by. No matter how careful developer you are, you will fail to remember that checklist some times (specially on busy deadlines), so, running those verifications automatically is quite of a good idea."),l.default.createElement("p",null,"Git provides a way to fire off custom scripts when certain actions occur (e.g. when a commit is about to be made, when a branch is about to be pushed, etc.). In fact, when you initialize a new repository with ",l.default.createElement("b",null,"git init"),", Git populates the hooks directory with a bunch of example scripts (see"," ",l.default.createElement(s.Anchor,{url:"https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks"},"Git documentation")," ","for more details)."),l.default.createElement("p",null,"If you don't want to go that deep when it comes to Git hooks, and certainly you don't need to, there is a tool called"," ",l.default.createElement(s.Anchor,{url:"https://github.com/typicode/husky"},"Husky")," (woof!) that will deal with that complexity for you. By associating a set of Git actions and commands in your package.json, Husky will run the corresponding commands each time a Git action occurs. This way you can make sure, for example, that you never push failing tests to your branch again."),l.default.createElement("h5",null,"Steps"),l.default.createElement("ul",null,l.default.createElement("li",null,"Install husky:",l.default.createElement(d.BlockSnippet,null,"npm install --save-dev husky")),l.default.createElement("li",null,"Create a ",l.default.createElement("b",null,"husky")," section in your package.json file specifying the commands to be executed for each Git action. For example:",l.default.createElement(r.default,{id:"88dcd508e8dedb7231ed5aa64bed0628"}))),l.default.createElement("h3",null,"Conventional commits"),l.default.createElement("p",null,'Last but not least! Acknowledgement is key when it comes to software quality, and part of the knowledge transfer is done over the Git history. You might already be taking your time to write descriptive commit messages and that\'s admirable (nothing is more useless than "minor fixes" like messages). You can however take a step further by enforcing a commit convention and take advantage of some additional benefits while keeping your Git history crystal clear.'),l.default.createElement("p",null,l.default.createElement(s.Anchor,{url:"https://www.conventionalcommits.org/en/v1.0.0/"},"Conventional commits")," ","is a lightweight convention to make the commit messages more descriptive and the Git history more explicit. In addition, it makes it easier to automate certain aspects of the software releases (e.g., generating a changelog file for free). The convention can be automatically verified in every commit with the help of tools like"," ",l.default.createElement(s.Anchor,{url:"https://commitlint.js.org/"},"commitlint")," and, once the standard is put into place, you can take advantage of tools that rely on it (e.g."," ",l.default.createElement(s.Anchor,{url:"https://www.npmjs.com/package/standard-version"},"standard version"),", a utility for versioning using semver and CHANGELOG generation). Here are some example commit messages:"),l.default.createElement(d.BlockSnippet,null,"feat(lang): add polish language",l.default.createElement("br",null),l.default.createElement("br",null),"feat: allow provided config object to extend other configs",l.default.createElement("br",null),l.default.createElement("br",null),"docs: correct spelling of CHANGELOG"),l.default.createElement("h5",null,"Steps"),l.default.createElement("ul",null,l.default.createElement("li",null,"Install commitlint and the conventional commits configuration package (or any other configuration package you prefer):",l.default.createElement(d.BlockSnippet,null,"npm install --save-dev @commitlint/cli @commitlint/config-conventional")),l.default.createElement("li",null,"Create a ",l.default.createElement("b",null,"commitlint.config.js")," configuration file, exporting the previously installed configuration:",l.default.createElement(r.default,{id:"a9efdaf883f970ce1b85c7ec5a7b30b9"})),l.default.createElement("li",null,"Finally, run commitlint for every commit. Even though there are other ways, you can do that through Husky hooks:",l.default.createElement(r.default,{id:"8b69db1674e1e0f2ebd3f7b05ffc02d5"}))),l.default.createElement("h3",null,"Conclusions"),l.default.createElement("p",null,"And that's the end of it! Four simple concepts that will help you making your tests more readable (and can even qualify them as public documentation), spotting non tested lines in your code, preventing from committing/pushing unfinished code and making your Git history more descriptive. Give them a try and don't wait to add any combination of them to your projects 💪 See you in the next post!"))}},8605:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webDevOnSteroidsII=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(2326);t.webDevOnSteroidsII={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2020-03-27",duration:6,id:l.ArticleId.webDevOnSteroidsII,languages:[r.Language.en],shareImage:"coverage-report.png"}}},1493:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=a(n(9943)),i=n(1121),o=n(974),s=n(4711),u=n(8892),c=n(5922);t.english={title:"A comprehensive WebRTC walkthrough",description:"How to establish a connection between two browsers using WebRTC",shareSentence:"Establishing a connection between two browsers via WebRTC",introduction:l.default.createElement("p",null,"WebRTC allows for real-time communication between two peers using only the browser's built-in functionalities, with no need for a communications server. That's AWESOME. But turns out that the browser API is complex, and I find the"," ",l.default.createElement(s.Anchor,{url:"https://webrtc.github.io/samples/"},"official samples")," repository a bit confusing. Here is an attempt to provide a clearer example."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,"The idea is to establish a connection between two browsers (or two tabs of the same browser) running the same Javascript code. The browsers, or ",l.default.createElement("b",null,"peers"),", can be either in the same device or in different devices and each of them will be able to act both as the ",l.default.createElement("b",null,"starter")," or the ",l.default.createElement("b",null,"receiver")," of a connection."),l.default.createElement("h3",null,"Connection overview"),l.default.createElement("p",null,"Before diving into the code it's worth understanding the steps involved in establishing a WebRTC connection. Let's have a look at the following simplified connection diagram (based on the"," ",l.default.createElement(s.Anchor,{url:"https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Connectivity"},"WebRTC Connectivity")," ","documentation), which reflects the basic operations the two peers need to execute:"),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"webrtc-connection-diagram.png",footer:"WebRTC connection diagram"}),l.default.createElement("ul",{className:"numbered"},l.default.createElement("li",null,l.default.createElement("b",null,"Initialize"),". Both peers create a new connection object."),l.default.createElement("li",null,l.default.createElement("b",null,"Media"),". Peer A adds media to the connection (i.e. data channels and/or stream tracks)."),l.default.createElement("li",null,l.default.createElement("b",null,"Offer creation"),". Peer A creates an offer (i.e. session description) and sets it as the local description. The latter will generate several ICE candidates."),l.default.createElement("li",null,l.default.createElement("b",null,"Offer exchange"),". Peer A sends the offer and its ICE candidates to peer B through the ",l.default.createElement("b",null,"signaling service"),"."),l.default.createElement("li",null,l.default.createElement("b",null,"Offer reception"),". Peer B sets the offer as the remote description and then adds the remote ICE candidates."),l.default.createElement("li",null,l.default.createElement("b",null,"Media"),". If needed, Peer B adds media to the connection (i.e. data channels and/or stream tracks)."),l.default.createElement("li",null,l.default.createElement("b",null,"Answer creation"),". Peer B creates an answer (i.e. session description) and sets it as the local description. Again, the latter will generate several ICE candidates."),l.default.createElement("li",null,l.default.createElement("b",null,"Answer exchange"),". Peer B sends the answer to peer A through the"," ",l.default.createElement("b",null,"signaling service"),". This time, it's not necessary to send the ICE candidates."),l.default.createElement("li",null,l.default.createElement("b",null,"Answer reception"),". Peer A sets the answer as the remote description. The connection has been established!")),l.default.createElement("p",null,'The steps 4 and 8 involve a so called "signaling service". In communication systems (e.g. post, telephone, email, instant messaging, etc.) when a peer wants to send a message or establish a connection they need to know the identifier of the recipient: a postal address, a phone number, an email address, etc.'),l.default.createElement("p",null,"In WebRTC however peers do not have identifiers. Instead each peer generates two pieces of information every time they want to establish a new connection, and both pieces are valid only once. From the"," ",l.default.createElement(s.Anchor,{url:"https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Connectivity"},"MDN documentation"),":"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("b",null,"Session description"),": includes information about the kind of media being sent, its format, the transfer protocol being used, the endpoint's IP address and port, and other information needed to describe a media transfer endpoint. It looks like this:",l.default.createElement(u.BlockSnippet,null,"{",'"type":"offer","sdp":"v=0\\r\\no=- 8446939022420648928 2 IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\na=group:BUNDLE 0\\r\\na=extmap-allow-mixed\\r\\na=msid-semantic: WMS\\r\\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\\r\\nc=IN IP4 0.0.0.0\\r\\na=ice-ufrag:RdRl\\r\\na=ice-pwd:EkNvZFozr3G6cCQcblkfYWI9\\r\\na=ice-options:trickle\\r\\na=fingerprint:sha-256 76:53:B4:D3:73:BD:B7:AE:61:7F:05:33:61:34:85:F7:3C:68:05:EC:93:BE:F8:0A:FD:BB:E3:4D:83:1A:B5:50\\r\\na=setup:actpass\\r\\na=mid:0\\r\\na=sctp-port:5000\\r\\na=max-message-size:262144\\r\\n"',"}")),l.default.createElement("li",null,l.default.createElement("b",null,"ICE Candidate"),": includes information about the network connection and details the available methods the peer is able to communicate through. It looks like this:",l.default.createElement(u.BlockSnippet,null,"{",'"candidate":"candidate:3426902834 1 udp 2113939711 60c8b1aa-d1e7-46f7-954d-9183cc7efe63.local 54523 typ host generation 0 ufrag RdRl network-cost 999","sdpMid":"0","sdpMLineIndex":0,"usernameFragment":"RdRl"',"}"))),l.default.createElement("p",null,"Because this information needs to be acquired by each peer PRIOR to establishing the connection, we need to exchange it via an already existing connection or channel. Such channel is called ",l.default.createElement("b",null,"signaling service"),' and it can be anything: from an actual server (most likely a websocket server) to, quoting the documentation, "email, postcard, or a carrier pigeon".'),l.default.createElement("p",null,"In this example we will use the computer's clipboard as our signaling service: in order to exchange the session data we will copy it from one browser and paste it in the other 📋"),l.default.createElement("h3",null,"Coding time"),l.default.createElement("p",null,"Based on the steps described above we need to implement the following functions:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"initialize"),". Creates a new RTCPeerConnection instance and defines a bunch of event handlers:",l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"onicecandidate")," (connection). Will be called for each local ICE candidate generated when setting the local description. We will need to capture those candidates in order to send them to the other peer."),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"ontrack")," (connection). Will be called for each stream track added by the other peer once the connection is established. We will want to consume those tracks, from an HTML video element for example."),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"ondatachannel")," (connection). Will be called for each data channel the other peer has created. We will need to keep track of those channels to receive/send messages through them."),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"onopen")," (channel). Will be called on a data channel once the connection is established. It tells us the channel is ready to start sending/receiving."),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"onmessage")," (channel). Will be called on a data channel every time a message is received. We will want to keep track of the messages and update the UI accordingly."),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"onclose")," (channel). Will be called on a data channel when the channel or the connection are closed. It tells us the channel is no longer available for sending/receiving.")),l.default.createElement("br",null),l.default.createElement(r.default,{id:"8bd1e47ed2d7505eb24bd515dfc93844"}),l.default.createElement("br",null),"The event handlers can be anything that works: plain functions, EventTarget, rxjs subscriptions, etc. Their implementation will depend on the application needs and the underlying framework. For a relatively simple React example, have a look at"," ",l.default.createElement(s.Anchor,{url:"https://github.com/capelski/webrtc-example-simple/blob/main/src/index.tsx#L43"},"this file"),"."),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"createDataChannel"),". Creates a new RTCDataChannel object on a RTCPeerConnection object and defines a few event handlers (which we have already introduced in the previous bullet point):",l.default.createElement(r.default,{id:"1096be3c8b1ffc3c1f86d8cdb674b800"})),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"addUserMediaTracks"),". Adds media stream tracks (generated separately) to a RTCPeerConnection object.",l.default.createElement(r.default,{id:"2d1a29e8680e05d413725c137b0ae634"})),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"createAndSetOffer"),". Creates an offer (i.e. session description) from a RTCPeerConnection object and sets the offer as the local description of the connection.",l.default.createElement(r.default,{id:"3f9820cb2aa34d04d2dd698a0220fe20"})),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"createAndSetAnswer"),". Creates an answer (i.e. session description) from a RTCPeerConnection object and sets the answer as the local description of the connection.",l.default.createElement(r.default,{id:"abc725581e507b53811298527def89bb"})),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"setRemoteDescription"),". Sets the remote description of a RTCPeerConnection object, either the offer or the answer, received via signaling service.",l.default.createElement(r.default,{id:"3cd4a5df9a2fabce7e0aaacca5681c0d"})),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"addIceCandidates"),". Adds the ICE candidates generated by the starting peer, received by the answering peer via signaling service.",l.default.createElement(r.default,{id:"375e2ad38118ece2ac69023a1c0c0777"}))),l.default.createElement("p",null,"Here is a web app putting together all the functions:"," ",l.default.createElement(s.Anchor,{url:"https://capelski.github.io/webrtc-example/"},"https://capelski.github.io/webrtc-example/"),". It is meant to reflect the connection negotiation, display the session description of each peer and help inputting the corresponding information of the other peer. It also has some logic to guarantee that the RTCPeerConnection methods are called in the right order."),l.default.createElement("p",null,l.default.createElement("i",null,"Note that, at the time of writing, the web app doesn't work on Firefox, since Firefox doesn't support"," ",l.default.createElement(s.Anchor,{url:"https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/connectionState#browser_compatibility"},"connectionstate")," ","nor"," ",l.default.createElement(s.Anchor,{url:"https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/connectionstatechange_event#browser_compatibility"},"onconnectionstatechange"),".")),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"initialization.png",footer:"Initialize the RTCPeerConnection objects"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"channels-creation.png",footer:"Create data channels and/or stream tracks in peer A"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"create-offer.png",footer:"Create an offer in peer A"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"set-local-description-offer.png",footer:"Set the offer as local description in peer A"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"set-remote-description-offer.png",footer:"Set the offer as remote description in peer B"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"set-remote-ice-candidates.png",footer:"Add remote ICE candidates in peer B"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"create-answer.png",footer:"Create an answer in peer B"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"set-local-description-answer.png",footer:"Set the answer as local description in peer B"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"set-remote-description-answer.png",footer:"Set the answer as remote description in peer A"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"connection-established.png",footer:"Connection negotiation finalized"}),l.default.createElement("h3",null,"Data channels"),l.default.createElement("p",null,"After the connection has been established, every data channel triggers an"," ",l.default.createElement(c.InlineSnippet,null,"onopen")," event, and both peers are able to send messages through them by calling the ",l.default.createElement(c.InlineSnippet,null,"send")," method on the corresponding RTCDataChannel object. The incoming messages need to be handled through the ",l.default.createElement(c.InlineSnippet,null,"onmessage")," handler (which we already defined earlier on)."),l.default.createElement(r.default,{id:"edbca5e285c6e597b1bc6023bec3bb8b"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"peer-a-send-message.png",footer:"Sending message from peer A"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"peer-b-receive-message.png",footer:"Message received by peer B"}),l.default.createElement("p",null,"When a channel is no longer necessary it can be closed by any of the two peers by calling its ",l.default.createElement(c.InlineSnippet,null,"close")," method. This will fire a"," ",l.default.createElement(c.InlineSnippet,null,"close")," event on the RTCDataChannel object of both peers."),l.default.createElement(r.default,{id:"076d1632140765f78612a49e8c2bb88a"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"close-data-channel-before.png",footer:"Closing data channel"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"close-data-channel-after.png",footer:"Data channel closed"}),l.default.createElement("h3",null,"Stream tracks"),l.default.createElement("p",null,"After the connection has been established, remote stream tracks become available for the local peer to consume. Note that the stream tracks management is completely independent from the WebRTC connection. The connection object is only concerned about making the remote stream tracks available: creation, consumption and destruction must be handled explicitly. A few considerations:"),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"addTrack")," adds an existing track to the connection and returns a RTCRtpSender object, which can be used to remove the track from the connection."),l.default.createElement("li",null,l.default.createElement(c.InlineSnippet,null,"removeTrack")," removes a track from the connection using the corresponding RTCRtpSender object."),l.default.createElement("li",null,"Both ",l.default.createElement(c.InlineSnippet,null,"addTrack")," and"," ",l.default.createElement(c.InlineSnippet,null,"removeTrack")," won't have any effect once the connection has been established: they need to be called BEFORE generating an offer/answer."),l.default.createElement("li",null,"Tracks trigger"," ",l.default.createElement(s.Anchor,{url:"https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack/ended_event"},l.default.createElement(c.InlineSnippet,null,"ended"))," ",'events when "playback or streaming has stopped because the end of the media was reached or because no further data is available". Stopping a track however will'," ",l.default.createElement(s.Anchor,{url:"https://stackoverflow.com/questions/55953038/why-is-the-ended-event-not-firing-for-this-mediastreamtrack"},"not generate an ended event")," ","on neither of the peers. In other words, peer A will not get notified when peer B stops consuming peer A's tracks, neither when peer B stops peer B's own tracks.")),l.default.createElement("h3",null,"Connection tear down"),l.default.createElement("p",null,"The connection can be terminated by calling the ",l.default.createElement(c.InlineSnippet,null,"close")," ",'method on the RTCPeerConnection object, which will close any existing data channels and close the connection itself. Note however that closing the connection will not send any "closed" event to the peer. We will need to either use the signaling service to let the peer know that we have terminated the connection or rely on'," ",l.default.createElement(c.InlineSnippet,null,"onConnectionStateChange")," (not supported in Firefox) to detect the change of the connection state."),l.default.createElement("p",null,l.default.createElement("i",null,"The same applies to media stream tracks and HTML video elements: they both need to be stopped explicitly.")),l.default.createElement(r.default,{id:"d9502e79b056d9600182699b7c32d5dc"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"close-connection-01.png",footer:"Closing connection"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"close-connection-02.png",footer:"Connection closed in local peer"}),l.default.createElement(i.ArticleImage,{articleId:o.ArticleId.webRTC,filename:"close-connection-03.png",footer:"Connection closed in remote peer"}),l.default.createElement("h3",null,"Troubleshooting"),l.default.createElement("p",null,"Finally, here are a few common error messages you might come across, their meaning and how to fix them."),l.default.createElement("br",null),l.default.createElement(u.BlockSnippet,null,"❌ DOMException: Failed to execute 'addIceCandidate' on 'RTCPeerConnection': The remote description was null"),l.default.createElement("p",null,"You are most likely adding remote ICE candidates to a connection object before the remote description has been set. The remote description must be set BEFORE adding ice candidates."),l.default.createElement("br",null),l.default.createElement(u.BlockSnippet,null,"❌ Failed to execute 'setLocalDescription' on 'RTCPeerConnection': Failed to set local offer sdp: Called in wrong state: have-remote-offer"),l.default.createElement("p",null,"You are most likely trying to set an offer as the local description on a connection object that has already set it's remote description. Once the remote description has been set, the connection object can only set an answer as the local description."),l.default.createElement("br",null),l.default.createElement(u.BlockSnippet,null,"❌ Failed to execute 'setLocalDescription' on 'RTCPeerConnection': Failed to set local answer sdp: Called in wrong state: stable"),l.default.createElement("p",null,"You are most likely trying to set the local description on a connection object that has already established a connection."),l.default.createElement("br",null),l.default.createElement(u.BlockSnippet,null,"❌ Failed to execute 'createAnswer' on 'RTCPeerConnection': PeerConnection cannot create an answer in a state other than have-remote-offer or have-local-pranswer."),l.default.createElement("p",null,"You are most likely trying to create an answer from a connection object that has not set it's remote description yet. A connection object can only generate an answer AFTER having set a remote description."),l.default.createElement("br",null),l.default.createElement(u.BlockSnippet,null,"❌ Failed to execute 'send' on 'RTCDataChannel': RTCDataChannel.readyState is not 'open'"),l.default.createElement("p",null,"You are most likely trying to send data through a channel that has not yet emitted its ",l.default.createElement(c.InlineSnippet,null,"onopen")," event."),l.default.createElement("br",null),l.default.createElement(u.BlockSnippet,null,"❌ Failed to execute 'createOffer' on 'RTCPeerConnection': The RTCPeerConnection's signalingState is 'closed'"),l.default.createElement("p",null,"You are most likely trying to create an answer from a connection object that has already established and closed a connection. Connection objects can only be used ONCE."),l.default.createElement("br",null),l.default.createElement("p",null,"❌ No ICE candidates are generated when setting the local description."),l.default.createElement("p",null,"You have most likely created an offer from a connection object before adding media to the connection. Peer A must always add media to the connection (i.e. data channels and/or stream tracks) BEFORE creating an offer and setting the local description."),l.default.createElement("h3",null,"Wrapping up"),l.default.createElement("p",null,"And that is all I can tell about WebRTC! You can have a look at this"," ",l.default.createElement(s.Anchor,{url:"https://github.com/capelski/webrtc-example-simple"},"sample repository")," ","to find out more about implementation details, but you have everything you need to start fiddling with WeRTC. May the luck be with you and happy coding ⌨️"))}},5466:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webRTC=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(1493);t.webRTC={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2023-07-12",duration:9,id:l.ArticleId.webRTC,languages:[r.Language.en],shareImage:"webrtc-connection-diagram.png"}}},7972:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.english=void 0;var l=a(n(7294)),r=n(4711),i=n(974),o=n(1121),s=n(8892);t.english={title:"Https, email ready WordPress site on Google Cloud Platform",description:"How to run an HTTPS, email ready wordpress site on Google Cloud Platform",shareSentence:"Get your HTTPS, email ready wordpress site running on GCP!",introduction:l.default.createElement("p",null,"Need somewhere to host your WordPress site? Google Cloud Platform makes it specially easy, providing pre-configured virtual machines. Your site will be up and running in under an hour, using your custom domain, accepting HTTPS traffic and being able to send emails from contact forms."),body:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,l.default.createElement("i",null,"Before reading the article be aware that there are many alternatives when it comes to hosting WordPress pages. Having WordPress in GCP is not the cheapest one by far: around 22€/month for a small instance based on my last invoice. If you don't need a dedicated virtual machine consider using other"," ",l.default.createElement(r.Anchor,{url:"https://wordpress.org/hosting/"},"hosting solutions"),". GCP is a good fit if you are already using it as your cloud infrastructure provider.")),l.default.createElement("h3",null,"Creating the WordPress site"),l.default.createElement("p",null,"WordPress is written in PHP and runs on"," ",l.default.createElement(r.Anchor,{url:"https://www.apache.org/"},"Apache"),". You can create a Compute Engine instance (i.e. a virtual machine) yourself and manually install those dependencies or let Google do it for you. I'm a fan of the latter so let's use the GCP Deployment Manager to create our WordPress virtual machine."),l.default.createElement("p",null,"In order to use the deployment manager you will need to enable it's API if you still haven't done so. You can then head to the Marketplace and deploy a solution from there. The one we are looking for is the ",l.default.createElement("b",null,"WordPress Multisite")," by"," ",l.default.createElement("b",null,"Google Click to Deploy"),":"),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Enabling Google Cloud deployment manager api",filename:"deployment-manager-api.png"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Google Cloud deployment manager",filename:"deployment-manager.png"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Wordpress marketplace solutions",filename:"wordpress-marketplace-solution.jpg"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Wordpress Multisite marketplace solution",filename:"wordpress-multisite.png"}),l.default.createElement("p",null,l.default.createElement("i",null,"If Compute Engine hasn't been initialized for the current project, launching the deployment will automatically initialize it. Wait a bit while it does so.")),l.default.createElement("p",null,"You will next need to give your deployment a name, provide the email of the WordPress site administrator and you are good to go! Make sure you enable the"," ",l.default.createElement("b",null,"Allow HTTPS traffic from the Internet")," option if you want your site to be accessible over HTTPS. You can also choose the geographical zone where the virtual machine will be created and pick the machine type (you can see the"," ",l.default.createElement("b",null,"estimated monthly rate")," depending on the selected type)."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Wordpress Multisite configuration",filename:"wordpress-multisite-config.png"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Wordpress Multisite firewall configuration",filename:"wordpress-multisite-firewall.png"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Wordpress Multisite deployment",filename:"wordpress-multisite-deployment.png"}),l.default.createElement("p",null,"When the deployment finishes the details on the right panel will be populated and you will find a new virtual machine in the Compute Engine page. You can access the WordPress site at the external IP address of the virtual machine. If you try to access it over HTTPS however, the page will fail to load and you will get a connection timed out error."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Wordpress multisite compute engine instance",filename:"wordpress-multisite-instance.png"}),l.default.createElement("h3",null,"Enabling HTTPS traffic"),l.default.createElement("p",null,"In order to enable the HTTPS traffic there are a few additional steps that must be covered. To begin with, SSL certificates can't be issued to IP addresses; we need to set up a domain name for the site. First we need to make the virtual machine external IP address static (otherwise the IP address might eventually change over time). Head to ",l.default.createElement("b",null,"VPC Network")," ",">"," ",l.default.createElement("b",null,"External IP addresses")," and select Static for the corresponding address:"),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Google Cloud VPC networks",filename:"vpc-network.png"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Google Cloud external IP addresses",filename:"static-ip-address.png"}),l.default.createElement("p",null,"Having an static IP address we can use it to point our domain name to. This needs to be done from the domain registrar where you purchased the domain name in. Each registrar has a different user interface. Search for the DNS management section and create an A record to point to the static IP address. After the changes are propagated you should be able to access your site through the domain name over HTTP:"),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,filename:"dns-a-record.png",footer:"DNS record creation example in DonDominio spanish registrar. Interface will be different for other registrars"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Deployed wordpress site",filename:"wordpress-site.png",footer:"I'm using carlescapellas.xyz domain temporarily for the tutorial. It won't be accessible later on"}),l.default.createElement("p",null,"Ok! Let's get the HTTPS running and move on to something else before we lose heart. We will do so by generating an SSL certificate with"," ",l.default.createElement(r.Anchor,{url:"https://certbot.eff.org/"},"certbot"),". There is a great guide on how to do it in"," ",l.default.createElement(r.Anchor,{url:"https://onepagezen.com/free-ssl-certificates-wordpress-google-cloud-click-to-deploy"},"OnePageZen"),". Here are the summarized steps (check the guide for more details):"),l.default.createElement("ul",null,l.default.createElement("li",null,"Connect to the virtual machine through SSH (from the Compute Engine page)"),l.default.createElement("li",null,"Download and install certbot-auto",l.default.createElement(s.BlockSnippet,null,"sudo apt-get install certbot python-certbot-apache -t stretch-backports")),l.default.createElement("li",null,"Generate an SSL certificate",l.default.createElement(s.BlockSnippet,null,"sudo certbot --apache")),l.default.createElement("li",null,"Restart Apache server",l.default.createElement(s.BlockSnippet,null,"sudo service apache2 restart")),l.default.createElement("li",null,"Update WordPress URLs. Log in to the WordPress site using the credentials you will find in the right panel of the deployment manager. Navigate to settings and set both ",l.default.createElement("b",null,"WordPress Address (URL)")," and ",l.default.createElement("b",null,"Site Address (URL)")," to the HTTPS version of your domain:",l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Wordpress multisite deployment credentials",filename:"wordpress-deployment-credentials.png"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Wordpress site urls settings",filename:"wordpress-site-urls.png"}))),l.default.createElement("p",null,"Save the changes and celebrate while you access your site over HTTPS 🍾 You are almost done with the site configuration. There is one last aspect we need to consider before you start playing with the wordpress site customization: emails sending."),l.default.createElement("h3",null,"Sending emails from WordPress"),l.default.createElement("p",null,"WordPress has a variety of plugins to easily create contact forms and send the inquiries by email (e.g. ",l.default.createElement(r.Anchor,{url:"https://wpforms.com/"},"wpforms"),"). However, most of those plugins rely on sending emails through TCP port 25 which, on GCP virtual machines, is always blocked due to the risk of abuse."),l.default.createElement("p",null,"The easiest way for the emails to make it through the GCP firewall is to use a third-party email service provider. There are three different providers available. I went with ",l.default.createElement(r.Anchor,{url:"https://www.mailgun.com/"},"Mailgun")," (the free tier offers up to 10,000 emails per month) but you can use"," ",l.default.createElement(r.Anchor,{url:"https://sendgrid.com/"},"SendGrid")," or",l.default.createElement(r.Anchor,{url:"https://www.mailjet.com/"},"Mailjet")," if you like them better."),l.default.createElement("p",null,"Before start configuring any of those services, we need to create a new rule in the firewall to allow outbound traffic. Any port other than 25 would do the trick, but we will use 2525 because Mailgun listens on that port. This is done from the"," ",l.default.createElement("b",null,"VPC Network")," ",">"," ",l.default.createElement("b",null,"Firewall")," page and it's described in"," ",l.default.createElement(r.Anchor,{url:"https://cloud.google.com/compute/docs/tutorials/sending-mail#email_custom_port"},"this section")," ","of the GCP documentation:"),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Google Cloud firewall rule creation",filename:"firewall-rule-creation.png"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Google Cloud firewall rule configuration",filename:"firewall-rule-config.png"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Google Cloud firewall rules",filename:"firewall-email-rule.png"}),l.default.createElement("p",null,"Next we need to configure the email provider. First head to Mailgun (or the provider of your choice), create and account and add a domain in the ",l.default.createElement("b",null,"Sending")," ",">"," ",l.default.createElement("b",null,"Domains")," section. As recommended by Mailgun, you should use a subdomain (",l.default.createElement("i",null,"e.g. mg.your-domain.com"),") as the domain name."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Mailgun domains dashboard",filename:"mailgun-domains.png"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Mailgun domain creation",filename:"mailgun-domain-config.png"}),l.default.createElement("p",null,"Again, you will then need to create some DNS records in your domain registrar. Mailgun provides descriptive information on how to do it right after adding the domain (you will later find this page in ",l.default.createElement("b",null,"Domain settings")," ",">"," ",l.default.createElement("b",null,"DNS Records"),"). The only mandatory records are the first two TXT. Don't create the MX records if you have already configured email for your domain with a different provider. Optionally create the CNAME record if you want to enable tracking functionalities."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,alt:"Mailgun domain verification steps",filename:"mailgun-domain-verification.png"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,filename:"dns-txt-record.png",footer:"TXT DNS record creation example in DonDominio spanish registrar"}),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,filename:"mailgun-verification-email.png",footer:"Mailgun successful domain verification email"}),l.default.createElement("p",null,"Once the domain has been added and verified we will need to get the SMTP credentials for later use when configuring the service (not the Mailgun user credentials). You can find them in ",l.default.createElement("b",null,"Domain settings")," ",">"," ",l.default.createElement("b",null,"SMTP credentials"),". The login is likely to be ",l.default.createElement("i",null,"postmaster@mg.your-domain.com")," and the password can be retrieved by resetting it (it will only be displayed once, so store it in a safe location)."),l.default.createElement(o.ArticleImage,{articleId:i.ArticleId.wordpressOnGoogleCloud,filename:"mailgun-smtp-credentials.png",footer:"Mailgun SMTP credentials section"}),l.default.createElement("p",null,"Having your credentials ready there is only one thing left to do: configuring the service in the virtual machine 💪 The steps are explained in great detail in the"," ",l.default.createElement(r.Anchor,{url:"https://cloud.google.com/compute/docs/tutorials/sending-mail/using-mailgun"},"GCP official documentation"),". It's just a matter of executing the provided commands through an SSH terminal, so I won't duplicate the steps here. In the \"Generate the SASL password map\" step you will need to use the SMTP credentials collected above."),l.default.createElement("p",null,l.default.createElement("b",null,"Important!")," If you select EU as the Domain zone when adding the domain name in Mailgun, replace ",l.default.createElement("i",null,"smtp.mailgun.org")," with ",l.default.createElement("i",null,"smtp.eu.mailgun.org")," (steps 7 and 10.b). Not doing so will lead to ",l.default.createElement("i",null,"535 Authentication failed")," errors when trying to send emails (step 15) and countless hours of frustration while searching for a solution to the problem in StackOverflow."),l.default.createElement("p",null,"And that's pretty much it 🎉 You can now sit back and relax. You have accomplished enough for today: creating a WordPress site, accepting HTTPS traffic and enabling emails sending. From here on is up to the marketing guys to choose a nice template, fill the pages with content and tell all of their friends they are now developing websites."))}},7020:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wordpressOnGoogleCloud=void 0;var a=n(7171),l=n(974),r=n(7487),i=n(7972);t.wordpressOnGoogleCloud={content:function(){return i.english},metadata:{category:a.ArticleCategory.tech,date:"2020-12-07",duration:7,id:l.ArticleId.wordpressOnGoogleCloud,languages:[r.Language.en],shareImage:"wordpress-site.png"}}},4442:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Project=void 0;var l=a(n(7294));t.Project=function(e){return l.default.createElement("div",{className:"project"},l.default.createElement("div",{className:"project-info"},l.default.createElement("h3",{className:"project-title"},e.title),l.default.createElement("div",{className:"project-details"},e.date?l.default.createElement("span",{className:"project-date"},"📅 ",e.date):null,e.repository?l.default.createElement("a",{target:"_blank",className:"project-source",href:"https://github.com/capelski/".concat(e.repository)},"⌨️ code"):null)),l.default.createElement("div",{className:"project-content ".concat(e.imageOrientation||"landscape")},l.default.createElement("div",{className:"project-image-wrapper"},l.default.createElement("img",{src:"/images/portfolio/".concat(e.image),alt:"".concat(e.title," project")}),e.url?l.default.createElement("a",{target:"_blank",href:"".concat(e.url),className:"project-demo"},"▶️"):null),l.default.createElement("div",{className:"project-description"},e.children?e.children:null)))}},9796:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportedRoutes=t.routes=t.portfolioRoute=t.errorRoute=t.blogRoute=t.articleRoute=void 0;var a=n(8437),l=n(3506),r=n(1970),i=n(9957);t.articleRoute={path:"/blog/:articleId",name:"article",component:a.ArticleLoader,pattern:/^\/blog\/[^\/]+\/?$/},t.blogRoute={path:"/blog",name:"blog",component:l.Blog,pattern:/^\/blog\/?$/},t.errorRoute={path:"/error",name:"error",component:r.Error,pattern:/^\/error$/},t.portfolioRoute={path:"/portfolio",name:"portfolio",component:i.Portfolio,pattern:/^\/portfolio\/?$/},t.routes=[t.articleRoute,t.blogRoute,t.errorRoute,t.portfolioRoute],t.supportedRoutes=t.routes.map((function(e){return e.pattern}))},6879:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SectionContainer=void 0;var l=a(n(7294));t.SectionContainer=function(e){return l.default.createElement("div",{className:e.sectionName},l.default.createElement("div",{className:"section-viewport",ref:e.viewportRef},l.default.createElement("div",{className:"section-content"},e.children?e.children:null)),l.default.createElement("div",{className:"section-links"},e.links))}},8437:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},a.apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var l=Object.getOwnPropertyDescriptor(t,n);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,l)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ArticleLoader=void 0;var o=i(n(7294)),s=n(4593),u=n(3338),c=n(322),d=n(8062),p=n(3765),f=n(7487),m=n(9796),h=n(6879),g=n(8111),y=n(1970);t.ArticleLoader=function(e){var t,n=null===(t=e.match)||void 0===t?void 0:t.params.articleId,l=(0,o.useState)(n),r=l[0],i=l[1],b=(0,o.useState)(f.Language.en),v=b[0],w=b[1],E=(0,o.useRef)(null),k=p.articles.filter((function(t){return t.metadata.category===e.selectedCategory}));(0,o.useEffect)((function(){n&&i(n)}),[n]);var I=function(){var e;w(f.Language.en),null===(e=E.current)||void 0===e||e.scrollTo({top:0})},A=k.find((function(e){return e.metadata.id===r})),x=null==A?void 0:A.content(v);return A?o.default.createElement(h.SectionContainer,{links:o.default.createElement(o.default.Fragment,null,o.default.createElement(u.NavLink,{to:m.blogRoute.path,className:"link"},"⬇️ Blog")),sectionName:"article-container",viewportRef:E},o.default.createElement(s.Helmet,null,o.default.createElement("title",null,x.title," | Carles Capellas"),o.default.createElement("meta",{name:"description",content:x.description}),o.default.createElement("meta",{property:"og:site_name",content:"Carles Capellas"}),o.default.createElement("meta",{property:"og:type",content:"article"}),o.default.createElement("meta",{property:"og:title",content:x.title}),o.default.createElement("meta",{property:"og:description",content:x.description}),o.default.createElement("meta",{property:"og:url",content:"".concat("https://capelski.github.io").concat(m.articleRoute.path.replace(":articleId",A.metadata.id))}),A.metadata.shareImage?o.default.createElement("meta",{property:"og:image",content:"".concat("https://capelski.github.io","/images/blog/").concat(A.metadata.id,"/").concat(A.metadata.shareImage)}):void 0),k.map((function(e){var t=k.findIndex((function(t){return t.metadata.id===e.metadata.id})),n=t>0?k[t-1]:void 0,l=t<k.length-1?k[t+1]:void 0;return o.default.createElement(c.CSSTransition,{classNames:"article",in:e.metadata.id===r,key:e.metadata.id,onExited:I,timeout:g.transitionsDuration,unmountOnExit:!0},o.default.createElement(d.Article,a({},e,{nextArticle:n,onArticleNavigation:i,preview:!1,previousArticle:l,selectedLanguage:v,setSelectedLanguage:w})))}))):o.default.createElement(y.Error,null)}},3506:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},a.apply(this,arguments)},l=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var l=Object.getOwnPropertyDescriptor(t,n);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,l)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&l(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Blog=void 0;var o=i(n(7294)),s=n(4593),u=n(3338),c=n(322),d=n(8062),p=n(3765),f=n(7171),m=n(7487),h=n(9796),g=n(6879),y=n(8111);t.Blog=function(e){var t=(0,o.useState)(e.selectedCategory),n=t[0],l=t[1];return o.default.createElement(g.SectionContainer,{links:o.default.createElement(u.NavLink,{to:h.portfolioRoute.path,className:"link"},"Portfolio ➡️"),sectionName:"blog"},o.default.createElement(s.Helmet,null,o.default.createElement("title",null,"Blog | Carles Capellas"),o.default.createElement("meta",{name:"description",content:"Blog with software development entries and other random thoughts that cross my mind"})),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"blog-header"},o.default.createElement("h1",{className:"blog-title"},"Blog"),o.default.createElement("div",{className:"blog-categories"},f.AllArticleCategories.map((function(e){return o.default.createElement("span",{key:e,className:"category".concat(n===e?" selected-category":""),onClick:function(){return l(e)}},e)})))),f.AllArticleCategories.map((function(t){return o.default.createElement(c.CSSTransition,{classNames:"articles",in:t===n,key:t,onExited:function(){return e.setSelectedCategory(n)},timeout:y.transitionsDuration,unmountOnExit:!0},o.default.createElement("div",{className:"articles"},p.articles.filter((function(t){return t.metadata.category===e.selectedCategory})).map((function(e){return o.default.createElement(d.Article,a({key:e.metadata.id+t},e,{preview:!0,selectedLanguage:m.Language.en}))}))))}))))}},1970:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Error=void 0;var l=a(n(7294)),r=n(4593),i=n(3338),o=n(9796),s=n(6879);t.Error=function(){return l.default.createElement(s.SectionContainer,{links:l.default.createElement(l.default.Fragment,null,l.default.createElement(i.NavLink,{to:o.blogRoute.path,className:"link"},"⬅️ Blog"),l.default.createElement(i.NavLink,{to:o.portfolioRoute.path,className:"link"},"Portfolio ➡️")),sectionName:"error"},l.default.createElement(r.Helmet,null,l.default.createElement("title",null,"Carles Capellas"),l.default.createElement("meta",{name:"description",content:"Something went wrong... You are not supposed to be here"})),l.default.createElement("h1",{className:"error-title"},"Something went wrong"),l.default.createElement("img",{className:"error-image",src:"/images/shrug.png",alt:"Shrug meme"}))}},9957:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Portfolio=void 0;var l=a(n(7294)),r=n(4593),i=n(3338),o=n(4711),s=n(4442),u=n(9796),c=n(6879);t.Portfolio=function(){return l.default.createElement(c.SectionContainer,{links:l.default.createElement(i.NavLink,{to:u.blogRoute.path,className:"link"},"⬅️ Blog"),sectionName:"portfolio"},l.default.createElement(r.Helmet,null,l.default.createElement("title",null,"Portfolio | Carles Capellas"),l.default.createElement("meta",{name:"description",content:"The personal web projects I have developed on my free time"})),l.default.createElement("h1",{className:"portfolio-title"},"Portfolio"),l.default.createElement("div",{className:"projects"},l.default.createElement(s.Project,{date:"2021",image:"daggout.png",imageOrientation:"portrait",title:"DAGGOUT",url:"https://play.google.com/store/apps/details?id=daggout.user"},l.default.createElement("p",null,"Android/iOS app designed to store and manage clothing receipts, allowing the user to filter them by store and set return deadline notifications. The projected included a"," ",l.default.createElement(o.Anchor,{url:"https://capelski.github.io/daggout/"},"landing page"),", a"," ",l.default.createElement(o.Anchor,{url:"https://capelski.github.io/daggout-admin/"},"back office")," and an"," ",l.default.createElement(o.Anchor,{url:"https://capelski.github.io/daggout-analytics/"},"analytics platform")," ","as well."),l.default.createElement("p",null,"DAGGOUT SL was a startup I co-founded along with ",l.default.createElement("b",null,"Oscar Ortega")," during our residence in Demium startup incubator, aiming to digitize paper receipts for the fashion industry. Expo/React Native for the mobile app and Google Cloud Platform for the backend.")),l.default.createElement(s.Project,{date:"2012",image:"desdecasa.png",repository:"desdecasa",title:"desdecasa"},l.default.createElement("p",null,"First attempt to build an online business! Along with ",l.default.createElement("b",null,"Eudald Bover")," we developed this restaurant discounts (up to 50%!) web app and managed to sell 150 membership cards to the website users."),l.default.createElement("p",null,"We didn't get any summer job back in 2011 so we started to shape this platform that we would launch the following year, after having signed up enough restaurants. Originally built in PHP, I migrated it to Node.js after we closed the website.")),l.default.createElement(s.Project,{date:"2020",image:"jokify.png",repository:"jokify",title:"jokify",url:"".concat("https://capelski.github.io","/jokify/")},l.default.createElement("p",null,"Instead of deleting all those twitter jokes I get over the phone, I decided I had to make them available to the world. Here you will find them (in Spanish)."),l.default.createElement("p",null,"This web application was also as an excuse to practice with CSS3 animation capabilities. In the first version, 2017, to animate the emojis explosion. After meeting ",l.default.createElement("b",null,"Iker Fernandez")," in 2020, the rest of the redesigned UX.")),l.default.createElement(s.Project,{date:"2018",image:"webjack.png",repository:"webjack",title:"webjack",url:"".concat("https://capelski.github.io","/webjack/")},l.default.createElement("p",null,"Cashless online multiplayer Blackjack game. Play online with strangers, practice offline against the dealer or learn the Blackjack basic strategy."),l.default.createElement("p",null,"After having developed a terrible Visual Basic desktop application in 2011 and failed to finish a Java command line utility in 2014, I decided to redeem myself by building it in web flavour.")),l.default.createElement(s.Project,{date:"2020",image:"bromuro.png",imageOrientation:"portrait",repository:"bromuro",title:"Bromuro",url:"https://play.google.com/store/apps/details?id=capelski.bromuro"},l.default.createElement("p",null,"Collection of twitter jokes (in Spanish) delivered through an Android app. Filter them by text, share them with your friends and have them always available in your phone."),l.default.createElement("p",null,"I wanted to learn about Expo/React Native during my sabbatical year so I migrated the ",l.default.createElement("b",null,"Jokify")," React web app to this mobile app version. Simplified interface and brand new name (Jokify was already taken in Play Store).")),l.default.createElement(s.Project,{date:"2021",image:"blackjump.png",imageOrientation:"portrait",repository:"blackjump",title:"Blackjump",url:"https://play.google.com/store/apps/details?id=capelski.blackjump"},l.default.createElement("p",null,"Android app designed to learn the basic strategy for Blackjack card game. Set the rules of your favorite casino and get ready to beat the dealer."),l.default.createElement("p",null,"My Blackjack basic strategy still wasn't good enough after having developed"," ",l.default.createElement("b",null,"webjack")," so I decided to build another Blackjack app focusing solely on that part. This time using Expo/React Native instead of vue.js and adding a range of new features around basic strategy.")),l.default.createElement(s.Project,{date:"2019",image:"vue-ssr.png",repository:"vue-ssr-tutorial",title:"vue.js Meetup talk",url:"https://www.youtube.com/watch?v=uWsAFV14Svw"},l.default.createElement("p",null,"Meetup talk hosted by VueJS Barcelona. The talk features a simple yet realistic vue.js app (using webpack and consuming data from a Web Api) and walks through the process of getting it to render on the server side."),l.default.createElement("p",null,"After attending many coding Meetup talks I felt I had to contribute back by organizing my own. A friend of mine brought his 360º camera and recorded part of the session (the camera's battery run out) which is now available on YouTube.")),l.default.createElement(s.Project,{date:"2022",image:"marathon-planner.png",repository:"marathon-planner",title:"marathon planner",url:"".concat("https://capelski.github.io","/marathon-planner/")},l.default.createElement("p",null,"Marathon training website based on the Hansons Marathon Method book by Luke Humphrey. Set your dates, get the training paces based on your expected race pace and keep track of your completed trainings 💪"),l.default.createElement("p",null,"Having the book around all the time when I was preparing for the 2022 Barcelona marathon was inconvenient. Solution: This responsive website to track the training progress from the phone.")),l.default.createElement(s.Project,{date:"2020",image:"sudoku-generator.png",repository:"sudoku-generator",title:"sudoku generator",url:"".concat("https://capelski.github.io","/sudoku-generator/")},l.default.createElement("p",null,"Web application that generates random sudoku puzzles and offers hints on how to solve them. It can also be used to solve existing puzzles (e.g. one from a newspaper), but it is not bulletproof; it might fail to find the solution."),l.default.createElement("p",null,"I decided to figure out by myself how to generate sudoku puzzles after having been talking about it with my mom. The resulting application persists the puzzle, so you can refresh page or close the browse without losing the progress.")),l.default.createElement(s.Project,{date:"2019",image:"skills-matrix-graphql.png",repository:"skills-matrix-api-graphql",title:"skills matrix"},l.default.createElement("p",null,"I was developing a front end application at work and we interacted with a"," ",l.default.createElement("b",null,"GraphQL Api"),". I loved the standard, but I felt I wasn't learning enough about the server side so I decided to built my own Api and get a better understanding on how it works."),l.default.createElement("p",null,"The result is a simple Api with the typical features used in any modern Api (filtering, pagination, referenced entities, ordering, etc.), accessible through a GraphiQL interface.")),l.default.createElement(s.Project,{date:"2017",image:"fractal-generator.png",repository:"fractal-generator",title:"fractal generator",url:"".concat("https://capelski.github.io","/fractal-generator/")},l.default.createElement("p",null,"Web app that generates fractal pictures by replicating the pattern in a grid. You can try to configure it or just pick a color and hit the reset button until you get something you like!"),l.default.createElement("p",null,"When I was in college I was asked to write a C++ algorithm to generate fractal patterns. I spent far too many hours coding on it to settle with the miserable command line output; some years later I turned the same algorithm into a visually pleasant web app.")),l.default.createElement(s.Project,{date:"2018",image:"michael-page.png",repository:"michael",title:"michael.page",url:"".concat("https://capelski.github.io","/michael/")},l.default.createElement("p",null,"Tribute page to all the Michaels of the world. Who doesn't have a Michael in their life? Joking aside this web was the cover website of a plan to earn a little fortune by reselling a premium domain to ",l.default.createElement("b",null,"Michael Page")," company."),l.default.createElement("p",null,"I was working with a bunch of other tech freaks when the ",l.default.createElement("b",null,".page")," top level domains were introduced. We came up with the idea to buy"," ",l.default.createElement("b",null,"https://michael.page")," and resell it to the british recruitment business. We invested 700€. We got 0€ ROI.")),l.default.createElement(s.Project,{date:"2016",image:"carniques-ausa.png",repository:"carniques-ausa",title:"càrniques ausà",url:"".concat("https://capelski.github.io","/carniques-ausa/")},l.default.createElement("p",null,'"It must have an interactive pig!". That was the sentence that convinced me to build the ',l.default.createElement("b",null,"Càrniques Ausà")," pork company website."),l.default.createElement("p",null,"Pretty straightforward application providing company information. Built in angular.js, it only presented two challenges: supporting translations without page reloads and filtering the product catalog by the selected part of the SVG pig image.")),l.default.createElement(s.Project,{date:"2014",image:"poliester-pelegrina.png",repository:"poliester-pelegrina",title:"poliester pelegrina"},l.default.createElement("p",null,"This was the ",l.default.createElement("b",null,"Poliester Pelegrina")," polyester company official website. My brother was dating the owner's daughter back in the day so I was the most accessible developer. In the right place at the right time!"),l.default.createElement("p",null,"I hadn't heard about ",l.default.createElement("b",null,"single page applications")," when I developed this web app, but it turned out that managing the views with simple jQuery animations was the most effective approach. Originally built in PHP and migrated to Node.js later on.")),l.default.createElement(s.Project,{date:"2013",image:"dovic.png",repository:"do-vic",title:"d.o. vic"},l.default.createElement("p",null,"This was the ",l.default.createElement("b",null,"D.O. Vic")," restaurant official website for two years, until they went out of business in 2015. It provided the restaurant menus, contact information, pictures of the establishment and allowed making reservations."),l.default.createElement("p",null,"We met the owner of this restaurant while building the ",l.default.createElement("b",null,"Desdecasa")," ","restaurant platform. Later on he had issues with his previous website so he contacted us and ordered a new one. Money bears interests!"))),l.default.createElement("h3",{className:"personal-page-evolution"},"Personal page evolution"),l.default.createElement("div",{className:"projects"},l.default.createElement(s.Project,{date:"2019",image:"vue-personal-page.png",repository:"vue-personal-page",title:"vue.js",url:"".concat("https://capelski.github.io","/vue-personal-page/")}),l.default.createElement(s.Project,{date:"2015",image:"angularjs-personal-page.png",repository:"angularjs-personal-page",title:"angular.js",url:"".concat("https://capelski.github.io","/angularjs-personal-page/")}),l.default.createElement(s.Project,{date:"2015",image:"php-personal-page.png",repository:"php-personal-page",title:"php"})))}},8111:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transitionsDuration=void 0,t.transitionsDuration=1200},7927:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(7294)),r=a(n(3935)),i=n(3338),o=n(9222);n(5638);var s=document.getElementById("app-placeholder");r.default.render(l.default.createElement((function(){return l.default.createElement(i.BrowserRouter,null,l.default.createElement(o.App,{isServerRendered:!1}))}),null),s)},7462:(e,t,n)=>{"use strict";function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a.apply(this,arguments)}n.d(t,{Z:()=>a})},4578:(e,t,n)=>{"use strict";function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,{Z:()=>a})},3366:(e,t,n)=>{"use strict";function a(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}n.d(t,{Z:()=>a})}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(7927)})();