@import './variables.scss';

@mixin articleEnterAnimation($animationTime) {
    .article-info {
        opacity: 0;
        animation: slide-in-right $animationTime forwards;
    }

    .article-body {
        opacity: 0;
        animation: slide-in-right $animationTime forwards;
        animation-delay: $animationTime;
    }
}

@mixin articleExitAnimation($animationTime) {
    .article-info {
        animation: slide-out-right $animationTime forwards;
        animation-delay: $animationTime * 2;
    }

    .article-body {
        animation: slide-out-right $animationTime forwards;
        animation-delay: $animationTime;
    }
}

// This selector is defined outside .article-container so it applies also in the blog list
.article {
    &.preview-mode {
        cursor: pointer;
    }

    .article-info {
        @media (min-width: $medium) {
            display: flex;
            align-items: baseline;
        }

        .article-title {
            @media (min-width: $medium) {
                margin-bottom: 8px;
            }
        }

        .article-details {
            margin: 8px 0;

            @media (min-width: $medium) {
                margin-left: 16px;
            }

            span {
                padding-right: 8px;
                white-space: nowrap;
                display: inline-block;
                margin-top: 8px;
            }
        }
    }

    .article-body {
        a {
            color: black;
        }

        ul li {
            line-height: 1.75;
            margin-top: 16px;
        }

        .article-quote {
            max-width: 80%;
            margin: 32px auto;
            line-height: 1.75;
        }

        .article-image {
            margin: 32px auto;
            display: block;
            max-width: 100%;

            &.mobile-screenshot {
                max-width: 300px;
            }
        }
    }

    .programmatic-link {
        display: none;
    }

    .posts-timeline {
        margin-bottom: 0;
        margin-top: 32px;
    }

    .article-links {
        display: grid;
        grid-template-columns: 50% 50%;

        .previous-link,
        .next-link {
            margin: 16px 0;

            a {
                color: black;
                font-size: 20px;
            }

            .title-preview {
                margin-top: 8px;
            }
        }

        .next-link {
            text-align: right;
        }
    }

    .share-button {
        margin: 16px 0;

        img {
            display: block;
            margin: auto;
            width: 48px;
            height: 48px;
        }
    }
}

// Section animations

.article-container {
    &.page-enter-active {
        display: none;
    }
    &:not(.page-enter-done):not(.page-exit-active), // Apply home first load too
    &.page-enter-done {
        // Total enter animations time CAN exceed $transitionsDuration
        $enterAnimations: $transitionsDuration / 3;

        .article:not(.article-exit-active) {
            @include articleEnterAnimation($enterAnimations);
        }

        .section-links {
            opacity: 0;
            animation: slide-in-right $enterAnimations forwards;
            animation-delay: $enterAnimations * 2;
        }
    }

    &.page-exit-active {
        // Total exit animations time CANNOT exceed $transitionsDuration
        $exitAnimations: $transitionsDuration / 3;

        .article {
            @include articleExitAnimation($exitAnimations);
        }

        .section-links {
            animation: slide-out-right $exitAnimations forwards;
        }
    }
    &.page-exit-done {
        display: none;
    }
}

// Article navigation animations

.article-container:not(.page-exit-active) {
    .article {
        &.article-enter-active {
            display: none;
        }
        &.article-enter-done {
            // Total enter animations time CAN exceed $transitionsDuration
            $enterAnimations: $transitionsDuration / 3;
            @include articleEnterAnimation($enterAnimations);
        }

        &.article-exit-active {
            // Total exit animations time CANNOT exceed $transitionsDuration
            $exitAnimations: $transitionsDuration / 3;
            @include articleExitAnimation($exitAnimations);
        }
        &.article-exit-done {
            display: none;
        }
    }
}
